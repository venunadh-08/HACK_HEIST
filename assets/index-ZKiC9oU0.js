function Px(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cg={exports:{}},Jl={},ug={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=Symbol.for("react.element"),Bx=Symbol.for("react.portal"),Fx=Symbol.for("react.fragment"),Ux=Symbol.for("react.strict_mode"),zx=Symbol.for("react.profiler"),jx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),Vx=Symbol.for("react.forward_ref"),Wx=Symbol.for("react.suspense"),Gx=Symbol.for("react.memo"),Yx=Symbol.for("react.lazy"),Vd=Symbol.iterator;function Xx(t){return t===null||typeof t!="object"?null:(t=Vd&&t[Vd]||t["@@iterator"],typeof t=="function"?t:null)}var fg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hg=Object.assign,dg={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||fg}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gg(){}gg.prototype=Fs.prototype;function Wf(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||fg}var Gf=Wf.prototype=new gg;Gf.constructor=Wf;hg(Gf,Fs.prototype);Gf.isPureReactComponent=!0;var Wd=Array.isArray,pg=Object.prototype.hasOwnProperty,Yf={current:null},mg={key:!0,ref:!0,__self:!0,__source:!0};function xg(t,e,n){var i,a={},c=null,d=null;if(e!=null)for(i in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)pg.call(e,i)&&!mg.hasOwnProperty(i)&&(a[i]=e[i]);var m=arguments.length-2;if(m===1)a.children=n;else if(1<m){for(var y=Array(m),x=0;x<m;x++)y[x]=arguments[x+2];a.children=y}if(t&&t.defaultProps)for(i in m=t.defaultProps,m)a[i]===void 0&&(a[i]=m[i]);return{$$typeof:aa,type:t,key:c,ref:d,props:a,_owner:Yf.current}}function Qx(t,e){return{$$typeof:aa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xf(t){return typeof t=="object"&&t!==null&&t.$$typeof===aa}function Kx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gd=/\/+/g;function Gc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kx(""+t.key):e.toString(36)}function qa(t,e,n,i,a){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case aa:case Bx:d=!0}}if(d)return d=t,a=a(d),t=i===""?"."+Gc(d,0):i,Wd(a)?(n="",t!=null&&(n=t.replace(Gd,"$&/")+"/"),qa(a,e,n,"",function(x){return x})):a!=null&&(Xf(a)&&(a=Qx(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(Gd,"$&/")+"/")+t)),e.push(a)),1;if(d=0,i=i===""?".":i+":",Wd(t))for(var m=0;m<t.length;m++){c=t[m];var y=i+Gc(c,m);d+=qa(c,e,n,y,a)}else if(y=Xx(t),typeof y=="function")for(t=y.call(t),m=0;!(c=t.next()).done;)c=c.value,y=i+Gc(c,m++),d+=qa(c,e,n,y,a);else if(c==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function Oa(t,e,n){if(t==null)return t;var i=[],a=0;return qa(t,i,"","",function(c){return e.call(n,c,a++)}),i}function Zx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},$a={transition:null},qx={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:$a,ReactCurrentOwner:Yf};function yg(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Oa,forEach:function(t,e,n){Oa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oa(t,function(){e++}),e},toArray:function(t){return Oa(t,function(e){return e})||[]},only:function(t){if(!Xf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Fs;ve.Fragment=Fx;ve.Profiler=zx;ve.PureComponent=Wf;ve.StrictMode=Ux;ve.Suspense=Wx;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx;ve.act=yg;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=hg({},t.props),a=t.key,c=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=Yf.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(y in e)pg.call(e,y)&&!mg.hasOwnProperty(y)&&(i[y]=e[y]===void 0&&m!==void 0?m[y]:e[y])}var y=arguments.length-2;if(y===1)i.children=n;else if(1<y){m=Array(y);for(var x=0;x<y;x++)m[x]=arguments[x+2];i.children=m}return{$$typeof:aa,type:t.type,key:a,ref:c,props:i,_owner:d}};ve.createContext=function(t){return t={$$typeof:Hx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jx,_context:t},t.Consumer=t};ve.createElement=xg;ve.createFactory=function(t){var e=xg.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Vx,render:t}};ve.isValidElement=Xf;ve.lazy=function(t){return{$$typeof:Yx,_payload:{_status:-1,_result:t},_init:Zx}};ve.memo=function(t,e){return{$$typeof:Gx,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=$a.transition;$a.transition={};try{t()}finally{$a.transition=e}};ve.unstable_act=yg;ve.useCallback=function(t,e){return tn.current.useCallback(t,e)};ve.useContext=function(t){return tn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return tn.current.useEffect(t,e)};ve.useId=function(){return tn.current.useId()};ve.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return tn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};ve.useRef=function(t){return tn.current.useRef(t)};ve.useState=function(t){return tn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return tn.current.useTransition()};ve.version="18.3.1";ug.exports=ve;var Ke=ug.exports;const $x=lg(Ke);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=Ke,ey=Symbol.for("react.element"),ty=Symbol.for("react.fragment"),ny=Object.prototype.hasOwnProperty,ry=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iy={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var i,a={},c=null,d=null;n!==void 0&&(c=""+n),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(i in e)ny.call(e,i)&&!iy.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:ey,type:t,key:c,ref:d,props:a,_owner:ry.current}}Jl.Fragment=ty;Jl.jsx=wg;Jl.jsxs=wg;cg.exports=Jl;var W=cg.exports,Nu={},_g={exports:{}},Tn={},Cg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,de){var me=ne.length;ne.push(de);e:for(;0<me;){var rt=me-1>>>1,be=ne[rt];if(0<a(be,de))ne[rt]=de,ne[me]=be,me=rt;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var de=ne[0],me=ne.pop();if(me!==de){ne[0]=me;e:for(var rt=0,be=ne.length,bn=be>>>1;rt<bn;){var ot=2*(rt+1)-1,pi=ne[ot],ce=ot+1,Dr=ne[ce];if(0>a(pi,me))ce<be&&0>a(Dr,pi)?(ne[rt]=Dr,ne[ce]=me,rt=ce):(ne[rt]=pi,ne[ot]=me,rt=ot);else if(ce<be&&0>a(Dr,me))ne[rt]=Dr,ne[ce]=me,rt=ce;else break e}}return de}function a(ne,de){var me=ne.sortIndex-de.sortIndex;return me!==0?me:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var y=[],x=[],A=1,E=null,I=3,D=!1,F=!1,B=!1,te=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ne){for(var de=n(x);de!==null;){if(de.callback===null)i(x);else if(de.startTime<=ne)i(x),de.sortIndex=de.expirationTime,e(y,de);else break;de=n(x)}}function H(ne){if(B=!1,b(ne),!F)if(n(y)!==null)F=!0,ft(ee);else{var de=n(x);de!==null&&xe(H,de.startTime-ne)}}function ee(ne,de){F=!1,B&&(B=!1,O(Y),Y=-1),D=!0;var me=I;try{for(b(de),E=n(y);E!==null&&(!(E.expirationTime>de)||ne&&!Ee());){var rt=E.callback;if(typeof rt=="function"){E.callback=null,I=E.priorityLevel;var be=rt(E.expirationTime<=de);de=t.unstable_now(),typeof be=="function"?E.callback=be:E===n(y)&&i(y),b(de)}else i(y);E=n(y)}if(E!==null)var bn=!0;else{var ot=n(x);ot!==null&&xe(H,ot.startTime-de),bn=!1}return bn}finally{E=null,I=me,D=!1}}var q=!1,L=null,Y=-1,V=5,le=-1;function Ee(){return!(t.unstable_now()-le<V)}function re(){if(L!==null){var ne=t.unstable_now();le=ne;var de=!0;try{de=L(!0,ne)}finally{de?ye():(q=!1,L=null)}}else q=!1}var ye;if(typeof N=="function")ye=function(){N(re)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,j=Be.port2;Be.port1.onmessage=re,ye=function(){j.postMessage(null)}}else ye=function(){te(re,0)};function ft(ne){L=ne,q||(q=!0,ye())}function xe(ne,de){Y=te(function(){ne(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){F||D||(F=!0,ft(ee))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(y)},t.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var de=3;break;default:de=I}var me=I;I=de;try{return ne()}finally{I=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var me=I;I=ne;try{return de()}finally{I=me}},t.unstable_scheduleCallback=function(ne,de,me){var rt=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?rt+me:rt):me=rt,ne){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=me+be,ne={id:A++,callback:de,priorityLevel:ne,startTime:me,expirationTime:be,sortIndex:-1},me>rt?(ne.sortIndex=me,e(x,ne),n(y)===null&&ne===n(x)&&(B?(O(Y),Y=-1):B=!0,xe(H,me-rt))):(ne.sortIndex=be,e(y,ne),F||D||(F=!0,ft(ee))),ne},t.unstable_shouldYield=Ee,t.unstable_wrapCallback=function(ne){var de=I;return function(){var me=I;I=de;try{return ne.apply(this,arguments)}finally{I=me}}}})(Eg);Cg.exports=Eg;var sy=Cg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=Ke,vn=sy;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ag=new Set,Lo={};function Hi(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(Lo[t]=e,t=0;t<e.length;t++)Ag.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=Object.prototype.hasOwnProperty,ay=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yd={},Xd={};function ly(t){return bu.call(Xd,t)?!0:bu.call(Yd,t)?!1:ay.test(t)?Xd[t]=!0:(Yd[t]=!0,!1)}function cy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uy(t,e,n,i){if(e===null||typeof e>"u"||cy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qf=/[\-:]([a-z])/g;function Kf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qf,Kf);Vt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qf,Kf);Vt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qf,Kf);Vt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zf(t,e,n,i){var a=Vt.hasOwnProperty(e)?Vt[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uy(e,n,a,i)&&(n=null),i||a===null?ly(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Rr=oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),rs=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),Ru=Symbol.for("react.profiler"),Sg=Symbol.for("react.provider"),Ig=Symbol.for("react.context"),$f=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Ou=Symbol.for("react.suspense_list"),Jf=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),vg=Symbol.for("react.offscreen"),Qd=Symbol.iterator;function io(t){return t===null||typeof t!="object"?null:(t=Qd&&t[Qd]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Yc;function xo(t){if(Yc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yc=e&&e[1]||""}return`
`+Yc+t}var Xc=!1;function Qc(t,e){if(!t||Xc)return"";Xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var i=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){i=x}t.call(e.prototype)}else{try{throw Error()}catch(x){i=x}t()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),c=i.stack.split(`
`),d=a.length-1,m=c.length-1;1<=d&&0<=m&&a[d]!==c[m];)m--;for(;1<=d&&0<=m;d--,m--)if(a[d]!==c[m]){if(d!==1||m!==1)do if(d--,m--,0>m||a[d]!==c[m]){var y=`
`+a[d].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=d&&0<=m);break}}}finally{Xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function fy(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=Qc(t.type,!1),t;case 11:return t=Qc(t.type.render,!1),t;case 1:return t=Qc(t.type,!0),t;default:return""}}function Du(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case is:return"Fragment";case rs:return"Portal";case Ru:return"Profiler";case qf:return"StrictMode";case Mu:return"Suspense";case Ou:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ig:return(t.displayName||"Context")+".Consumer";case Sg:return(t._context.displayName||"Context")+".Provider";case $f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jf:return e=t.displayName||null,e!==null?e:Du(t.type)||"Memo";case Vr:e=t._payload,t=t._init;try{return Du(t(e))}catch{}}return null}function hy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Du(e);case 8:return e===qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dy(t){var e=Tg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){i=""+d,c.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=dy(t))}function Ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Tg(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ku(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kd(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bg(t,e){e=e.checked,e!=null&&Zf(t,"checked",e,!1)}function Lu(t,e){bg(t,e);var n=oi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pu(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pu(t,e,n){(e!=="number"||ul(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function xs(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(yo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function Rg(t,e){var n=oi(e.value),i=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function $d(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,Og=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gy=["Webkit","ms","Moz","O"];Object.keys(Co).forEach(function(t){gy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Co[e]=Co[t]})});function Dg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Co.hasOwnProperty(t)&&Co[t]?(""+e).trim():e+"px"}function kg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=Dg(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var py=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uu(t,e){if(e){if(py[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hu=null,ys=null,ws=null;function Jd(t){if(t=ua(t)){if(typeof Hu!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=ic(e),Hu(t.stateNode,t.type,e))}}function Lg(t){ys?ws?ws.push(t):ws=[t]:ys=t}function Pg(){if(ys){var t=ys,e=ws;if(ws=ys=null,Jd(t),e)for(t=0;t<e.length;t++)Jd(e[t])}}function Bg(t,e){return t(e)}function Fg(){}var Kc=!1;function Ug(t,e,n){if(Kc)return t(e,n);Kc=!0;try{return Bg(t,e,n)}finally{Kc=!1,(ys!==null||ws!==null)&&(Fg(),Pg())}}function Bo(t,e){var n=t.stateNode;if(n===null)return null;var i=ic(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Vu=!1;if(Ar)try{var so={};Object.defineProperty(so,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Vu=!1}function my(t,e,n,i,a,c,d,m,y){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(A){this.onError(A)}}var Eo=!1,fl=null,hl=!1,Wu=null,xy={onError:function(t){Eo=!0,fl=t}};function yy(t,e,n,i,a,c,d,m,y){Eo=!1,fl=null,my.apply(xy,arguments)}function wy(t,e,n,i,a,c,d,m,y){if(yy.apply(this,arguments),Eo){if(Eo){var x=fl;Eo=!1,fl=null}else throw Error(Q(198));hl||(hl=!0,Wu=x)}}function Vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e1(t){if(Vi(t)!==t)throw Error(Q(188))}function _y(t){var e=t.alternate;if(!e){if(e=Vi(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return e1(a),t;if(c===i)return e1(a),e;c=c.sibling}throw Error(Q(188))}if(n.return!==i.return)n=a,i=c;else{for(var d=!1,m=a.child;m;){if(m===n){d=!0,n=a,i=c;break}if(m===i){d=!0,i=a,n=c;break}m=m.sibling}if(!d){for(m=c.child;m;){if(m===n){d=!0,n=c,i=a;break}if(m===i){d=!0,i=c,n=a;break}m=m.sibling}if(!d)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function jg(t){return t=_y(t),t!==null?Hg(t):null}function Hg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hg(t);if(e!==null)return e;t=t.sibling}return null}var Vg=vn.unstable_scheduleCallback,t1=vn.unstable_cancelCallback,Cy=vn.unstable_shouldYield,Ey=vn.unstable_requestPaint,wt=vn.unstable_now,Ay=vn.unstable_getCurrentPriorityLevel,th=vn.unstable_ImmediatePriority,Wg=vn.unstable_UserBlockingPriority,dl=vn.unstable_NormalPriority,Sy=vn.unstable_LowPriority,Gg=vn.unstable_IdlePriority,ec=null,hr=null;function Iy(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:Ny,vy=Math.log,Ty=Math.LN2;function Ny(t){return t>>>=0,t===0?32:31-(vy(t)/Ty|0)|0}var Pa=64,Ba=4194304;function wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,a=t.suspendedLanes,c=t.pingedLanes,d=n&268435455;if(d!==0){var m=d&~a;m!==0?i=wo(m):(c&=d,c!==0&&(i=wo(c)))}else d=n&~a,d!==0?i=wo(d):c!==0&&(i=wo(c));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-qn(e),a=1<<n,i|=t[n],e&=~a;return i}function by(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ry(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,c=t.pendingLanes;0<c;){var d=31-qn(c),m=1<<d,y=a[d];y===-1?(!(m&n)||m&i)&&(a[d]=by(m,e)):y<=e&&(t.expiredLanes|=m),c&=~m}}function Gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yg(){var t=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),t}function Zc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function la(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function My(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-qn(n),c=1<<a;e[a]=0,i[a]=-1,t[a]=-1,n&=~c}}function nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-qn(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}var ze=0;function Xg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qg,rh,Kg,Zg,qg,Yu=!1,Fa=[],Kr=null,Zr=null,qr=null,Fo=new Map,Uo=new Map,Gr=[],Oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n1(t,e){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(e.pointerId)}}function oo(t,e,n,i,a,c){return t===null||t.nativeEvent!==c?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},e!==null&&(e=ua(e),e!==null&&rh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Dy(t,e,n,i,a){switch(e){case"focusin":return Kr=oo(Kr,t,e,n,i,a),!0;case"dragenter":return Zr=oo(Zr,t,e,n,i,a),!0;case"mouseover":return qr=oo(qr,t,e,n,i,a),!0;case"pointerover":var c=a.pointerId;return Fo.set(c,oo(Fo.get(c)||null,t,e,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,Uo.set(c,oo(Uo.get(c)||null,t,e,n,i,a)),!0}return!1}function $g(t){var e=vi(t.target);if(e!==null){var n=Vi(e);if(n!==null){if(e=n.tag,e===13){if(e=zg(n),e!==null){t.blockedOn=e,qg(t.priority,function(){Kg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ja(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ju=i,n.target.dispatchEvent(i),ju=null}else return e=ua(n),e!==null&&rh(e),t.blockedOn=n,!1;e.shift()}return!0}function r1(t,e,n){Ja(t)&&n.delete(e)}function ky(){Yu=!1,Kr!==null&&Ja(Kr)&&(Kr=null),Zr!==null&&Ja(Zr)&&(Zr=null),qr!==null&&Ja(qr)&&(qr=null),Fo.forEach(r1),Uo.forEach(r1)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Yu||(Yu=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,ky)))}function zo(t){function e(a){return ao(a,t)}if(0<Fa.length){ao(Fa[0],t);for(var n=1;n<Fa.length;n++){var i=Fa[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Kr!==null&&ao(Kr,t),Zr!==null&&ao(Zr,t),qr!==null&&ao(qr,t),Fo.forEach(e),Uo.forEach(e),n=0;n<Gr.length;n++)i=Gr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)$g(n),n.blockedOn===null&&Gr.shift()}var _s=Rr.ReactCurrentBatchConfig,pl=!0;function Ly(t,e,n,i){var a=ze,c=_s.transition;_s.transition=null;try{ze=1,ih(t,e,n,i)}finally{ze=a,_s.transition=c}}function Py(t,e,n,i){var a=ze,c=_s.transition;_s.transition=null;try{ze=4,ih(t,e,n,i)}finally{ze=a,_s.transition=c}}function ih(t,e,n,i){if(pl){var a=Xu(t,e,n,i);if(a===null)ou(t,e,i,ml,n),n1(t,i);else if(Dy(a,t,e,n,i))i.stopPropagation();else if(n1(t,i),e&4&&-1<Oy.indexOf(t)){for(;a!==null;){var c=ua(a);if(c!==null&&Qg(c),c=Xu(t,e,n,i),c===null&&ou(t,e,i,ml,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else ou(t,e,i,null,n)}}var ml=null;function Xu(t,e,n,i){if(ml=null,t=eh(i),t=vi(t),t!==null)if(e=Vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ml=t,null}function Jg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ay()){case th:return 1;case Wg:return 4;case dl:case Sy:return 16;case Gg:return 536870912;default:return 16}default:return 16}}var Xr=null,sh=null,el=null;function ep(){if(el)return el;var t,e=sh,n=e.length,i,a="value"in Xr?Xr.value:Xr.textContent,c=a.length;for(t=0;t<n&&e[t]===a[t];t++);var d=n-t;for(i=1;i<=d&&e[n-i]===a[c-i];i++);return el=a.slice(t,1<i?1-i:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function i1(){return!1}function Nn(t){function e(n,i,a,c,d){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(c):c[m]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Ua:i1,this.isPropagationStopped=i1,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oh=Nn(Us),ca=ut({},Us,{view:0,detail:0}),By=Nn(ca),qc,$c,lo,tc=ut({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(qc=t.screenX-lo.screenX,$c=t.screenY-lo.screenY):$c=qc=0,lo=t),qc)},movementY:function(t){return"movementY"in t?t.movementY:$c}}),s1=Nn(tc),Fy=ut({},tc,{dataTransfer:0}),Uy=Nn(Fy),zy=ut({},ca,{relatedTarget:0}),Jc=Nn(zy),jy=ut({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),Hy=Nn(jy),Vy=ut({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wy=Nn(Vy),Gy=ut({},Us,{data:0}),o1=Nn(Gy),Yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ky(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qy[t])?!!e[t]:!1}function ah(){return Ky}var Zy=ut({},ca,{key:function(t){if(t.key){var e=Yy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ah,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qy=Nn(Zy),$y=ut({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a1=Nn($y),Jy=ut({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ah}),ew=Nn(Jy),tw=ut({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=Nn(tw),rw=ut({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iw=Nn(rw),sw=[9,13,27,32],lh=Ar&&"CompositionEvent"in window,Ao=null;Ar&&"documentMode"in document&&(Ao=document.documentMode);var ow=Ar&&"TextEvent"in window&&!Ao,tp=Ar&&(!lh||Ao&&8<Ao&&11>=Ao),l1=" ",c1=!1;function np(t,e){switch(t){case"keyup":return sw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function aw(t,e){switch(t){case"compositionend":return rp(e);case"keypress":return e.which!==32?null:(c1=!0,l1);case"textInput":return t=e.data,t===l1&&c1?null:t;default:return null}}function lw(t,e){if(ss)return t==="compositionend"||!lh&&np(t,e)?(t=ep(),el=sh=Xr=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tp&&e.locale!=="ko"?null:e.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cw[t.type]:e==="textarea"}function ip(t,e,n,i){Lg(i),e=xl(e,"onChange"),0<e.length&&(n=new oh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var So=null,jo=null;function uw(t){pp(t,0)}function nc(t){var e=ls(t);if(Ng(e))return t}function fw(t,e){if(t==="change")return e}var sp=!1;if(Ar){var eu;if(Ar){var tu="oninput"in document;if(!tu){var f1=document.createElement("div");f1.setAttribute("oninput","return;"),tu=typeof f1.oninput=="function"}eu=tu}else eu=!1;sp=eu&&(!document.documentMode||9<document.documentMode)}function h1(){So&&(So.detachEvent("onpropertychange",op),jo=So=null)}function op(t){if(t.propertyName==="value"&&nc(jo)){var e=[];ip(e,jo,t,eh(t)),Ug(uw,e)}}function hw(t,e,n){t==="focusin"?(h1(),So=e,jo=n,So.attachEvent("onpropertychange",op)):t==="focusout"&&h1()}function dw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(jo)}function gw(t,e){if(t==="click")return nc(e)}function pw(t,e){if(t==="input"||t==="change")return nc(e)}function mw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:mw;function Ho(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!bu.call(e,a)||!er(t[a],e[a]))return!1}return!0}function d1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g1(t,e){var n=d1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d1(n)}}function ap(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ap(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lp(){for(var t=window,e=ul();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ul(t.document)}return e}function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xw(t){var e=lp(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ap(n.ownerDocument.documentElement,n)){if(i!==null&&ch(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!t.extend&&c>i&&(a=i,i=c,c=a),a=g1(n,c);var d=g1(n,i);a&&d&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),c>i?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yw=Ar&&"documentMode"in document&&11>=document.documentMode,os=null,Qu=null,Io=null,Ku=!1;function p1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||os==null||os!==ul(i)||(i=os,"selectionStart"in i&&ch(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Io&&Ho(Io,i)||(Io=i,i=xl(Qu,"onSelect"),0<i.length&&(e=new oh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=os)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var as={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},nu={},cp={};Ar&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function rc(t){if(nu[t])return nu[t];if(!as[t])return t;var e=as[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cp)return nu[t]=e[n];return t}var up=rc("animationend"),fp=rc("animationiteration"),hp=rc("animationstart"),dp=rc("transitionend"),gp=new Map,m1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){gp.set(t,e),Hi(e,[t])}for(var ru=0;ru<m1.length;ru++){var iu=m1[ru],ww=iu.toLowerCase(),_w=iu[0].toUpperCase()+iu.slice(1);fi(ww,"on"+_w)}fi(up,"onAnimationEnd");fi(fp,"onAnimationIteration");fi(hp,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(dp,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cw=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function x1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,wy(i,e,void 0,t),t.currentTarget=null}function pp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;e:{var c=void 0;if(e)for(var d=i.length-1;0<=d;d--){var m=i[d],y=m.instance,x=m.currentTarget;if(m=m.listener,y!==c&&a.isPropagationStopped())break e;x1(a,m,x),c=y}else for(d=0;d<i.length;d++){if(m=i[d],y=m.instance,x=m.currentTarget,m=m.listener,y!==c&&a.isPropagationStopped())break e;x1(a,m,x),c=y}}}if(hl)throw t=Wu,hl=!1,Wu=null,t}function Je(t,e){var n=e[ef];n===void 0&&(n=e[ef]=new Set);var i=t+"__bubble";n.has(i)||(mp(e,t,2,!1),n.add(i))}function su(t,e,n){var i=0;e&&(i|=4),mp(n,t,i,e)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[ja]){t[ja]=!0,Ag.forEach(function(n){n!=="selectionchange"&&(Cw.has(n)||su(n,!1,t),su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ja]||(e[ja]=!0,su("selectionchange",!1,e))}}function mp(t,e,n,i){switch(Jg(e)){case 1:var a=Ly;break;case 4:a=Py;break;default:a=ih}n=a.bind(null,e,n,t),a=void 0,!Vu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function ou(t,e,n,i,a){var c=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var m=i.stateNode.containerInfo;if(m===a||m.nodeType===8&&m.parentNode===a)break;if(d===4)for(d=i.return;d!==null;){var y=d.tag;if((y===3||y===4)&&(y=d.stateNode.containerInfo,y===a||y.nodeType===8&&y.parentNode===a))return;d=d.return}for(;m!==null;){if(d=vi(m),d===null)return;if(y=d.tag,y===5||y===6){i=c=d;continue e}m=m.parentNode}}i=i.return}Ug(function(){var x=c,A=eh(n),E=[];e:{var I=gp.get(t);if(I!==void 0){var D=oh,F=t;switch(t){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":D=qy;break;case"focusin":F="focus",D=Jc;break;case"focusout":F="blur",D=Jc;break;case"beforeblur":case"afterblur":D=Jc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=s1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=ew;break;case up:case fp:case hp:D=Hy;break;case dp:D=nw;break;case"scroll":D=By;break;case"wheel":D=iw;break;case"copy":case"cut":case"paste":D=Wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=a1}var B=(e&4)!==0,te=!B&&t==="scroll",O=B?I!==null?I+"Capture":null:I;B=[];for(var N=x,b;N!==null;){b=N;var H=b.stateNode;if(b.tag===5&&H!==null&&(b=H,O!==null&&(H=Bo(N,O),H!=null&&B.push(Wo(N,H,b)))),te)break;N=N.return}0<B.length&&(I=new D(I,F,null,n,A),E.push({event:I,listeners:B}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",I&&n!==ju&&(F=n.relatedTarget||n.fromElement)&&(vi(F)||F[Sr]))break e;if((D||I)&&(I=A.window===A?A:(I=A.ownerDocument)?I.defaultView||I.parentWindow:window,D?(F=n.relatedTarget||n.toElement,D=x,F=F?vi(F):null,F!==null&&(te=Vi(F),F!==te||F.tag!==5&&F.tag!==6)&&(F=null)):(D=null,F=x),D!==F)){if(B=s1,H="onMouseLeave",O="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(B=a1,H="onPointerLeave",O="onPointerEnter",N="pointer"),te=D==null?I:ls(D),b=F==null?I:ls(F),I=new B(H,N+"leave",D,n,A),I.target=te,I.relatedTarget=b,H=null,vi(A)===x&&(B=new B(O,N+"enter",F,n,A),B.target=b,B.relatedTarget=te,H=B),te=H,D&&F)t:{for(B=D,O=F,N=0,b=B;b;b=ts(b))N++;for(b=0,H=O;H;H=ts(H))b++;for(;0<N-b;)B=ts(B),N--;for(;0<b-N;)O=ts(O),b--;for(;N--;){if(B===O||O!==null&&B===O.alternate)break t;B=ts(B),O=ts(O)}B=null}else B=null;D!==null&&y1(E,I,D,B,!1),F!==null&&te!==null&&y1(E,te,F,B,!0)}}e:{if(I=x?ls(x):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var ee=fw;else if(u1(I))if(sp)ee=pw;else{ee=dw;var q=hw}else(D=I.nodeName)&&D.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ee=gw);if(ee&&(ee=ee(t,x))){ip(E,ee,n,A);break e}q&&q(t,I,x),t==="focusout"&&(q=I._wrapperState)&&q.controlled&&I.type==="number"&&Pu(I,"number",I.value)}switch(q=x?ls(x):window,t){case"focusin":(u1(q)||q.contentEditable==="true")&&(os=q,Qu=x,Io=null);break;case"focusout":Io=Qu=os=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,p1(E,n,A);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":p1(E,n,A)}var L;if(lh)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else ss?np(t,n)&&(Y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(tp&&n.locale!=="ko"&&(ss||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&ss&&(L=ep()):(Xr=A,sh="value"in Xr?Xr.value:Xr.textContent,ss=!0)),q=xl(x,Y),0<q.length&&(Y=new o1(Y,t,null,n,A),E.push({event:Y,listeners:q}),L?Y.data=L:(L=rp(n),L!==null&&(Y.data=L)))),(L=ow?aw(t,n):lw(t,n))&&(x=xl(x,"onBeforeInput"),0<x.length&&(A=new o1("onBeforeInput","beforeinput",null,n,A),E.push({event:A,listeners:x}),A.data=L))}pp(E,e)})}function Wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xl(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Bo(t,n),c!=null&&i.unshift(Wo(t,c,a)),c=Bo(t,e),c!=null&&i.push(Wo(t,c,a))),t=t.return}return i}function ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y1(t,e,n,i,a){for(var c=e._reactName,d=[];n!==null&&n!==i;){var m=n,y=m.alternate,x=m.stateNode;if(y!==null&&y===i)break;m.tag===5&&x!==null&&(m=x,a?(y=Bo(n,c),y!=null&&d.unshift(Wo(n,y,m))):a||(y=Bo(n,c),y!=null&&d.push(Wo(n,y,m)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var Ew=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function w1(t){return(typeof t=="string"?t:""+t).replace(Ew,`
`).replace(Aw,"")}function Ha(t,e,n){if(e=w1(e),w1(t)!==e&&n)throw Error(Q(425))}function yl(){}var Zu=null,qu=null;function $u(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(t){return _1.resolve(null).then(t).catch(vw)}:Ju;function vw(t){setTimeout(function(){throw t})}function au(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){t.removeChild(a),zo(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);zo(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),fr="__reactFiber$"+zs,Go="__reactProps$"+zs,Sr="__reactContainer$"+zs,ef="__reactEvents$"+zs,Tw="__reactListeners$"+zs,Nw="__reactHandles$"+zs;function vi(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C1(t);t!==null;){if(n=t[fr])return n;t=C1(t)}return e}t=n,n=t.parentNode}return null}function ua(t){return t=t[fr]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function ic(t){return t[Go]||null}var tf=[],cs=-1;function hi(t){return{current:t}}function nt(t){0>cs||(t.current=tf[cs],tf[cs]=null,cs--)}function qe(t,e){cs++,tf[cs]=t.current,t.current=e}var ai={},Zt=hi(ai),gn=hi(!1),Di=ai;function Ns(t,e){var n=t.type.contextTypes;if(!n)return ai;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=e[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function pn(t){return t=t.childContextTypes,t!=null}function wl(){nt(gn),nt(Zt)}function E1(t,e,n){if(Zt.current!==ai)throw Error(Q(168));qe(Zt,e),qe(gn,n)}function xp(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(Q(108,hy(t)||"Unknown",a));return ut({},n,i)}function _l(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Di=Zt.current,qe(Zt,t),qe(gn,gn.current),!0}function A1(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=xp(t,e,Di),i.__reactInternalMemoizedMergedChildContext=t,nt(gn),nt(Zt),qe(Zt,t)):nt(gn),qe(gn,n)}var mr=null,sc=!1,lu=!1;function yp(t){mr===null?mr=[t]:mr.push(t)}function bw(t){sc=!0,yp(t)}function di(){if(!lu&&mr!==null){lu=!0;var t=0,e=ze;try{var n=mr;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mr=null,sc=!1}catch(a){throw mr!==null&&(mr=mr.slice(t+1)),Vg(th,di),a}finally{ze=e,lu=!1}}return null}var us=[],fs=0,Cl=null,El=0,kn=[],Ln=0,ki=null,xr=1,yr="";function Ei(t,e){us[fs++]=El,us[fs++]=Cl,Cl=t,El=e}function wp(t,e,n){kn[Ln++]=xr,kn[Ln++]=yr,kn[Ln++]=ki,ki=t;var i=xr;t=yr;var a=32-qn(i)-1;i&=~(1<<a),n+=1;var c=32-qn(e)+a;if(30<c){var d=a-a%5;c=(i&(1<<d)-1).toString(32),i>>=d,a-=d,xr=1<<32-qn(e)+a|n<<a|i,yr=c+t}else xr=1<<c|n<<a|i,yr=t}function uh(t){t.return!==null&&(Ei(t,1),wp(t,1,0))}function fh(t){for(;t===Cl;)Cl=us[--fs],us[fs]=null,El=us[--fs],us[fs]=null;for(;t===ki;)ki=kn[--Ln],kn[Ln]=null,yr=kn[--Ln],kn[Ln]=null,xr=kn[--Ln],kn[Ln]=null}var In=null,Sn=null,st=!1,Xn=null;function _p(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,Sn=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:xr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,Sn=null,!0):!1;default:return!1}}function nf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rf(t){if(st){var e=Sn;if(e){var n=e;if(!S1(t,e)){if(nf(t))throw Error(Q(418));e=$r(n.nextSibling);var i=In;e&&S1(t,e)?_p(i,n):(t.flags=t.flags&-4097|2,st=!1,In=t)}}else{if(nf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,st=!1,In=t}}}function I1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function Va(t){if(t!==In)return!1;if(!st)return I1(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$u(t.type,t.memoizedProps)),e&&(e=Sn)){if(nf(t))throw Cp(),Error(Q(418));for(;e;)_p(t,e),e=$r(e.nextSibling)}if(I1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=In?$r(t.stateNode.nextSibling):null;return!0}function Cp(){for(var t=Sn;t;)t=$r(t.nextSibling)}function bs(){Sn=In=null,st=!1}function hh(t){Xn===null?Xn=[t]:Xn.push(t)}var Rw=Rr.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var a=i,c=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var m=a.refs;d===null?delete m[c]:m[c]=d},e._stringRef=c,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v1(t){var e=t._init;return e(t._payload)}function Ep(t){function e(O,N){if(t){var b=O.deletions;b===null?(O.deletions=[N],O.flags|=16):b.push(N)}}function n(O,N){if(!t)return null;for(;N!==null;)e(O,N),N=N.sibling;return null}function i(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function a(O,N){return O=ni(O,N),O.index=0,O.sibling=null,O}function c(O,N,b){return O.index=b,t?(b=O.alternate,b!==null?(b=b.index,b<N?(O.flags|=2,N):b):(O.flags|=2,N)):(O.flags|=1048576,N)}function d(O){return t&&O.alternate===null&&(O.flags|=2),O}function m(O,N,b,H){return N===null||N.tag!==6?(N=pu(b,O.mode,H),N.return=O,N):(N=a(N,b),N.return=O,N)}function y(O,N,b,H){var ee=b.type;return ee===is?A(O,N,b.props.children,H,b.key):N!==null&&(N.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Vr&&v1(ee)===N.type)?(H=a(N,b.props),H.ref=co(O,N,b),H.return=O,H):(H=ll(b.type,b.key,b.props,null,O.mode,H),H.ref=co(O,N,b),H.return=O,H)}function x(O,N,b,H){return N===null||N.tag!==4||N.stateNode.containerInfo!==b.containerInfo||N.stateNode.implementation!==b.implementation?(N=mu(b,O.mode,H),N.return=O,N):(N=a(N,b.children||[]),N.return=O,N)}function A(O,N,b,H,ee){return N===null||N.tag!==7?(N=Oi(b,O.mode,H,ee),N.return=O,N):(N=a(N,b),N.return=O,N)}function E(O,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return N=pu(""+N,O.mode,b),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Da:return b=ll(N.type,N.key,N.props,null,O.mode,b),b.ref=co(O,null,N),b.return=O,b;case rs:return N=mu(N,O.mode,b),N.return=O,N;case Vr:var H=N._init;return E(O,H(N._payload),b)}if(yo(N)||io(N))return N=Oi(N,O.mode,b,null),N.return=O,N;Wa(O,N)}return null}function I(O,N,b,H){var ee=N!==null?N.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return ee!==null?null:m(O,N,""+b,H);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Da:return b.key===ee?y(O,N,b,H):null;case rs:return b.key===ee?x(O,N,b,H):null;case Vr:return ee=b._init,I(O,N,ee(b._payload),H)}if(yo(b)||io(b))return ee!==null?null:A(O,N,b,H,null);Wa(O,b)}return null}function D(O,N,b,H,ee){if(typeof H=="string"&&H!==""||typeof H=="number")return O=O.get(b)||null,m(N,O,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Da:return O=O.get(H.key===null?b:H.key)||null,y(N,O,H,ee);case rs:return O=O.get(H.key===null?b:H.key)||null,x(N,O,H,ee);case Vr:var q=H._init;return D(O,N,b,q(H._payload),ee)}if(yo(H)||io(H))return O=O.get(b)||null,A(N,O,H,ee,null);Wa(N,H)}return null}function F(O,N,b,H){for(var ee=null,q=null,L=N,Y=N=0,V=null;L!==null&&Y<b.length;Y++){L.index>Y?(V=L,L=null):V=L.sibling;var le=I(O,L,b[Y],H);if(le===null){L===null&&(L=V);break}t&&L&&le.alternate===null&&e(O,L),N=c(le,N,Y),q===null?ee=le:q.sibling=le,q=le,L=V}if(Y===b.length)return n(O,L),st&&Ei(O,Y),ee;if(L===null){for(;Y<b.length;Y++)L=E(O,b[Y],H),L!==null&&(N=c(L,N,Y),q===null?ee=L:q.sibling=L,q=L);return st&&Ei(O,Y),ee}for(L=i(O,L);Y<b.length;Y++)V=D(L,O,Y,b[Y],H),V!==null&&(t&&V.alternate!==null&&L.delete(V.key===null?Y:V.key),N=c(V,N,Y),q===null?ee=V:q.sibling=V,q=V);return t&&L.forEach(function(Ee){return e(O,Ee)}),st&&Ei(O,Y),ee}function B(O,N,b,H){var ee=io(b);if(typeof ee!="function")throw Error(Q(150));if(b=ee.call(b),b==null)throw Error(Q(151));for(var q=ee=null,L=N,Y=N=0,V=null,le=b.next();L!==null&&!le.done;Y++,le=b.next()){L.index>Y?(V=L,L=null):V=L.sibling;var Ee=I(O,L,le.value,H);if(Ee===null){L===null&&(L=V);break}t&&L&&Ee.alternate===null&&e(O,L),N=c(Ee,N,Y),q===null?ee=Ee:q.sibling=Ee,q=Ee,L=V}if(le.done)return n(O,L),st&&Ei(O,Y),ee;if(L===null){for(;!le.done;Y++,le=b.next())le=E(O,le.value,H),le!==null&&(N=c(le,N,Y),q===null?ee=le:q.sibling=le,q=le);return st&&Ei(O,Y),ee}for(L=i(O,L);!le.done;Y++,le=b.next())le=D(L,O,Y,le.value,H),le!==null&&(t&&le.alternate!==null&&L.delete(le.key===null?Y:le.key),N=c(le,N,Y),q===null?ee=le:q.sibling=le,q=le);return t&&L.forEach(function(re){return e(O,re)}),st&&Ei(O,Y),ee}function te(O,N,b,H){if(typeof b=="object"&&b!==null&&b.type===is&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Da:e:{for(var ee=b.key,q=N;q!==null;){if(q.key===ee){if(ee=b.type,ee===is){if(q.tag===7){n(O,q.sibling),N=a(q,b.props.children),N.return=O,O=N;break e}}else if(q.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Vr&&v1(ee)===q.type){n(O,q.sibling),N=a(q,b.props),N.ref=co(O,q,b),N.return=O,O=N;break e}n(O,q);break}else e(O,q);q=q.sibling}b.type===is?(N=Oi(b.props.children,O.mode,H,b.key),N.return=O,O=N):(H=ll(b.type,b.key,b.props,null,O.mode,H),H.ref=co(O,N,b),H.return=O,O=H)}return d(O);case rs:e:{for(q=b.key;N!==null;){if(N.key===q)if(N.tag===4&&N.stateNode.containerInfo===b.containerInfo&&N.stateNode.implementation===b.implementation){n(O,N.sibling),N=a(N,b.children||[]),N.return=O,O=N;break e}else{n(O,N);break}else e(O,N);N=N.sibling}N=mu(b,O.mode,H),N.return=O,O=N}return d(O);case Vr:return q=b._init,te(O,N,q(b._payload),H)}if(yo(b))return F(O,N,b,H);if(io(b))return B(O,N,b,H);Wa(O,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,N!==null&&N.tag===6?(n(O,N.sibling),N=a(N,b),N.return=O,O=N):(n(O,N),N=pu(b,O.mode,H),N.return=O,O=N),d(O)):n(O,N)}return te}var Rs=Ep(!0),Ap=Ep(!1),Al=hi(null),Sl=null,hs=null,dh=null;function gh(){dh=hs=Sl=null}function ph(t){var e=Al.current;nt(Al),t._currentValue=e}function sf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Cs(t,e){Sl=t,dh=hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(dh!==t)if(t={context:t,memoizedValue:e,next:null},hs===null){if(Sl===null)throw Error(Q(308));hs=t,Sl.dependencies={lanes:0,firstContext:t}}else hs=hs.next=t;return e}var Ti=null;function mh(t){Ti===null?Ti=[t]:Ti.push(t)}function Sp(t,e,n,i){var a=e.interleaved;return a===null?(n.next=n,mh(e)):(n.next=a.next,a.next=n),e.interleaved=n,Ir(t,i)}function Ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function xh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ip(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Ir(t,n)}return a=i.interleaved,a===null?(e.next=e,mh(i)):(e.next=a.next,a.next=e),i.interleaved=e,Ir(t,n)}function nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nh(t,n)}}function T1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?a=c=e:c=c.next=e}else a=c=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Il(t,e,n,i){var a=t.updateQueue;Wr=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,m=a.shared.pending;if(m!==null){a.shared.pending=null;var y=m,x=y.next;y.next=null,d===null?c=x:d.next=x,d=y;var A=t.alternate;A!==null&&(A=A.updateQueue,m=A.lastBaseUpdate,m!==d&&(m===null?A.firstBaseUpdate=x:m.next=x,A.lastBaseUpdate=y))}if(c!==null){var E=a.baseState;d=0,A=x=y=null,m=c;do{var I=m.lane,D=m.eventTime;if((i&I)===I){A!==null&&(A=A.next={eventTime:D,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var F=t,B=m;switch(I=e,D=n,B.tag){case 1:if(F=B.payload,typeof F=="function"){E=F.call(D,E,I);break e}E=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=B.payload,I=typeof F=="function"?F.call(D,E,I):F,I==null)break e;E=ut({},E,I);break e;case 2:Wr=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,I=a.effects,I===null?a.effects=[m]:I.push(m))}else D={eventTime:D,lane:I,tag:m.tag,payload:m.payload,callback:m.callback,next:null},A===null?(x=A=D,y=E):A=A.next=D,d|=I;if(m=m.next,m===null){if(m=a.shared.pending,m===null)break;I=m,m=I.next,I.next=null,a.lastBaseUpdate=I,a.shared.pending=null}}while(!0);if(A===null&&(y=E),a.baseState=y,a.firstBaseUpdate=x,a.lastBaseUpdate=A,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);Pi|=d,t.lanes=d,t.memoizedState=E}}function N1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Q(191,a));a.call(i)}}}var fa={},dr=hi(fa),Yo=hi(fa),Xo=hi(fa);function Ni(t){if(t===fa)throw Error(Q(174));return t}function yh(t,e){switch(qe(Xo,e),qe(Yo,t),qe(dr,fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fu(e,t)}nt(dr),qe(dr,e)}function Ms(){nt(dr),nt(Yo),nt(Xo)}function vp(t){Ni(Xo.current);var e=Ni(dr.current),n=Fu(e,t.type);e!==n&&(qe(Yo,t),qe(dr,n))}function wh(t){Yo.current===t&&(nt(dr),nt(Yo))}var lt=hi(0);function vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cu=[];function _h(){for(var t=0;t<cu.length;t++)cu[t]._workInProgressVersionPrimary=null;cu.length=0}var rl=Rr.ReactCurrentDispatcher,uu=Rr.ReactCurrentBatchConfig,Li=0,ct=null,It=null,Ot=null,Tl=!1,vo=!1,Qo=0,Mw=0;function Yt(){throw Error(Q(321))}function Ch(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function Eh(t,e,n,i,a,c){if(Li=c,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rl.current=t===null||t.memoizedState===null?Lw:Pw,t=n(i,a),vo){c=0;do{if(vo=!1,Qo=0,25<=c)throw Error(Q(301));c+=1,Ot=It=null,e.updateQueue=null,rl.current=Bw,t=n(i,a)}while(vo)}if(rl.current=Nl,e=It!==null&&It.next!==null,Li=0,Ot=It=ct=null,Tl=!1,e)throw Error(Q(300));return t}function Ah(){var t=Qo!==0;return Qo=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ct.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Un(){if(It===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Ot===null?ct.memoizedState:Ot.next;if(e!==null)Ot=e,It=t;else{if(t===null)throw Error(Q(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Ot===null?ct.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Ko(t,e){return typeof e=="function"?e(t):e}function fu(t){var e=Un(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=It,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var m=d=null,y=null,x=c;do{var A=x.lane;if((Li&A)===A)y!==null&&(y=y.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:t(i,x.action);else{var E={lane:A,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};y===null?(m=y=E,d=i):y=y.next=E,ct.lanes|=A,Pi|=A}x=x.next}while(x!==null&&x!==c);y===null?d=i:y.next=m,er(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseState=d,e.baseQueue=y,n.lastRenderedState=i}if(t=n.interleaved,t!==null){a=t;do c=a.lane,ct.lanes|=c,Pi|=c,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hu(t){var e=Un(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,c=e.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do c=t(c,d.action),d=d.next;while(d!==a);er(c,e.memoizedState)||(fn=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),n.lastRenderedState=c}return[c,i]}function Tp(){}function Np(t,e){var n=ct,i=Un(),a=e(),c=!er(i.memoizedState,a);if(c&&(i.memoizedState=a,fn=!0),i=i.queue,Sh(Mp.bind(null,n,i,t),[t]),i.getSnapshot!==e||c||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Zo(9,Rp.bind(null,n,i,a,e),void 0,null),Lt===null)throw Error(Q(349));Li&30||bp(n,e,a)}return a}function bp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rp(t,e,n,i){e.value=n,e.getSnapshot=i,Op(e)&&Dp(t)}function Mp(t,e,n){return n(function(){Op(e)&&Dp(t)})}function Op(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function Dp(t){var e=Ir(t,1);e!==null&&$n(e,t,1,-1)}function b1(t){var e=cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t},e.queue=t,t=t.dispatch=kw.bind(null,ct,t),[e.memoizedState,t]}function Zo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function kp(){return Un().memoizedState}function il(t,e,n,i){var a=cr();ct.flags|=t,a.memoizedState=Zo(1|e,n,void 0,i===void 0?null:i)}function oc(t,e,n,i){var a=Un();i=i===void 0?null:i;var c=void 0;if(It!==null){var d=It.memoizedState;if(c=d.destroy,i!==null&&Ch(i,d.deps)){a.memoizedState=Zo(e,n,c,i);return}}ct.flags|=t,a.memoizedState=Zo(1|e,n,c,i)}function R1(t,e){return il(8390656,8,t,e)}function Sh(t,e){return oc(2048,8,t,e)}function Lp(t,e){return oc(4,2,t,e)}function Pp(t,e){return oc(4,4,t,e)}function Bp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fp(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,Bp.bind(null,e,t),n)}function Ih(){}function Up(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ch(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function zp(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ch(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function jp(t,e,n){return Li&21?(er(n,e)||(n=Yg(),ct.lanes|=n,Pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function Ow(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=uu.transition;uu.transition={};try{t(!1),e()}finally{ze=n,uu.transition=i}}function Hp(){return Un().memoizedState}function Dw(t,e,n){var i=ti(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Vp(t))Wp(e,n);else if(n=Sp(t,e,n,i),n!==null){var a=en();$n(n,t,i,a),Gp(n,e,i)}}function kw(t,e,n){var i=ti(t),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vp(t))Wp(e,a);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,m=c(d,n);if(a.hasEagerState=!0,a.eagerState=m,er(m,d)){var y=e.interleaved;y===null?(a.next=a,mh(e)):(a.next=y.next,y.next=a),e.interleaved=a;return}}catch{}finally{}n=Sp(t,e,a,i),n!==null&&(a=en(),$n(n,t,i,a),Gp(n,e,i))}}function Vp(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function Wp(t,e){vo=Tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gp(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nh(t,n)}}var Nl={readContext:Fn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},Lw={readContext:Fn,useCallback:function(t,e){return cr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:R1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,il(4194308,4,Bp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return il(4194308,4,t,e)},useInsertionEffect:function(t,e){return il(4,2,t,e)},useMemo:function(t,e){var n=cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=cr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Dw.bind(null,ct,t),[i.memoizedState,t]},useRef:function(t){var e=cr();return t={current:t},e.memoizedState=t},useState:b1,useDebugValue:Ih,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=b1(!1),e=t[0];return t=Ow.bind(null,t[1]),cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ct,a=cr();if(st){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Lt===null)throw Error(Q(349));Li&30||bp(i,e,n)}a.memoizedState=n;var c={value:n,getSnapshot:e};return a.queue=c,R1(Mp.bind(null,i,c,t),[t]),i.flags|=2048,Zo(9,Rp.bind(null,i,c,n,e),void 0,null),n},useId:function(){var t=cr(),e=Lt.identifierPrefix;if(st){var n=yr,i=xr;n=(i&~(1<<32-qn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Mw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pw={readContext:Fn,useCallback:Up,useContext:Fn,useEffect:Sh,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Pp,useMemo:zp,useReducer:fu,useRef:kp,useState:function(){return fu(Ko)},useDebugValue:Ih,useDeferredValue:function(t){var e=Un();return jp(e,It.memoizedState,t)},useTransition:function(){var t=fu(Ko)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Tp,useSyncExternalStore:Np,useId:Hp,unstable_isNewReconciler:!1},Bw={readContext:Fn,useCallback:Up,useContext:Fn,useEffect:Sh,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Pp,useMemo:zp,useReducer:hu,useRef:kp,useState:function(){return hu(Ko)},useDebugValue:Ih,useDeferredValue:function(t){var e=Un();return It===null?e.memoizedState=t:jp(e,It.memoizedState,t)},useTransition:function(){var t=hu(Ko)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Tp,useSyncExternalStore:Np,useId:Hp,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function of(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?Vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=en(),a=ti(t),c=Cr(i,a);c.payload=e,n!=null&&(c.callback=n),e=Jr(t,c,a),e!==null&&($n(e,t,a,i),nl(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=en(),a=ti(t),c=Cr(i,a);c.tag=1,c.payload=e,n!=null&&(c.callback=n),e=Jr(t,c,a),e!==null&&($n(e,t,a,i),nl(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),i=ti(t),a=Cr(n,i);a.tag=2,e!=null&&(a.callback=e),e=Jr(t,a,i),e!==null&&($n(e,t,i,n),nl(e,t,i))}};function M1(t,e,n,i,a,c,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ho(n,i)||!Ho(a,c):!0}function Yp(t,e,n){var i=!1,a=ai,c=e.contextType;return typeof c=="object"&&c!==null?c=Fn(c):(a=pn(e)?Di:Zt.current,i=e.contextTypes,c=(i=i!=null)?Ns(t,a):ai),e=new e(n,c),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=c),e}function O1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function af(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},xh(t);var c=e.contextType;typeof c=="object"&&c!==null?a.context=Fn(c):(c=pn(e)?Di:Zt.current,a.context=Ns(t,c)),a.state=t.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(of(t,e,c,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ac.enqueueReplaceState(a,a.state,null),Il(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Os(t,e){try{var n="",i=e;do n+=fy(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:e,stack:a,digest:null}}function du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function Xp(t,e,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Rl||(Rl=!0,yf=i),lf(t,e)},n}function Qp(t,e,n){n=Cr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return i(a)},n.callback=function(){lf(t,e)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){lf(t,e),typeof i!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function D1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Fw;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(a.add(n),t=$w.bind(null,t,e,n),e.then(t,t))}function k1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L1(t,e,n,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cr(-1,1),e.tag=2,Jr(n,e,1))),n.lanes|=1),t)}var Uw=Rr.ReactCurrentOwner,fn=!1;function Jt(t,e,n,i){e.child=t===null?Ap(e,null,n,i):Rs(e,t.child,n,i)}function P1(t,e,n,i,a){n=n.render;var c=e.ref;return Cs(e,a),i=Eh(t,e,n,i,c,a),n=Ah(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,vr(t,e,a)):(st&&n&&uh(e),e.flags|=1,Jt(t,e,i,a),e.child)}function B1(t,e,n,i,a){if(t===null){var c=n.type;return typeof c=="function"&&!Dh(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=c,Kp(t,e,c,i,a)):(t=ll(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(c=t.child,!(t.lanes&a)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:Ho,n(d,i)&&t.ref===e.ref)return vr(t,e,a)}return e.flags|=1,t=ni(c,i),t.ref=e.ref,t.return=e,e.child=t}function Kp(t,e,n,i,a){if(t!==null){var c=t.memoizedProps;if(Ho(c,i)&&t.ref===e.ref)if(fn=!1,e.pendingProps=i=c,(t.lanes&a)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,vr(t,e,a)}return cf(t,e,n,i,a)}function Zp(t,e,n){var i=e.pendingProps,a=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(gs,En),En|=n;else{if(!(n&1073741824))return t=c!==null?c.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(gs,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,qe(gs,En),En|=i}else c!==null?(i=c.baseLanes|n,e.memoizedState=null):i=n,qe(gs,En),En|=i;return Jt(t,e,a,n),e.child}function qp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cf(t,e,n,i,a){var c=pn(n)?Di:Zt.current;return c=Ns(e,c),Cs(e,a),n=Eh(t,e,n,i,c,a),i=Ah(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,vr(t,e,a)):(st&&i&&uh(e),e.flags|=1,Jt(t,e,n,a),e.child)}function F1(t,e,n,i,a){if(pn(n)){var c=!0;_l(e)}else c=!1;if(Cs(e,a),e.stateNode===null)sl(t,e),Yp(e,n,i),af(e,n,i,a),i=!0;else if(t===null){var d=e.stateNode,m=e.memoizedProps;d.props=m;var y=d.context,x=n.contextType;typeof x=="object"&&x!==null?x=Fn(x):(x=pn(n)?Di:Zt.current,x=Ns(e,x));var A=n.getDerivedStateFromProps,E=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function";E||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==i||y!==x)&&O1(e,d,i,x),Wr=!1;var I=e.memoizedState;d.state=I,Il(e,i,d,a),y=e.memoizedState,m!==i||I!==y||gn.current||Wr?(typeof A=="function"&&(of(e,n,A,i),y=e.memoizedState),(m=Wr||M1(e,n,m,i,I,y,x))?(E||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=y),d.props=i,d.state=y,d.context=x,i=m):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{d=e.stateNode,Ip(t,e),m=e.memoizedProps,x=e.type===e.elementType?m:Wn(e.type,m),d.props=x,E=e.pendingProps,I=d.context,y=n.contextType,typeof y=="object"&&y!==null?y=Fn(y):(y=pn(n)?Di:Zt.current,y=Ns(e,y));var D=n.getDerivedStateFromProps;(A=typeof D=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==E||I!==y)&&O1(e,d,i,y),Wr=!1,I=e.memoizedState,d.state=I,Il(e,i,d,a);var F=e.memoizedState;m!==E||I!==F||gn.current||Wr?(typeof D=="function"&&(of(e,n,D,i),F=e.memoizedState),(x=Wr||M1(e,n,x,i,I,F,y)||!1)?(A||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,F,y),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,F,y)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=F),d.props=i,d.state=F,d.context=y,i=x):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return uf(t,e,n,i,c,a)}function uf(t,e,n,i,a,c){qp(t,e);var d=(e.flags&128)!==0;if(!i&&!d)return a&&A1(e,n,!1),vr(t,e,c);i=e.stateNode,Uw.current=e;var m=d&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&d?(e.child=Rs(e,t.child,null,c),e.child=Rs(e,null,m,c)):Jt(t,e,m,c),e.memoizedState=i.state,a&&A1(e,n,!0),e.child}function $p(t){var e=t.stateNode;e.pendingContext?E1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&E1(t,e.context,!1),yh(t,e.containerInfo)}function U1(t,e,n,i,a){return bs(),hh(a),e.flags|=256,Jt(t,e,n,i),e.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jp(t,e,n){var i=e.pendingProps,a=lt.current,c=!1,d=(e.flags&128)!==0,m;if((m=d)||(m=t!==null&&t.memoizedState===null?!1:(a&2)!==0),m?(c=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),qe(lt,a&1),t===null)return rf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=i.children,t=i.fallback,c?(i=e.mode,c=e.child,d={mode:"hidden",children:d},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=uc(d,i,0,null),t=Oi(t,i,n,null),c.return=e,t.return=e,c.sibling=t,e.child=c,e.child.memoizedState=hf(n),e.memoizedState=ff,t):vh(e,d));if(a=t.memoizedState,a!==null&&(m=a.dehydrated,m!==null))return zw(t,e,d,i,m,a,n);if(c){c=i.fallback,d=e.mode,a=t.child,m=a.sibling;var y={mode:"hidden",children:i.children};return!(d&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=y,e.deletions=null):(i=ni(a,y),i.subtreeFlags=a.subtreeFlags&14680064),m!==null?c=ni(m,c):(c=Oi(c,d,n,null),c.flags|=2),c.return=e,i.return=e,i.sibling=c,e.child=i,i=c,c=e.child,d=t.child.memoizedState,d=d===null?hf(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=t.childLanes&~n,e.memoizedState=ff,i}return c=t.child,t=c.sibling,i=ni(c,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vh(t,e){return e=uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ga(t,e,n,i){return i!==null&&hh(i),Rs(e,t.child,null,n),t=vh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zw(t,e,n,i,a,c,d){if(n)return e.flags&256?(e.flags&=-257,i=du(Error(Q(422))),Ga(t,e,d,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(c=i.fallback,a=e.mode,i=uc({mode:"visible",children:i.children},a,0,null),c=Oi(c,a,d,null),c.flags|=2,i.return=e,c.return=e,i.sibling=c,e.child=i,e.mode&1&&Rs(e,t.child,null,d),e.child.memoizedState=hf(d),e.memoizedState=ff,c);if(!(e.mode&1))return Ga(t,e,d,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var m=i.dgst;return i=m,c=Error(Q(419)),i=du(c,i,void 0),Ga(t,e,d,i)}if(m=(d&t.childLanes)!==0,fn||m){if(i=Lt,i!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Ir(t,a),$n(i,t,a,-1))}return Oh(),i=du(Error(Q(421))),Ga(t,e,d,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Jw.bind(null,t),a._reactRetry=e,null):(t=c.treeContext,Sn=$r(a.nextSibling),In=e,st=!0,Xn=null,t!==null&&(kn[Ln++]=xr,kn[Ln++]=yr,kn[Ln++]=ki,xr=t.id,yr=t.overflow,ki=e),e=vh(e,i.children),e.flags|=4096,e)}function z1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),sf(t.return,e,n)}function gu(t,e,n,i,a){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function em(t,e,n){var i=e.pendingProps,a=i.revealOrder,c=i.tail;if(Jt(t,e,i.children,n),i=lt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&z1(t,n,e);else if(t.tag===19)z1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(qe(lt,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&vl(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),gu(e,!1,a,n,c);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&vl(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}gu(e,!0,n,null,c);break;case"together":gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jw(t,e,n){switch(e.tag){case 3:$p(e),bs();break;case 5:vp(e);break;case 1:pn(e.type)&&_l(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;qe(Al,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qe(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?Jp(t,e,n):(qe(lt,lt.current&1),t=vr(t,e,n),t!==null?t.sibling:null);qe(lt,lt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return em(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qe(lt,lt.current),i)break;return null;case 22:case 23:return e.lanes=0,Zp(t,e,n)}return vr(t,e,n)}var tm,df,nm,rm;tm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};nm=function(t,e,n,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,Ni(dr.current);var c=null;switch(n){case"input":a=ku(t,a),i=ku(t,i),c=[];break;case"select":a=ut({},a,{value:void 0}),i=ut({},i,{value:void 0}),c=[];break;case"textarea":a=Bu(t,a),i=Bu(t,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=yl)}Uu(n,i);var d;n=null;for(x in a)if(!i.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var m=a[x];for(d in m)m.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Lo.hasOwnProperty(x)?c||(c=[]):(c=c||[]).push(x,null));for(x in i){var y=i[x];if(m=a!=null?a[x]:void 0,i.hasOwnProperty(x)&&y!==m&&(y!=null||m!=null))if(x==="style")if(m){for(d in m)!m.hasOwnProperty(d)||y&&y.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in y)y.hasOwnProperty(d)&&m[d]!==y[d]&&(n||(n={}),n[d]=y[d])}else n||(c||(c=[]),c.push(x,n)),n=y;else x==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,m=m?m.__html:void 0,y!=null&&m!==y&&(c=c||[]).push(x,y)):x==="children"?typeof y!="string"&&typeof y!="number"||(c=c||[]).push(x,""+y):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(x)?(y!=null&&x==="onScroll"&&Je("scroll",t),c||m===y||(c=[])):(c=c||[]).push(x,y))}n&&(c=c||[]).push("style",n);var x=c;(e.updateQueue=x)&&(e.flags|=4)}};rm=function(t,e,n,i){n!==i&&(e.flags|=4)};function uo(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Hw(t,e,n){var i=e.pendingProps;switch(fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return pn(e.type)&&wl(),Xt(e),null;case 3:return i=e.stateNode,Ms(),nt(gn),nt(Zt),_h(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Va(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Cf(Xn),Xn=null))),df(t,e),Xt(e),null;case 5:wh(e);var a=Ni(Xo.current);if(n=e.type,t!==null&&e.stateNode!=null)nm(t,e,n,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Xt(e),null}if(t=Ni(dr.current),Va(e)){i=e.stateNode,n=e.type;var c=e.memoizedProps;switch(i[fr]=e,i[Go]=c,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(a=0;a<_o.length;a++)Je(_o[a],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Kd(i,c),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Je("invalid",i);break;case"textarea":qd(i,c),Je("invalid",i)}Uu(n,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var m=c[d];d==="children"?typeof m=="string"?i.textContent!==m&&(c.suppressHydrationWarning!==!0&&Ha(i.textContent,m,t),a=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(c.suppressHydrationWarning!==!0&&Ha(i.textContent,m,t),a=["children",""+m]):Lo.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&Je("scroll",i)}switch(n){case"input":ka(i),Zd(i,c,!0);break;case"textarea":ka(i),$d(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=yl)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=d.createElement(n,{is:i.is}):(t=d.createElement(n),n==="select"&&(d=t,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):t=d.createElementNS(t,n),t[fr]=e,t[Go]=i,tm(t,e,!1,!1),e.stateNode=t;e:{switch(d=zu(n,i),n){case"dialog":Je("cancel",t),Je("close",t),a=i;break;case"iframe":case"object":case"embed":Je("load",t),a=i;break;case"video":case"audio":for(a=0;a<_o.length;a++)Je(_o[a],t);a=i;break;case"source":Je("error",t),a=i;break;case"img":case"image":case"link":Je("error",t),Je("load",t),a=i;break;case"details":Je("toggle",t),a=i;break;case"input":Kd(t,i),a=ku(t,i),Je("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=ut({},i,{value:void 0}),Je("invalid",t);break;case"textarea":qd(t,i),a=Bu(t,i),Je("invalid",t);break;default:a=i}Uu(n,a),m=a;for(c in m)if(m.hasOwnProperty(c)){var y=m[c];c==="style"?kg(t,y):c==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&Og(t,y)):c==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&Po(t,y):typeof y=="number"&&Po(t,""+y):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lo.hasOwnProperty(c)?y!=null&&c==="onScroll"&&Je("scroll",t):y!=null&&Zf(t,c,y,d))}switch(n){case"input":ka(t),Zd(t,i,!1);break;case"textarea":ka(t),$d(t);break;case"option":i.value!=null&&t.setAttribute("value",""+oi(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?xs(t,!!i.multiple,c,!1):i.defaultValue!=null&&xs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=yl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)rm(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ni(Xo.current),Ni(dr.current),Va(e)){if(i=e.stateNode,n=e.memoizedProps,i[fr]=e,(c=i.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:Ha(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(i.nodeValue,n,(t.mode&1)!==0)}c&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[fr]=e,e.stateNode=i}return Xt(e),null;case 13:if(nt(lt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Sn!==null&&e.mode&1&&!(e.flags&128))Cp(),bs(),e.flags|=98560,c=!1;else if(c=Va(e),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(Q(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Q(317));c[fr]=e}else bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),c=!1}else Xn!==null&&(Cf(Xn),Xn=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Tt===0&&(Tt=3):Oh())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Ms(),df(t,e),t===null&&Vo(e.stateNode.containerInfo),Xt(e),null;case 10:return ph(e.type._context),Xt(e),null;case 17:return pn(e.type)&&wl(),Xt(e),null;case 19:if(nt(lt),c=e.memoizedState,c===null)return Xt(e),null;if(i=(e.flags&128)!==0,d=c.rendering,d===null)if(i)uo(c,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=vl(t),d!==null){for(e.flags|=128,uo(c,!1),i=d.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)c=n,t=i,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,t=d.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(lt,lt.current&1|2),e.child}t=t.sibling}c.tail!==null&&wt()>Ds&&(e.flags|=128,i=!0,uo(c,!1),e.lanes=4194304)}else{if(!i)if(t=vl(d),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!st)return Xt(e),null}else 2*wt()-c.renderingStartTime>Ds&&n!==1073741824&&(e.flags|=128,i=!0,uo(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(n=c.last,n!==null?n.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=wt(),e.sibling=null,n=lt.current,qe(lt,i?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return Mh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?En&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Vw(t,e){switch(fh(e),e.tag){case 1:return pn(e.type)&&wl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ms(),nt(gn),nt(Zt),_h(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wh(e),null;case 13:if(nt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(lt),null;case 4:return Ms(),null;case 10:return ph(e.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var Ya=!1,Qt=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){mt(t,e,i)}else n.current=null}function gf(t,e,n){try{n()}catch(i){mt(t,e,i)}}var j1=!1;function Gw(t,e){if(Zu=pl,t=lp(),ch(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var d=0,m=-1,y=-1,x=0,A=0,E=t,I=null;t:for(;;){for(var D;E!==n||a!==0&&E.nodeType!==3||(m=d+a),E!==c||i!==0&&E.nodeType!==3||(y=d+i),E.nodeType===3&&(d+=E.nodeValue.length),(D=E.firstChild)!==null;)I=E,E=D;for(;;){if(E===t)break t;if(I===n&&++x===a&&(m=d),I===c&&++A===i&&(y=d),(D=E.nextSibling)!==null)break;E=I,I=E.parentNode}E=D}n=m===-1||y===-1?null:{start:m,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(qu={focusedElem:t,selectionRange:n},pl=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var B=F.memoizedProps,te=F.memoizedState,O=e.stateNode,N=O.getSnapshotBeforeUpdate(e.elementType===e.type?B:Wn(e.type,B),te);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(H){mt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return F=j1,j1=!1,F}function To(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var c=a.destroy;a.destroy=void 0,c!==void 0&&gf(e,n,c)}a=a.next}while(a!==i)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function im(t){var e=t.alternate;e!==null&&(t.alternate=null,im(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[Go],delete e[ef],delete e[Tw],delete e[Nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sm(t){return t.tag===5||t.tag===3||t.tag===4}function H1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yl));else if(i!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}function xf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}var zt=null,Gn=!1;function jr(t,e,n){for(n=n.child;n!==null;)om(t,e,n),n=n.sibling}function om(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:Qt||ds(n,e);case 6:var i=zt,a=Gn;zt=null,jr(t,e,n),zt=i,Gn=a,zt!==null&&(Gn?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(Gn?(t=zt,n=n.stateNode,t.nodeType===8?au(t.parentNode,n):t.nodeType===1&&au(t,n),zo(t)):au(zt,n.stateNode));break;case 4:i=zt,a=Gn,zt=n.stateNode.containerInfo,Gn=!0,jr(t,e,n),zt=i,Gn=a;break;case 0:case 11:case 14:case 15:if(!Qt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&gf(n,e,d),a=a.next}while(a!==i)}jr(t,e,n);break;case 1:if(!Qt&&(ds(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(m){mt(n,e,m)}jr(t,e,n);break;case 21:jr(t,e,n);break;case 22:n.mode&1?(Qt=(i=Qt)||n.memoizedState!==null,jr(t,e,n),Qt=i):jr(t,e,n);break;default:jr(t,e,n)}}function V1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ww),e.forEach(function(i){var a=e_.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=t,d=e,m=d;e:for(;m!==null;){switch(m.tag){case 5:zt=m.stateNode,Gn=!1;break e;case 3:zt=m.stateNode.containerInfo,Gn=!0;break e;case 4:zt=m.stateNode.containerInfo,Gn=!0;break e}m=m.return}if(zt===null)throw Error(Q(160));om(c,d,a),zt=null,Gn=!1;var y=a.alternate;y!==null&&(y.return=null),a.return=null}catch(x){mt(a,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)am(e,t),e=e.sibling}function am(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),lr(t),i&4){try{To(3,t,t.return),lc(3,t)}catch(B){mt(t,t.return,B)}try{To(5,t,t.return)}catch(B){mt(t,t.return,B)}}break;case 1:Vn(e,t),lr(t),i&512&&n!==null&&ds(n,n.return);break;case 5:if(Vn(e,t),lr(t),i&512&&n!==null&&ds(n,n.return),t.flags&32){var a=t.stateNode;try{Po(a,"")}catch(B){mt(t,t.return,B)}}if(i&4&&(a=t.stateNode,a!=null)){var c=t.memoizedProps,d=n!==null?n.memoizedProps:c,m=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{m==="input"&&c.type==="radio"&&c.name!=null&&bg(a,c),zu(m,d);var x=zu(m,c);for(d=0;d<y.length;d+=2){var A=y[d],E=y[d+1];A==="style"?kg(a,E):A==="dangerouslySetInnerHTML"?Og(a,E):A==="children"?Po(a,E):Zf(a,A,E,x)}switch(m){case"input":Lu(a,c);break;case"textarea":Rg(a,c);break;case"select":var I=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var D=c.value;D!=null?xs(a,!!c.multiple,D,!1):I!==!!c.multiple&&(c.defaultValue!=null?xs(a,!!c.multiple,c.defaultValue,!0):xs(a,!!c.multiple,c.multiple?[]:"",!1))}a[Go]=c}catch(B){mt(t,t.return,B)}}break;case 6:if(Vn(e,t),lr(t),i&4){if(t.stateNode===null)throw Error(Q(162));a=t.stateNode,c=t.memoizedProps;try{a.nodeValue=c}catch(B){mt(t,t.return,B)}}break;case 3:if(Vn(e,t),lr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{zo(e.containerInfo)}catch(B){mt(t,t.return,B)}break;case 4:Vn(e,t),lr(t);break;case 13:Vn(e,t),lr(t),a=t.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(bh=wt())),i&4&&V1(t);break;case 22:if(A=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(x=Qt)||A,Vn(e,t),Qt=x):Vn(e,t),lr(t),i&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!A&&t.mode&1)for(oe=t,A=t.child;A!==null;){for(E=oe=A;oe!==null;){switch(I=oe,D=I.child,I.tag){case 0:case 11:case 14:case 15:To(4,I,I.return);break;case 1:ds(I,I.return);var F=I.stateNode;if(typeof F.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(B){mt(i,n,B)}}break;case 5:ds(I,I.return);break;case 22:if(I.memoizedState!==null){G1(E);continue}}D!==null?(D.return=I,oe=D):G1(E)}A=A.sibling}e:for(A=null,E=t;;){if(E.tag===5){if(A===null){A=E;try{a=E.stateNode,x?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(m=E.stateNode,y=E.memoizedProps.style,d=y!=null&&y.hasOwnProperty("display")?y.display:null,m.style.display=Dg("display",d))}catch(B){mt(t,t.return,B)}}}else if(E.tag===6){if(A===null)try{E.stateNode.nodeValue=x?"":E.memoizedProps}catch(B){mt(t,t.return,B)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;A===E&&(A=null),E=E.return}A===E&&(A=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Vn(e,t),lr(t),i&4&&V1(t);break;case 21:break;default:Vn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sm(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Po(a,""),i.flags&=-33);var c=H1(t);xf(t,c,a);break;case 3:case 4:var d=i.stateNode.containerInfo,m=H1(t);mf(t,m,d);break;default:throw Error(Q(161))}}catch(y){mt(t,t.return,y)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yw(t,e,n){oe=t,lm(t)}function lm(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var a=oe,c=a.child;if(a.tag===22&&i){var d=a.memoizedState!==null||Ya;if(!d){var m=a.alternate,y=m!==null&&m.memoizedState!==null||Qt;m=Ya;var x=Qt;if(Ya=d,(Qt=y)&&!x)for(oe=a;oe!==null;)d=oe,y=d.child,d.tag===22&&d.memoizedState!==null?Y1(a):y!==null?(y.return=d,oe=y):Y1(a);for(;c!==null;)oe=c,lm(c),c=c.sibling;oe=a,Ya=m,Qt=x}W1(t)}else a.subtreeFlags&8772&&c!==null?(c.return=a,oe=c):W1(t)}}function W1(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||lc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qt)if(n===null)i.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&N1(e,c,i);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N1(e,d,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var y=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var A=x.memoizedState;if(A!==null){var E=A.dehydrated;E!==null&&zo(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Qt||e.flags&512&&pf(e)}catch(I){mt(e,e.return,I)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function G1(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Y1(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(y){mt(e,n,y)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(y){mt(e,a,y)}}var c=e.return;try{pf(e)}catch(y){mt(e,c,y)}break;case 5:var d=e.return;try{pf(e)}catch(y){mt(e,d,y)}}}catch(y){mt(e,e.return,y)}if(e===t){oe=null;break}var m=e.sibling;if(m!==null){m.return=e.return,oe=m;break}oe=e.return}}var Xw=Math.ceil,bl=Rr.ReactCurrentDispatcher,Th=Rr.ReactCurrentOwner,Bn=Rr.ReactCurrentBatchConfig,Oe=0,Lt=null,Ct=null,Ht=0,En=0,gs=hi(0),Tt=0,qo=null,Pi=0,cc=0,Nh=0,No=null,un=null,bh=0,Ds=1/0,pr=null,Rl=!1,yf=null,ei=null,Xa=!1,Qr=null,Ml=0,bo=0,wf=null,ol=-1,al=0;function en(){return Oe&6?wt():ol!==-1?ol:ol=wt()}function ti(t){return t.mode&1?Oe&2&&Ht!==0?Ht&-Ht:Rw.transition!==null?(al===0&&(al=Yg()),al):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Jg(t.type)),t):1}function $n(t,e,n,i){if(50<bo)throw bo=0,wf=null,Error(Q(185));la(t,n,i),(!(Oe&2)||t!==Lt)&&(t===Lt&&(!(Oe&2)&&(cc|=n),Tt===4&&Yr(t,Ht)),mn(t,i),n===1&&Oe===0&&!(e.mode&1)&&(Ds=wt()+500,sc&&di()))}function mn(t,e){var n=t.callbackNode;Ry(t,e);var i=gl(t,t===Lt?Ht:0);if(i===0)n!==null&&t1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&t1(n),e===1)t.tag===0?bw(X1.bind(null,t)):yp(X1.bind(null,t)),Iw(function(){!(Oe&6)&&di()}),n=null;else{switch(Xg(i)){case 1:n=th;break;case 4:n=Wg;break;case 16:n=dl;break;case 536870912:n=Gg;break;default:n=dl}n=mm(n,cm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cm(t,e){if(ol=-1,al=0,Oe&6)throw Error(Q(327));var n=t.callbackNode;if(Es()&&t.callbackNode!==n)return null;var i=gl(t,t===Lt?Ht:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ol(t,i);else{e=i;var a=Oe;Oe|=2;var c=fm();(Lt!==t||Ht!==e)&&(pr=null,Ds=wt()+500,Mi(t,e));do try{Zw();break}catch(m){um(t,m)}while(!0);gh(),bl.current=c,Oe=a,Ct!==null?e=0:(Lt=null,Ht=0,e=Tt)}if(e!==0){if(e===2&&(a=Gu(t),a!==0&&(i=a,e=_f(t,a))),e===1)throw n=qo,Mi(t,0),Yr(t,i),mn(t,wt()),n;if(e===6)Yr(t,i);else{if(a=t.current.alternate,!(i&30)&&!Qw(a)&&(e=Ol(t,i),e===2&&(c=Gu(t),c!==0&&(i=c,e=_f(t,c))),e===1))throw n=qo,Mi(t,0),Yr(t,i),mn(t,wt()),n;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Ai(t,un,pr);break;case 3:if(Yr(t,i),(i&130023424)===i&&(e=bh+500-wt(),10<e)){if(gl(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){en(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Ju(Ai.bind(null,t,un,pr),e);break}Ai(t,un,pr);break;case 4:if(Yr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var d=31-qn(i);c=1<<d,d=e[d],d>a&&(a=d),i&=~c}if(i=a,i=wt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Xw(i/1960))-i,10<i){t.timeoutHandle=Ju(Ai.bind(null,t,un,pr),i);break}Ai(t,un,pr);break;case 5:Ai(t,un,pr);break;default:throw Error(Q(329))}}}return mn(t,wt()),t.callbackNode===n?cm.bind(null,t):null}function _f(t,e){var n=No;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=Ol(t,e),t!==2&&(e=un,un=n,e!==null&&Cf(e)),t}function Cf(t){un===null?un=t:un.push.apply(un,t)}function Qw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!er(c(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~Nh,e&=~cc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),i=1<<n;t[n]=-1,e&=~i}}function X1(t){if(Oe&6)throw Error(Q(327));Es();var e=gl(t,0);if(!(e&1))return mn(t,wt()),null;var n=Ol(t,e);if(t.tag!==0&&n===2){var i=Gu(t);i!==0&&(e=i,n=_f(t,i))}if(n===1)throw n=qo,Mi(t,0),Yr(t,e),mn(t,wt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ai(t,un,pr),mn(t,wt()),null}function Rh(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Ds=wt()+500,sc&&di())}}function Bi(t){Qr!==null&&Qr.tag===0&&!(Oe&6)&&Es();var e=Oe;Oe|=1;var n=Bn.transition,i=ze;try{if(Bn.transition=null,ze=1,t)return t()}finally{ze=i,Bn.transition=n,Oe=e,!(Oe&6)&&di()}}function Mh(){En=gs.current,nt(gs)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sw(n)),Ct!==null)for(n=Ct.return;n!==null;){var i=n;switch(fh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wl();break;case 3:Ms(),nt(gn),nt(Zt),_h();break;case 5:wh(i);break;case 4:Ms();break;case 13:nt(lt);break;case 19:nt(lt);break;case 10:ph(i.type._context);break;case 22:case 23:Mh()}n=n.return}if(Lt=t,Ct=t=ni(t.current,null),Ht=En=e,Tt=0,qo=null,Nh=cc=Pi=0,un=No=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var d=c.next;c.next=a,i.next=d}n.pending=i}Ti=null}return t}function um(t,e){do{var n=Ct;try{if(gh(),rl.current=Nl,Tl){for(var i=ct.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Tl=!1}if(Li=0,Ot=It=ct=null,vo=!1,Qo=0,Th.current=null,n===null||n.return===null){Tt=1,qo=e,Ct=null;break}e:{var c=t,d=n.return,m=n,y=e;if(e=Ht,m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var x=y,A=m,E=A.tag;if(!(A.mode&1)&&(E===0||E===11||E===15)){var I=A.alternate;I?(A.updateQueue=I.updateQueue,A.memoizedState=I.memoizedState,A.lanes=I.lanes):(A.updateQueue=null,A.memoizedState=null)}var D=k1(d);if(D!==null){D.flags&=-257,L1(D,d,m,c,e),D.mode&1&&D1(c,x,e),e=D,y=x;var F=e.updateQueue;if(F===null){var B=new Set;B.add(y),e.updateQueue=B}else F.add(y);break e}else{if(!(e&1)){D1(c,x,e),Oh();break e}y=Error(Q(426))}}else if(st&&m.mode&1){var te=k1(d);if(te!==null){!(te.flags&65536)&&(te.flags|=256),L1(te,d,m,c,e),hh(Os(y,m));break e}}c=y=Os(y,m),Tt!==4&&(Tt=2),No===null?No=[c]:No.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var O=Xp(c,y,e);T1(c,O);break e;case 1:m=y;var N=c.type,b=c.stateNode;if(!(c.flags&128)&&(typeof N.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ei===null||!ei.has(b)))){c.flags|=65536,e&=-e,c.lanes|=e;var H=Qp(c,m,e);T1(c,H);break e}}c=c.return}while(c!==null)}dm(n)}catch(ee){e=ee,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function fm(){var t=bl.current;return bl.current=Nl,t===null?Nl:t}function Oh(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Lt===null||!(Pi&268435455)&&!(cc&268435455)||Yr(Lt,Ht)}function Ol(t,e){var n=Oe;Oe|=2;var i=fm();(Lt!==t||Ht!==e)&&(pr=null,Mi(t,e));do try{Kw();break}catch(a){um(t,a)}while(!0);if(gh(),Oe=n,bl.current=i,Ct!==null)throw Error(Q(261));return Lt=null,Ht=0,Tt}function Kw(){for(;Ct!==null;)hm(Ct)}function Zw(){for(;Ct!==null&&!Cy();)hm(Ct)}function hm(t){var e=pm(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?dm(t):Ct=e,Th.current=null}function dm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vw(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,Ct=null;return}}else if(n=Hw(n,e,En),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ai(t,e,n){var i=ze,a=Bn.transition;try{Bn.transition=null,ze=1,qw(t,e,n,i)}finally{Bn.transition=a,ze=i}return null}function qw(t,e,n,i){do Es();while(Qr!==null);if(Oe&6)throw Error(Q(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var c=n.lanes|n.childLanes;if(My(t,c),t===Lt&&(Ct=Lt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xa||(Xa=!0,mm(dl,function(){return Es(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Bn.transition,Bn.transition=null;var d=ze;ze=1;var m=Oe;Oe|=4,Th.current=null,Gw(t,n),am(n,t),xw(qu),pl=!!Zu,qu=Zu=null,t.current=n,Yw(n),Ey(),Oe=m,ze=d,Bn.transition=c}else t.current=n;if(Xa&&(Xa=!1,Qr=t,Ml=a),c=t.pendingLanes,c===0&&(ei=null),Iy(n.stateNode),mn(t,wt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Rl)throw Rl=!1,t=yf,yf=null,t;return Ml&1&&t.tag!==0&&Es(),c=t.pendingLanes,c&1?t===wf?bo++:(bo=0,wf=t):bo=0,di(),null}function Es(){if(Qr!==null){var t=Xg(Ml),e=Bn.transition,n=ze;try{if(Bn.transition=null,ze=16>t?16:t,Qr===null)var i=!1;else{if(t=Qr,Qr=null,Ml=0,Oe&6)throw Error(Q(331));var a=Oe;for(Oe|=4,oe=t.current;oe!==null;){var c=oe,d=c.child;if(oe.flags&16){var m=c.deletions;if(m!==null){for(var y=0;y<m.length;y++){var x=m[y];for(oe=x;oe!==null;){var A=oe;switch(A.tag){case 0:case 11:case 15:To(8,A,c)}var E=A.child;if(E!==null)E.return=A,oe=E;else for(;oe!==null;){A=oe;var I=A.sibling,D=A.return;if(im(A),A===x){oe=null;break}if(I!==null){I.return=D,oe=I;break}oe=D}}}var F=c.alternate;if(F!==null){var B=F.child;if(B!==null){F.child=null;do{var te=B.sibling;B.sibling=null,B=te}while(B!==null)}}oe=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,oe=d;else e:for(;oe!==null;){if(c=oe,c.flags&2048)switch(c.tag){case 0:case 11:case 15:To(9,c,c.return)}var O=c.sibling;if(O!==null){O.return=c.return,oe=O;break e}oe=c.return}}var N=t.current;for(oe=N;oe!==null;){d=oe;var b=d.child;if(d.subtreeFlags&2064&&b!==null)b.return=d,oe=b;else e:for(d=N;oe!==null;){if(m=oe,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:lc(9,m)}}catch(ee){mt(m,m.return,ee)}if(m===d){oe=null;break e}var H=m.sibling;if(H!==null){H.return=m.return,oe=H;break e}oe=m.return}}if(Oe=a,di(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(ec,t)}catch{}i=!0}return i}finally{ze=n,Bn.transition=e}}return!1}function Q1(t,e,n){e=Os(n,e),e=Xp(t,e,1),t=Jr(t,e,1),e=en(),t!==null&&(la(t,1,e),mn(t,e))}function mt(t,e,n){if(t.tag===3)Q1(t,t,n);else for(;e!==null;){if(e.tag===3){Q1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ei===null||!ei.has(i))){t=Os(n,t),t=Qp(e,t,1),e=Jr(e,t,1),t=en(),e!==null&&(la(e,1,t),mn(e,t));break}}e=e.return}}function $w(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Ht&n)===n&&(Tt===4||Tt===3&&(Ht&130023424)===Ht&&500>wt()-bh?Mi(t,0):Nh|=n),mn(t,e)}function gm(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=en();t=Ir(t,e),t!==null&&(la(t,e,n),mn(t,n))}function Jw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gm(t,n)}function e_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),gm(t,n)}var pm;pm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,jw(t,e,n);fn=!!(t.flags&131072)}else fn=!1,st&&e.flags&1048576&&wp(e,El,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sl(t,e),t=e.pendingProps;var a=Ns(e,Zt.current);Cs(e,n),a=Eh(null,e,i,t,a,n);var c=Ah();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(i)?(c=!0,_l(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,xh(e),a.updater=ac,e.stateNode=a,a._reactInternals=e,af(e,i,t,n),e=uf(null,e,i,!0,c,n)):(e.tag=0,st&&c&&uh(e),Jt(null,e,a,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sl(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=n_(i),t=Wn(i,t),a){case 0:e=cf(null,e,i,t,n);break e;case 1:e=F1(null,e,i,t,n);break e;case 11:e=P1(null,e,i,t,n);break e;case 14:e=B1(null,e,i,Wn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Wn(i,a),cf(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Wn(i,a),F1(t,e,i,a,n);case 3:e:{if($p(e),t===null)throw Error(Q(387));i=e.pendingProps,c=e.memoizedState,a=c.element,Ip(t,e),Il(e,i,null,n);var d=e.memoizedState;if(i=d.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Os(Error(Q(423)),e),e=U1(t,e,i,n,a);break e}else if(i!==a){a=Os(Error(Q(424)),e),e=U1(t,e,i,n,a);break e}else for(Sn=$r(e.stateNode.containerInfo.firstChild),In=e,st=!0,Xn=null,n=Ap(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bs(),i===a){e=vr(t,e,n);break e}Jt(t,e,i,n)}e=e.child}return e;case 5:return vp(e),t===null&&rf(e),i=e.type,a=e.pendingProps,c=t!==null?t.memoizedProps:null,d=a.children,$u(i,a)?d=null:c!==null&&$u(i,c)&&(e.flags|=32),qp(t,e),Jt(t,e,d,n),e.child;case 6:return t===null&&rf(e),null;case 13:return Jp(t,e,n);case 4:return yh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Rs(e,null,i,n):Jt(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Wn(i,a),P1(t,e,i,a,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,c=e.memoizedProps,d=a.value,qe(Al,i._currentValue),i._currentValue=d,c!==null)if(er(c.value,d)){if(c.children===a.children&&!gn.current){e=vr(t,e,n);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var m=c.dependencies;if(m!==null){d=c.child;for(var y=m.firstContext;y!==null;){if(y.context===i){if(c.tag===1){y=Cr(-1,n&-n),y.tag=2;var x=c.updateQueue;if(x!==null){x=x.shared;var A=x.pending;A===null?y.next=y:(y.next=A.next,A.next=y),x.pending=y}}c.lanes|=n,y=c.alternate,y!==null&&(y.lanes|=n),sf(c.return,n,e),m.lanes|=n;break}y=y.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(Q(341));d.lanes|=n,m=d.alternate,m!==null&&(m.lanes|=n),sf(d,n,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Jt(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,Cs(e,n),a=Fn(a),i=i(a),e.flags|=1,Jt(t,e,i,n),e.child;case 14:return i=e.type,a=Wn(i,e.pendingProps),a=Wn(i.type,a),B1(t,e,i,a,n);case 15:return Kp(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Wn(i,a),sl(t,e),e.tag=1,pn(i)?(t=!0,_l(e)):t=!1,Cs(e,n),Yp(e,i,a),af(e,i,a,n),uf(null,e,i,!0,t,n);case 19:return em(t,e,n);case 22:return Zp(t,e,n)}throw Error(Q(156,e.tag))};function mm(t,e){return Vg(t,e)}function t_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,i){return new t_(t,e,n,i)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n_(t){if(typeof t=="function")return Dh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$f)return 11;if(t===Jf)return 14}return 2}function ni(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ll(t,e,n,i,a,c){var d=2;if(i=t,typeof t=="function")Dh(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case is:return Oi(n.children,a,c,e);case qf:d=8,a|=8;break;case Ru:return t=Pn(12,n,e,a|2),t.elementType=Ru,t.lanes=c,t;case Mu:return t=Pn(13,n,e,a),t.elementType=Mu,t.lanes=c,t;case Ou:return t=Pn(19,n,e,a),t.elementType=Ou,t.lanes=c,t;case vg:return uc(n,a,c,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sg:d=10;break e;case Ig:d=9;break e;case $f:d=11;break e;case Jf:d=14;break e;case Vr:d=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Pn(d,n,e,a),e.elementType=t,e.type=i,e.lanes=c,e}function Oi(t,e,n,i){return t=Pn(7,t,i,e),t.lanes=n,t}function uc(t,e,n,i){return t=Pn(22,t,i,e),t.elementType=vg,t.lanes=n,t.stateNode={isHidden:!1},t}function pu(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function mu(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r_(t,e,n,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function kh(t,e,n,i,a,c,d,m,y){return t=new r_(t,e,n,m,y),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Pn(3,null,null,e),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xh(c),t}function i_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function xm(t){if(!t)return ai;t=t._reactInternals;e:{if(Vi(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(pn(n))return xp(t,n,e)}return e}function ym(t,e,n,i,a,c,d,m,y){return t=kh(n,i,!0,t,a,c,d,m,y),t.context=xm(null),n=t.current,i=en(),a=ti(n),c=Cr(i,a),c.callback=e??null,Jr(n,c,a),t.current.lanes=a,la(t,a,i),mn(t,i),t}function fc(t,e,n,i){var a=e.current,c=en(),d=ti(a);return n=xm(n),e.context===null?e.context=n:e.pendingContext=n,e=Cr(c,d),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Jr(a,e,d),t!==null&&($n(t,a,d,c),nl(t,a,d)),d}function Dl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lh(t,e){K1(t,e),(t=t.alternate)&&K1(t,e)}function s_(){return null}var wm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ph(t){this._internalRoot=t}hc.prototype.render=Ph.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));fc(t,e,null,null)};hc.prototype.unmount=Ph.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){fc(null,t,null,null)}),e[Sr]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&$g(t)}};function Bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function o_(t,e,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var x=Dl(d);c.call(x)}}var d=ym(e,i,t,0,null,!1,!1,"",Z1);return t._reactRootContainer=d,t[Sr]=d.current,Vo(t.nodeType===8?t.parentNode:t),Bi(),d}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var m=i;i=function(){var x=Dl(y);m.call(x)}}var y=kh(t,0,!1,null,null,!1,!1,"",Z1);return t._reactRootContainer=y,t[Sr]=y.current,Vo(t.nodeType===8?t.parentNode:t),Bi(function(){fc(e,y,n,i)}),y}function gc(t,e,n,i,a){var c=n._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var m=a;a=function(){var y=Dl(d);m.call(y)}}fc(e,d,t,a)}else d=o_(n,e,t,a,i);return Dl(d)}Qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wo(e.pendingLanes);n!==0&&(nh(e,n|1),mn(e,wt()),!(Oe&6)&&(Ds=wt()+500,di()))}break;case 13:Bi(function(){var i=Ir(t,1);if(i!==null){var a=en();$n(i,t,1,a)}}),Lh(t,1)}};rh=function(t){if(t.tag===13){var e=Ir(t,134217728);if(e!==null){var n=en();$n(e,t,134217728,n)}Lh(t,134217728)}};Kg=function(t){if(t.tag===13){var e=ti(t),n=Ir(t,e);if(n!==null){var i=en();$n(n,t,e,i)}Lh(t,e)}};Zg=function(){return ze};qg=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Hu=function(t,e,n){switch(e){case"input":if(Lu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=ic(i);if(!a)throw Error(Q(90));Ng(i),Lu(i,a)}}}break;case"textarea":Rg(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};Bg=Rh;Fg=Bi;var a_={usingClientEntryPoint:!1,Events:[ua,ls,ic,Lg,Pg,Rh]},fo={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l_={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jg(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{ec=Qa.inject(l_),hr=Qa}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a_;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bh(e))throw Error(Q(200));return i_(t,e,null,n)};Tn.createRoot=function(t,e){if(!Bh(t))throw Error(Q(299));var n=!1,i="",a=wm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=kh(t,1,!1,null,null,n,!1,i,a),t[Sr]=e.current,Vo(t.nodeType===8?t.parentNode:t),new Ph(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=jg(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return Bi(t)};Tn.hydrate=function(t,e,n){if(!dc(e))throw Error(Q(200));return gc(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Bh(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",d=wm;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=ym(e,null,t,1,n??null,a,!1,c,d),t[Sr]=e.current,Vo(t),i)for(t=0;t<i.length;t++)n=i[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new hc(e)};Tn.render=function(t,e,n){if(!dc(e))throw Error(Q(200));return gc(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!dc(t))throw Error(Q(40));return t._reactRootContainer?(Bi(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};Tn.unstable_batchedUpdates=Rh;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!dc(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return gc(t,e,n,!1,i)};Tn.version="18.3.1-next-f1338f8080-20240426";function _m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_m)}catch(t){console.error(t)}}_m(),_g.exports=Tn;var c_=_g.exports,q1=c_;Nu.createRoot=q1.createRoot,Nu.hydrateRoot=q1.hydrateRoot;/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cm=(...t)=>t.filter((e,n,i)=>!!e&&i.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Ke.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:c,iconNode:d,...m},y)=>Ke.createElement("svg",{ref:y,...f_,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Cm("lucide",a),...m},[...d.map(([x,A])=>Ke.createElement(x,A)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=(t,e)=>{const n=Ke.forwardRef(({className:i,...a},c)=>Ke.createElement(h_,{ref:c,iconNode:e,className:Cm(`lucide-${u_(t)}`,i),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Mr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Mr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Mr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Mr("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Mr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Mr("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=Mr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Mr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Mr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),w_="/HACK_HEIST/gfg_logo.png",__=t=>{const e=t.trim().split(`
`);if(e.length<2)return[];const n=e[0].split(",").map(i=>i.trim().toLowerCase());return e.slice(1).map(i=>{const a=i.split(",").map(d=>d.trim()),c={};return n.forEach((d,m)=>{c[d]=a[m]}),c})},C_=({onLogin:t})=>{const[e,n]=Ke.useState(""),[i,a]=Ke.useState(""),[c,d]=Ke.useState(!1),[m,y]=Ke.useState([]);Ke.useEffect(()=>{(async()=>{try{const I=await fetch("/HACK_HEIST/Organizers.csv");if(I.ok){const D=await I.text();y(__(D))}}catch(E){console.error("Failed to load Organizers.csv",E)}})()},[]);const x=A=>{A.preventDefault(),a(""),d(!0);const E=m.find(I=>I.email&&I.email.toLowerCase()===e.toLowerCase());E?t({id:e.split("@")[0],email:e,role:"organizer",name:E.name}):a("Operative not found in the manifest."),d(!1)};return W.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gfg-gradient-start to-gfg-gradient-end flex items-center justify-center relative overflow-hidden",children:W.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4",children:[W.jsxs("div",{className:"text-center mb-8",children:[W.jsx("div",{className:"mb-4",children:W.jsx("img",{src:w_,alt:"GFG Logo",className:"mx-auto h-24 sm:h-28"})}),W.jsx("p",{className:"text-gfg-gold text-lg font-body uppercase tracking-widest mb-2",children:"GFG CAMPUS BODY KARE PRESENTS"}),W.jsxs("h1",{className:"text-6xl font-extrabold text-gfg-text-light font-heading mb-4 tracking-tight",children:["HACK ",W.jsx("span",{className:"bg-gfg-red text-gfg-text-light px-2 py-1 leading-none inline-block",children:"HEIST"})]})]}),W.jsxs("div",{className:"bg-gfg-card-bg rounded-lg shadow-2xl border border-gfg-border overflow-hidden",children:[W.jsx("div",{className:"bg-gradient-to-r from-gfg-red to-gfg-red-hover p-4",children:W.jsx("h2",{className:"text-xl font-bold text-gfg-text-light text-center font-heading tracking-widest",children:"ORGANIZER ACCESS"})}),W.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-body font-medium text-gfg-text-dark mb-2 tracking-wide",children:"ORGANIZER EMAIL"}),W.jsx("input",{type:"email",id:"email",value:e,onChange:A=>n(A.target.value),className:"w-full px-3 py-2 bg-gfg-dark-bg border border-gfg-border rounded-lg text-gfg-text-light placeholder-gfg-text-dark focus:border-gfg-gold focus:ring-1 focus:ring-gfg-gold outline-none transition-colors",placeholder:"gfg.organizer@example.com",disabled:c})]}),i&&W.jsxs("div",{className:"flex items-center space-x-2 text-gfg-gold bg-gfg-gold/10 p-3 rounded-lg border border-gfg-gold/20",children:[W.jsx(Fh,{className:"w-4 h-4 flex-shrink-0"}),W.jsx("span",{className:"text-sm font-body",children:i})]}),W.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gfg-gold hover:bg-gfg-gold-hover text-gfg-card-bg py-3 px-4 rounded-lg font-bold font-heading hover:shadow-lg uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:c?"VERIFYING...":"LOGIN"})]})]})]})})},E_=({records:t})=>{const[e,n]=Ke.useState(""),i=e?t.filter(c=>c.name.toLowerCase().includes(e.toLowerCase())||c.regNo.toLowerCase().includes(e.toLowerCase())||c.team.toLowerCase().includes(e.toLowerCase())):[],a=(c,d)=>{switch(d){case 1:return c.session1;case 2:return c.session2;case 3:return c.session3;default:return!1}};return W.jsxs("div",{className:"bg-gfg-card-bg rounded-lg border border-gfg-border overflow-hidden font-body",children:[W.jsx("div",{className:"p-4",children:W.jsxs("div",{className:"relative",children:[W.jsx(x_,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gfg-text-dark"}),W.jsx("input",{type:"text",value:e,onChange:c=>n(c.target.value),placeholder:"Search by Name,Reg No, or Team",className:"w-full pl-10 pr-4 py-2 bg-gfg-dark-bg border border-gfg-border rounded-lg text-gfg-text-light placeholder-gfg-text-dark focus:border-gfg-gold focus:ring-1 focus:ring-gfg-gold outline-none"})]})}),W.jsxs("div",{className:"overflow-x-auto",children:[W.jsxs("table",{className:"w-full text-sm md:text-base",children:[W.jsx("thead",{className:"bg-gfg-dark-bg/50",children:W.jsxs("tr",{children:[W.jsx("th",{className:"text-left p-2 md:p-4 text-gfg-text-dark font-semibold uppercase tracking-wider",children:"Participant"}),W.jsx("th",{className:"text-center p-2 md:p-4 text-gfg-text-dark font-semibold",children:"S1"}),W.jsx("th",{className:"text-center p-2 md:p-4 text-gfg-text-dark font-semibold",children:"S2"}),W.jsx("th",{className:"text-center p-2 md:p-4 text-gfg-text-dark font-semibold",children:"S3"}),W.jsx("th",{className:"hidden md:table-cell text-center p-4 text-gfg-text-dark font-semibold uppercase tracking-wider",children:"Last Updated"})]})}),e&&W.jsx("tbody",{className:"divide-y divide-gfg-border",children:i.map(c=>W.jsxs("tr",{className:"hover:bg-gfg-dark-bg/50",children:[W.jsx("td",{className:"p-2 md:p-4",children:W.jsxs("div",{children:[W.jsx("div",{className:"text-gfg-text-light font-medium whitespace-nowrap",children:c.name}),W.jsx("div",{className:"text-gfg-text-dark text-xs md:text-sm",children:c.regNo}),W.jsx("div",{className:"text-gfg-gold text-xs mt-1",children:c.team})]})}),[1,2,3].map(d=>{const m=a(c,d);return W.jsx("td",{className:"p-2 md:p-4 text-center",children:W.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m?"bg-green-500/20 text-green-400":"bg-gfg-red/20 text-gfg-red"}`,children:m?"PRESENT":"ABSENT"})},d)}),W.jsx("td",{className:"hidden md:table-cell p-4 text-center",children:W.jsxs("div",{className:"flex items-center justify-center text-gfg-text-dark text-xs",children:[W.jsx(Em,{className:"w-3 h-3 mr-1"}),new Date(c.lastUpdated).toLocaleString()]})})]},c.userId))})]}),!e&&W.jsxs("div",{className:"p-12 text-center",children:[W.jsx(Am,{className:"w-10 h-10 mx-auto text-gfg-border mb-4"}),W.jsx("div",{className:"text-gfg-text-dark font-body",children:"Enter a search term to find participant records."})]}),e&&i.length===0&&W.jsx("div",{className:"p-8 text-center text-gfg-text-dark font-body",children:"No participants found matching your query."})]})]})};var se;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var $1=new Map([[se.QR_CODE,"QR_CODE"],[se.AZTEC,"AZTEC"],[se.CODABAR,"CODABAR"],[se.CODE_39,"CODE_39"],[se.CODE_93,"CODE_93"],[se.CODE_128,"CODE_128"],[se.DATA_MATRIX,"DATA_MATRIX"],[se.MAXICODE,"MAXICODE"],[se.ITF,"ITF"],[se.EAN_13,"EAN_13"],[se.EAN_8,"EAN_8"],[se.PDF_417,"PDF_417"],[se.RSS_14,"RSS_14"],[se.RSS_EXPANDED,"RSS_EXPANDED"],[se.UPC_A,"UPC_A"],[se.UPC_E,"UPC_E"],[se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),J1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(J1||(J1={}));function A_(t){return Object.values(se).includes(t)}var li;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(li||(li={}));var Yn=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[li.SCAN_TYPE_CAMERA,li.SCAN_TYPE_FILE],t}(),Sm=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!$1.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,$1.get(e))},t}(),e0=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Ef;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ef||(Ef={}));var Im=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ef.UNKWOWN_ERROR}},t}(),vm=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ur(t){return typeof t>"u"||t===null}function S_(t,e,n){return t>n?n:t<e?e:t}var ps=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Ue=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),t0=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),Tm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),d=Object.keys(e),m=0,y=d;m<y.length;m++){var x=y[m];if(c.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),Af={exports:{}};(function(t,e){(function(n,i){i(e)})(ro,function(n){function i(_){return _==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,r){_.__proto__=r}||function(_,r){for(var s in r)r.hasOwnProperty(s)&&(_[s]=r[s])};function c(_,r){a(_,r);function s(){this.constructor=_}_.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function d(_,r){var s=Object.setPrototypeOf;s?s(_,r):_.__proto__=r}function m(_,r){r===void 0&&(r=_.constructor);var s=Error.captureStackTrace;s&&s(_,r)}var y=function(_){c(r,_);function r(s){var o=this.constructor,l=_.call(this,s)||this;return Object.defineProperty(l,"name",{value:o.name,enumerable:!1}),d(l,o.prototype),m(l),l}return r}(Error);class x extends y{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}x.kind="Exception";class A extends x{}A.kind="ArgumentException";class E extends x{}E.kind="IllegalArgumentException";class I{constructor(r){if(this.binarizer=r,r===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,l){const u=this.binarizer.getLuminanceSource().crop(r,s,o,l);return new I(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new I(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new I(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends x{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class F{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(r,s,o,l,u){for(;u--;)o[l++]=r[s++]}static currentTimeMillis(){return Date.now()}}class te extends x{}te.kind="IndexOutOfBoundsException";class O extends te{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class N{static fill(r,s){for(let o=0,l=r.length;o<l;o++)r[o]=s}static fillWithin(r,s,o,l){N.rangeCheck(r.length,s,o);for(let u=s;u<o;u++)r[u]=l}static rangeCheck(r,s,o){if(s>o)throw new E("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new O(s);if(o>r)throw new O(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,l=r.length;o<l;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const l=o-s,u=new Int32Array(l);return B.arraycopy(r,s,u,0,l),u}static binarySearch(r,s,o){o===void 0&&(o=N.numberComparator);let l=0,u=r.length-1;for(;l<=u;){const f=u+l>>1,h=o(s,r[f]);if(h>0)l=f+1;else if(h<0)u=f-1;else return f}return-l-1}static numberComparator(r,s){return r-s}}class b{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=H.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=H.makeArray(r);B.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),u=o[l];u&=~((1<<(r&31))-1);const f=o.length;for(;u===0;){if(++l===f)return s;u=o[l]}const h=l*32+b.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),u=~o[l];u&=~((1<<(r&31))-1);const f=o.length;for(;u===0;){if(++l===f)return s;u=~o[l]}const h=l*32+b.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new E;if(s===r)return;s--;const o=Math.floor(r/32),l=Math.floor(s/32),u=this.bits;for(let f=o;f<=l;f++){const h=f>o?0:r&31,p=(2<<(f<l?31:s&31))-(1<<h);u[f]|=p}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new E;if(s===r)return!0;s--;const l=Math.floor(r/32),u=Math.floor(s/32),f=this.bits;for(let h=l;h<=u;h++){const g=h>l?0:r&31,w=(2<<(h<u?31:s&31))-(1<<g)&4294967295;if((f[h]&w)!==(o?w:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new E("Sizes don't match");const s=this.bits;for(let o=0,l=s.length;o<l;o++)s[o]^=r.bits[o]}toBytes(r,s,o,l){for(let u=0;u<l;u++){let f=0;for(let h=0;h<8;h++)this.get(r)&&(f|=1<<7-h),r++;s[o+u]=f}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,l=this.bits;for(let u=0;u<o;u++){let f=l[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,r[s-u]=f}if(this.size!==o*32){const u=o*32-this.size;let f=r[0]>>>u;for(let h=1;h<o;h++){const g=r[h];f|=g<<32-u,r[h-1]=f,f=g>>>u}r[o-1]=f}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof H))return!1;const s=r;return this.size===s.size&&N.equals(this.bits,s.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new H(this.size,this.bits.slice())}}var ee;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var q=ee;class L extends x{static getFormatInstance(){return new L}}L.kind="FormatException";var Y;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class V{constructor(r,s,o,...l){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=l,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(o,this);const u=this.values;for(let f=0,h=u.length;f!==h;f++){const g=u[f];V.VALUES_TO_ECI.set(g,this)}for(const f of l)V.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new L("incorect value");const s=V.VALUES_TO_ECI.get(r);if(s===void 0)throw new L("incorect value");return s}static getCharacterSetECIByName(r){const s=V.NAME_TO_ECI.get(r);if(s===void 0)throw new L("incorect value");return s}equals(r){if(!(r instanceof V))return!1;const s=r;return this.getName()===s.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(Y.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(Y.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(Y.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(Y.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(Y.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(Y.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(Y.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(Y.Big5,28,"Big5"),V.GB18030=new V(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(Y.EUC_KR,30,"EUC_KR","EUC-KR");class le extends x{}le.kind="UnsupportedOperationException";class Ee{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!Ee.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(Ee.isDecodeFallbackSupported(o)){let l="";for(let u=0,f=r.length;u<f;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(o.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new le(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),l=[];for(let u=0;u<o.length;u++)l.push(o[u].charCodeAt(0));return new Uint8Array(l)}}class re{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return Ee.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(q.CHARACTER_SET)!==void 0)return s.get(q.CHARACTER_SET).toString();const o=r.length;let l=!0,u=!0,f=!0,h=0,g=0,p=0,w=0,C=0,S=0,T=0,R=0,M=0,k=0,z=0;const K=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Z=0;Z<o&&(l||u||f);Z++){const X=r[Z]&255;f&&(h>0?X&128?h--:f=!1:X&128&&(X&64?(h++,X&32?(h++,X&16?(h++,X&8?f=!1:w++):p++):g++):f=!1)),l&&(X>127&&X<160?l=!1:X>159&&(X<192||X===215||X===247)&&z++),u&&(C>0?X<64||X===127||X>252?u=!1:C--:X===128||X===160||X>239?u=!1:X>160&&X<224?(S++,R=0,T++,T>M&&(M=T)):X>127?(C++,T=0,R++,R>k&&(k=R)):(T=0,R=0))}return f&&h>0&&(f=!1),u&&C>0&&(u=!1),f&&(K||g+p+w>0)?re.UTF8:u&&(re.ASSUME_SHIFT_JIS||M>=3||k>=3)?re.SHIFT_JIS:l&&u?M===2&&S===2||z*10>=o?re.SHIFT_JIS:re.ISO88591:l?re.ISO88591:u?re.SHIFT_JIS:f?re.UTF8:re.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function l(f,h,g,p,w,C){if(f==="%%")return"%";if(s[++o]===void 0)return;f=p?parseInt(p.substr(1)):void 0;let S=w?parseInt(w.substr(1)):void 0,T;switch(C){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(S||16);break;case"d":T=parseFloat(parseInt(s[o],S||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let R=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<R;)T=h!==void 0?T+M:M+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,l)}static getBytes(r,s){return Ee.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}re.SHIFT_JIS=V.SJIS.getName(),re.GB2312="GB2312",re.ISO88591=V.ISO8859_1.getName(),re.EUC_JP="EUC_JP",re.UTF8=V.UTF8.getName(),re.PLATFORM_DEFAULT_ENCODING=re.UTF8,re.ASSUME_SHIFT_JIS=!1;class ye{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=re.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let l=s;s<s+o;l++)this.append(r[l]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Be{constructor(r,s,o,l){if(this.width=r,this.height=s,this.rowSize=o,this.bits=l,s==null&&(s=r),this.height=s,r<1||s<1)throw new E("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,l=new Be(o,s);for(let u=0;u<s;u++){const f=r[u];for(let h=0;h<o;h++)f[h]&&l.set(h,u)}return l}static parseFromString(r,s,o){if(r===null)throw new E("stringRepresentation cannot be null");const l=new Array(r.length);let u=0,f=0,h=-1,g=0,p=0;for(;p<r.length;)if(r.charAt(p)===`
`||r.charAt(p)==="\r"){if(u>f){if(h===-1)h=u-f;else if(u-f!==h)throw new E("row lengths do not match");f=u,g++}p++}else if(r.substring(p,p+s.length)===s)p+=s.length,l[u]=!0,u++;else if(r.substring(p,p+o.length)===o)p+=o.length,l[u]=!1,u++;else throw new E("illegal character encountered: "+r.substring(p));if(u>f){if(h===-1)h=u-f;else if(u-f!==h)throw new E("row lengths do not match");g++}const w=new Be(h,g);for(let C=0;C<u;C++)l[C]&&w.set(Math.floor(C%h),Math.floor(C/h));return w}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new E("input matrix dimensions do not match");const s=new H(Math.floor(this.width/32)+1),o=this.rowSize,l=this.bits;for(let u=0,f=this.height;u<f;u++){const h=u*o,g=r.getRow(u,s).getBitArray();for(let p=0;p<o;p++)l[h+p]^=g[p]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,l){if(s<0||r<0)throw new E("Left and top must be nonnegative");if(l<1||o<1)throw new E("Height and width must be at least 1");const u=r+o,f=s+l;if(f>this.height||u>this.width)throw new E("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let p=s;p<f;p++){const w=p*h;for(let C=r;C<u;C++)g[w+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new H(this.width):s.clear();const o=this.rowSize,l=this.bits,u=r*o;for(let f=0;f<o;f++)s.setBulk(f*32,l[u+f]);return s}setRow(r,s){B.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new H(r),l=new H(r);for(let u=0,f=Math.floor((s+1)/2);u<f;u++)o=this.getRow(u,o),l=this.getRow(s-1-u,l),o.reverse(),l.reverse(),this.setRow(u,l),this.setRow(s-1-u,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,l=this.bits;let u=r,f=s,h=-1,g=-1;for(let p=0;p<s;p++)for(let w=0;w<o;w++){const C=l[p*o+w];if(C!==0){if(p<f&&(f=p),p>g&&(g=p),w*32<u){let S=0;for(;!(C<<31-S&4294967295);)S++;w*32+S<u&&(u=w*32+S)}if(w*32+31>h){let S=31;for(;!(C>>>S);)S--;w*32+S>h&&(h=w*32+S)}}}return h<u||g<f?null:Int32Array.from([u,f,h-u+1,g-f+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const l=o/r;let u=o%r*32;const f=s[o];let h=0;for(;!(f<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,l])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const l=Math.floor(o/r);let u=Math.floor(o%r)*32;const f=s[o];let h=31;for(;!(f>>>h);)h--;return u+=h,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Be))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&N.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+N.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let l=new ye;for(let u=0,f=this.height;u<f;u++){for(let h=0,g=this.width;h<g;h++)l.append(this.get(h,u)?r:s);l.append(o)}return l.toString()}clone(){return new Be(this.width,this.height,this.rowSize,this.bits.slice())}}class j extends x{static getNotFoundInstance(){return new j}}j.kind="NotFoundException";class ft extends F{constructor(r){super(r),this.luminances=ft.EMPTY,this.buckets=new Int32Array(ft.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),l=o.getWidth();s==null||s.getSize()<l?s=new H(l):s.clear(),this.initArrays(l);const u=o.getRow(r,this.luminances),f=this.buckets;for(let g=0;g<l;g++)f[(u[g]&255)>>ft.LUMINANCE_SHIFT]++;const h=ft.estimateBlackPoint(f);if(l<3)for(let g=0;g<l;g++)(u[g]&255)<h&&s.set(g);else{let g=u[0]&255,p=u[1]&255;for(let w=1;w<l-1;w++){const C=u[w+1]&255;(p*4-g-C)/2<h&&s.set(w),g=p,p=C}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),l=new Be(s,o);this.initArrays(s);const u=this.buckets;for(let g=1;g<5;g++){const p=Math.floor(o*g/5),w=r.getRow(p,this.luminances),C=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<C;S++){const T=w[S]&255;u[T>>ft.LUMINANCE_SHIFT]++}}const f=ft.estimateBlackPoint(u),h=r.getMatrix();for(let g=0;g<o;g++){const p=g*s;for(let w=0;w<s;w++)(h[p+w]&255)<f&&l.set(w,g)}return l}createBinarizer(r){return new ft(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<ft.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,l=0,u=0;for(let w=0;w<s;w++)r[w]>u&&(l=w,u=r[w]),r[w]>o&&(o=r[w]);let f=0,h=0;for(let w=0;w<s;w++){const C=w-l,S=r[w]*C*C;S>h&&(f=w,h=S)}if(l>f){const w=l;l=f,f=w}if(f-l<=s/16)throw new j;let g=f-1,p=-1;for(let w=f-1;w>l;w--){const C=w-l,S=C*C*(f-w)*(o-r[w]);S>p&&(g=w,p=S)}return g<<ft.LUMINANCE_SHIFT}}ft.LUMINANCE_BITS=5,ft.LUMINANCE_SHIFT=8-ft.LUMINANCE_BITS,ft.LUMINANCE_BUCKETS=1<<ft.LUMINANCE_BITS,ft.EMPTY=Uint8ClampedArray.from([0]);class xe extends ft{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=xe.MINIMUM_DIMENSION&&o>=xe.MINIMUM_DIMENSION){const l=r.getMatrix();let u=s>>xe.BLOCK_SIZE_POWER;s&xe.BLOCK_SIZE_MASK&&u++;let f=o>>xe.BLOCK_SIZE_POWER;o&xe.BLOCK_SIZE_MASK&&f++;const h=xe.calculateBlackPoints(l,u,f,s,o),g=new Be(s,o);xe.calculateThresholdForBlock(l,u,f,s,o,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new xe(r)}static calculateThresholdForBlock(r,s,o,l,u,f,h){const g=u-xe.BLOCK_SIZE,p=l-xe.BLOCK_SIZE;for(let w=0;w<o;w++){let C=w<<xe.BLOCK_SIZE_POWER;C>g&&(C=g);const S=xe.cap(w,2,o-3);for(let T=0;T<s;T++){let R=T<<xe.BLOCK_SIZE_POWER;R>p&&(R=p);const M=xe.cap(T,2,s-3);let k=0;for(let K=-2;K<=2;K++){const Z=f[S+K];k+=Z[M-2]+Z[M-1]+Z[M]+Z[M+1]+Z[M+2]}const z=k/25;xe.thresholdBlock(r,R,C,z,l,h)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,l,u,f){for(let h=0,g=o*u+s;h<xe.BLOCK_SIZE;h++,g+=u)for(let p=0;p<xe.BLOCK_SIZE;p++)(r[g+p]&255)<=l&&f.set(s+p,o+h)}static calculateBlackPoints(r,s,o,l,u){const f=u-xe.BLOCK_SIZE,h=l-xe.BLOCK_SIZE,g=new Array(o);for(let p=0;p<o;p++){g[p]=new Int32Array(s);let w=p<<xe.BLOCK_SIZE_POWER;w>f&&(w=f);for(let C=0;C<s;C++){let S=C<<xe.BLOCK_SIZE_POWER;S>h&&(S=h);let T=0,R=255,M=0;for(let z=0,K=w*l+S;z<xe.BLOCK_SIZE;z++,K+=l){for(let Z=0;Z<xe.BLOCK_SIZE;Z++){const X=r[K+Z]&255;T+=X,X<R&&(R=X),X>M&&(M=X)}if(M-R>xe.MIN_DYNAMIC_RANGE)for(z++,K+=l;z<xe.BLOCK_SIZE;z++,K+=l)for(let Z=0;Z<xe.BLOCK_SIZE;Z++)T+=r[K+Z]&255}let k=T>>xe.BLOCK_SIZE_POWER*2;if(M-R<=xe.MIN_DYNAMIC_RANGE&&(k=R/2,p>0&&C>0)){const z=(g[p-1][C]+2*g[p][C-1]+g[p-1][C-1])/4;R<z&&(k=z)}g[p][C]=k}}return g}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class ne{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,l){throw new le("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new le("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new le("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ye;for(let o=0;o<this.height;o++){const l=this.getRow(o,r);for(let u=0;u<this.width;u++){const f=l[u]&255;let h;f<64?h="#":f<128?h="+":f<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class de extends ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),l=this.getWidth();for(let u=0;u<l;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let l=0;l<s;l++)o[l]=255-(r[l]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,l){return new de(this.delegate.crop(r,s,o,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class me extends ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=me.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return me.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const l=new Uint8ClampedArray(s*o);for(let u=0,f=0,h=r.length;u<h;u+=4,f++){let g;if(r[u+3]===0)g=255;else{const w=r[u],C=r[u+1],S=r[u+2];g=306*w+601*C+117*S+512>>10}l[f]=g}return l}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth(),l=r*o;return s===null?s=this.buffer.slice(l,l+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(l,l+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,l){return super.crop(r,s,o,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),l=r*me.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*f),g=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*f);return s.width=h,s.height=g,o.translate(h/2,g/2),o.rotate(l),o.drawImage(this.canvas,u/-2,f/-2),this.buffer=me.makeBufferFromCanvasImageData(s),this}invert(){return new de(this)}}me.DEGREE_TO_RADIANS=Math.PI/180;class rt{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||ro||self||window||void 0)&&(globalThis||ro||self||window||void 0).__awaiter||function(_,r,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function h(w){try{p(o.next(w))}catch(C){f(C)}}function g(w){try{p(o.throw(w))}catch(C){f(C)}}function p(w){w.done?u(w.value):l(w.value).then(h,g)}p((o=o.apply(_,r||[])).next())})};class bn{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const l=o.kind==="video"?"videoinput":o.kind;if(l!=="videoinput")continue;const u=o.deviceId||o.id,f=o.label||`Video device ${s.length+1}`,h=o.groupId,g={deviceId:u,label:f,kind:l,groupId:h};s.push(g)}return s})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new rt(s.deviceId,s.label))})}findDeviceById(r){return be(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return be(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeOnceFromConstraints(l,s)})}decodeOnceFromConstraints(r,s){return be(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return be(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return be(this,void 0,void 0,function*(){let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(r,s,o){return be(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(l,s,o)})}decodeFromStream(r,s,o){return be(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(l,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return be(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new A(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new A(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new A("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new A("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new A("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new A("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new A("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new A("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new A("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(o,s);return o.src=r,l}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const l=(u,f)=>{if(this._stopAsyncDecode){f(new j("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const g=s&&h instanceof j,w=(h instanceof D||h instanceof L)&&o;if(g||w)return setTimeout(l,this._timeBetweenDecodingAttempts,u,f);f(h)}};return new Promise((u,f)=>l(u,f))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(r);s(l,null),setTimeout(o,this.timeBetweenScansMillis)}catch(l){s(null,l);const u=l instanceof D||l instanceof L,f=l instanceof j;(u||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new me(s),l=new xe(o);return new I(l)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,l;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,l=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,l=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=l+"px",s.width=o,s.height=l,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ot{constructor(r,s,o=s==null?0:8*s.length,l,u,f=B.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=l,this.format=u,this.timestamp=f,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=l,this.format=u,this.resultMetadata=null,f==null?this.timestamp=B.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);B.arraycopy(s,0,o,0,s.length),B.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var pi;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(pi||(pi={}));var ce=pi,Dr;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Dr||(Dr={}));var Nt=Dr;class Gs{constructor(r,s,o,l,u=-1,f=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ys{exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class rn{constructor(r,s){if(s.length===0)throw new E;this.field=r;const o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-l),B.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let f=0,h=s.length;f!==h;f++){const g=s[f];o=Ys.addOrSubtract(o,g)}return o}o=s[0];const l=s.length,u=this.field;for(let f=1;f<l;f++)o=Ys.addOrSubtract(u.multiply(r,o),s[f]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const f=s;s=o,o=f}let l=new Int32Array(o.length);const u=o.length-s.length;B.arraycopy(o,0,l,0,u);for(let f=u;f<o.length;f++)l[f]=Ys.addOrSubtract(s[f-u],o[f]);return new rn(this.field,l)}multiply(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,l=r.coefficients,u=l.length,f=new Int32Array(o+u-1),h=this.field;for(let g=0;g<o;g++){const p=s[g];for(let w=0;w<u;w++)f[g+w]=Ys.addOrSubtract(f[g+w],h.multiply(p,l[w]))}return new rn(h,f)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,l=new Int32Array(s),u=this.coefficients;for(let f=0;f<s;f++)l[f]=o.multiply(u[f],r);return new rn(o,l)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return this.field.getZero();const o=this.coefficients,l=o.length,u=new Int32Array(l+r),f=this.field;for(let h=0;h<l;h++)u[h]=f.multiply(o[h],s);return new rn(f,u)}divide(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new E("Divide by 0");const s=this.field;let o=s.getZero(),l=this;const u=r.getCoefficient(r.getDegree()),f=s.inverse(u);for(;l.getDegree()>=r.getDegree()&&!l.isZero();){const h=l.getDegree()-r.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),f),p=r.multiplyByMonomial(h,g),w=s.buildMonomial(h,g);o=o.addOrSubtract(w),l=l.addOrSubtract(p)}return[o,l]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const l=this.field.log(o);l===0?r+="1":l===1?r+="a":(r+="a^",r+=l)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class wa extends x{}wa.kind="ArithmeticException";class De extends Ys{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const l=new Int32Array(s);let u=1;for(let h=0;h<s;h++)l[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=l;const f=new Int32Array(s);for(let h=0;h<s-1;h++)f[l[h]]=h;this.logTable=f,this.zero=new rn(this,Int32Array.from([0])),this.one=new rn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new rn(this,o)}inverse(r){if(r===0)throw new wa;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}De.AZTEC_DATA_12=new De(4201,4096,1),De.AZTEC_DATA_10=new De(1033,1024,1),De.AZTEC_DATA_6=new De(67,64,1),De.AZTEC_PARAM=new De(19,16,1),De.QR_CODE_FIELD_256=new De(285,256,0),De.DATA_MATRIX_FIELD_256=new De(301,256,1),De.AZTEC_DATA_8=De.DATA_MATRIX_FIELD_256,De.MAXICODE_FIELD_64=De.AZTEC_DATA_6;class Gi extends x{}Gi.kind="ReedSolomonException";class tr extends x{}tr.kind="IllegalStateException";class Xs{constructor(r){this.field=r}decode(r,s){const o=this.field,l=new rn(o,r),u=new Int32Array(s);let f=!0;for(let T=0;T<s;T++){const R=l.evaluateAt(o.exp(T+o.getGeneratorBase()));u[u.length-1-T]=R,R!==0&&(f=!1)}if(f)return;const h=new rn(o,u),g=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),p=g[0],w=g[1],C=this.findErrorLocations(p),S=this.findErrorMagnitudes(w,C);for(let T=0;T<C.length;T++){const R=r.length-1-o.log(C[T]);if(R<0)throw new Gi("Bad error location");r[R]=De.addOrSubtract(r[R],S[T])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const T=r;r=s,s=T}const l=this.field;let u=r,f=s,h=l.getZero(),g=l.getOne();for(;f.getDegree()>=(o/2|0);){let T=u,R=h;if(u=f,h=g,u.isZero())throw new Gi("r_{i-1} was zero");f=T;let M=l.getZero();const k=u.getCoefficient(u.getDegree()),z=l.inverse(k);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const K=f.getDegree()-u.getDegree(),Z=l.multiply(f.getCoefficient(f.getDegree()),z);M=M.addOrSubtract(l.buildMonomial(K,Z)),f=f.addOrSubtract(u.multiplyByMonomial(K,Z))}if(g=M.multiply(h).addOrSubtract(R),f.getDegree()>=u.getDegree())throw new tr("Division algorithm failed to reduce polynomial?")}const p=g.getCoefficient(0);if(p===0)throw new Gi("sigmaTilde(0) was zero");const w=l.inverse(p),C=g.multiplyScalar(w),S=f.multiplyScalar(w);return[C,S]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let l=0;const u=this.field;for(let f=1;f<u.getSize()&&l<s;f++)r.evaluateAt(f)===0&&(o[l]=u.inverse(f),l++);if(l!==s)throw new Gi("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,l=new Int32Array(o),u=this.field;for(let f=0;f<o;f++){const h=u.inverse(s[f]);let g=1;for(let p=0;p<o;p++)if(f!==p){const w=u.multiply(s[p],h),C=w&1?w&-2:w|1;g=u.multiply(g,C)}l[f]=u.multiply(r.evaluateAt(h),u.inverse(g)),u.getGeneratorBase()!==0&&(l[f]=u.multiply(l[f],h))}return l}}var Pt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Pt||(Pt={}));class Ye{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),l=this.correctBits(o),u=Ye.convertBoolArrayToByteArray(l),f=Ye.getEncodedData(l),h=new Gs(u,f,null,null);return h.setNumBits(l.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=Pt.UPPER,l=Pt.UPPER,u="",f=0;for(;f<s;)if(l===Pt.BINARY){if(s-f<5)break;let h=Ye.readCode(r,f,5);if(f+=5,h===0){if(s-f<11)break;h=Ye.readCode(r,f,11)+31,f+=11}for(let g=0;g<h;g++){if(s-f<8){f=s;break}const p=Ye.readCode(r,f,8);u+=re.castAsNonUtf8Char(p),f+=8}l=o}else{let h=l===Pt.DIGIT?4:5;if(s-f<h)break;let g=Ye.readCode(r,f,h);f+=h;let p=Ye.getCharacter(l,g);p.startsWith("CTRL_")?(o=l,l=Ye.getTable(p.charAt(5)),p.charAt(6)==="L"&&(o=l)):(u+=p,l=o)}return u}static getTable(r){switch(r){case"L":return Pt.LOWER;case"P":return Pt.PUNCT;case"M":return Pt.MIXED;case"D":return Pt.DIGIT;case"B":return Pt.BINARY;case"U":default:return Pt.UPPER}}static getCharacter(r,s){switch(r){case Pt.UPPER:return Ye.UPPER_TABLE[s];case Pt.LOWER:return Ye.LOWER_TABLE[s];case Pt.MIXED:return Ye.MIXED_TABLE[s];case Pt.PUNCT:return Ye.PUNCT_TABLE[s];case Pt.DIGIT:return Ye.DIGIT_TABLE[s];default:throw new tr("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=De.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=De.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=De.AZTEC_DATA_10):(o=12,s=De.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),u=r.length/o;if(u<l)throw new L;let f=r.length%o,h=new Int32Array(u);for(let S=0;S<u;S++,f+=o)h[S]=Ye.readCode(r,f,o);try{new Xs(s).decode(h,u-l)}catch(S){throw new L(S)}let g=(1<<o)-1,p=0;for(let S=0;S<l;S++){let T=h[S];if(T===0||T===g)throw new L;(T===1||T===g-1)&&p++}let w=new Array(l*o-p),C=0;for(let S=0;S<l;S++){let T=h[S];if(T===1||T===g-1)w.fill(T>1,C,C+o-1),C+=o-1;else for(let R=o-1;R>=0;--R)w[C++]=(T&1<<R)!==0}return w}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),l=(s?11:14)+o*4,u=new Int32Array(l),f=new Array(this.totalBitsInLayer(o,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=l+1+2*b.truncDivision(b.truncDivision(l,2)-1,15),g=l/2,p=b.truncDivision(h,2);for(let w=0;w<g;w++){let C=w+b.truncDivision(w,15);u[g-w-1]=p-C-1,u[g+w]=p+C+1}}for(let h=0,g=0;h<o;h++){let p=(o-h)*4+(s?9:12),w=h*2,C=l-1-w;for(let S=0;S<p;S++){let T=S*2;for(let R=0;R<2;R++)f[g+T+R]=r.get(u[w+R],u[w+S]),f[g+2*p+T+R]=r.get(u[w+S],u[C-R]),f[g+4*p+T+R]=r.get(u[C-R],u[C-S]),f[g+6*p+T+R]=r.get(u[C-S],u[w+R])}g+=p*8}return f}static readCode(r,s,o){let l=0;for(let u=s;u<s+o;u++)l<<=1,r[u]&&(l|=1);return l}static readByte(r,s){let o=r.length-s;return o>=8?Ye.readCode(r,s,8):Ye.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=Ye.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ye.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ye.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ye.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Re{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,l){const u=r-o,f=s-l;return Math.sqrt(u*u+f*f)}static sum(r){let s=0;for(let o=0,l=r.length;o!==l;o++){const u=r[o];s+=u}return s}}class _a{static floatToIntBits(r){return r}}_a.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ae){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*_a.floatToIntBits(this.x)+_a.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),l=this.distance(r[0],r[2]);let u,f,h;if(o>=s&&o>=l?(f=r[0],u=r[1],h=r[2]):l>=o&&l>=s?(f=r[1],u=r[0],h=r[2]):(f=r[2],u=r[0],h=r[1]),this.crossProductZ(u,f,h)<0){const g=u;u=h,h=g}r[0]=u,r[1]=f,r[2]=h}static distance(r,s){return Re.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const l=s.x,u=s.y;return(o.x-l)*(r.y-u)-(o.y-u)*(r.x-l)}}class Ca{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ad extends Ca{constructor(r,s,o,l,u){super(r,s),this.compact=o,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gr{constructor(r,s,o,l){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=gr.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),l==null&&(l=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=l-u,this.downInit=l+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,l=this.downInit,u=!1,f=!0,h=!1,g=!1,p=!1,w=!1,C=!1;const S=this.width,T=this.height;for(;f;){f=!1;let R=!0;for(;(R||!g)&&s<S;)R=this.containsBlackPoint(o,l,s,!1),R?(s++,f=!0,g=!0):g||s++;if(s>=S){u=!0;break}let M=!0;for(;(M||!p)&&l<T;)M=this.containsBlackPoint(r,s,l,!0),M?(l++,f=!0,p=!0):p||l++;if(l>=T){u=!0;break}let k=!0;for(;(k||!w)&&r>=0;)k=this.containsBlackPoint(o,l,r,!1),k?(r--,f=!0,w=!0):w||r--;if(r<0){u=!0;break}let z=!0;for(;(z||!C)&&o>=0;)z=this.containsBlackPoint(r,s,o,!0),z?(o--,f=!0,C=!0):C||o--;if(o<0){u=!0;break}f&&(h=!0)}if(!u&&h){const R=s-r;let M=null;for(let Z=1;M===null&&Z<R;Z++)M=this.getBlackPointOnSegment(r,l-Z,r+Z,l);if(M==null)throw new j;let k=null;for(let Z=1;k===null&&Z<R;Z++)k=this.getBlackPointOnSegment(r,o+Z,r+Z,o);if(k==null)throw new j;let z=null;for(let Z=1;z===null&&Z<R;Z++)z=this.getBlackPointOnSegment(s,o+Z,s-Z,o);if(z==null)throw new j;let K=null;for(let Z=1;K===null&&Z<R;Z++)K=this.getBlackPointOnSegment(s,l-Z,s-Z,l);if(K==null)throw new j;return this.centerEdges(K,M,z,k)}else throw new j}getBlackPointOnSegment(r,s,o,l){const u=Re.round(Re.distance(r,s,o,l)),f=(o-r)/u,h=(l-s)/u,g=this.image;for(let p=0;p<u;p++){const w=Re.round(r+p*f),C=Re.round(s+p*h);if(g.get(w,C))return new ae(w,C)}return null}centerEdges(r,s,o,l){const u=r.getX(),f=r.getY(),h=s.getX(),g=s.getY(),p=o.getX(),w=o.getY(),C=l.getX(),S=l.getY(),T=gr.CORR;return u<this.width/2?[new ae(C-T,S+T),new ae(h+T,g+T),new ae(p-T,w-T),new ae(u+T,f-T)]:[new ae(C+T,S+T),new ae(h+T,g-T),new ae(p-T,w+T),new ae(u-T,f-T)]}containsBlackPoint(r,s,o,l){const u=this.image;if(l){for(let f=r;f<=s;f++)if(u.get(f,o))return!0}else for(let f=r;f<=s;f++)if(u.get(o,f))return!0;return!1}}gr.INIT_SIZE=10,gr.CORR=1;class Ic{static checkAndNudgePoints(r,s){const o=r.getWidth(),l=r.getHeight();let u=!0;for(let f=0;f<s.length&&u;f+=2){const h=Math.floor(s[f]),g=Math.floor(s[f+1]);if(h<-1||h>o||g<-1||g>l)throw new j;u=!1,h===-1?(s[f]=0,u=!0):h===o&&(s[f]=o-1,u=!0),g===-1?(s[f+1]=0,u=!0):g===l&&(s[f+1]=l-1,u=!0)}u=!0;for(let f=s.length-2;f>=0&&u;f-=2){const h=Math.floor(s[f]),g=Math.floor(s[f+1]);if(h<-1||h>o||g<-1||g>l)throw new j;u=!1,h===-1?(s[f]=0,u=!0):h===o&&(s[f]=o-1,u=!0),g===-1?(s[f+1]=0,u=!0):g===l&&(s[f+1]=l-1,u=!0)}}}class zn{constructor(r,s,o,l,u,f,h,g,p){this.a11=r,this.a21=s,this.a31=o,this.a12=l,this.a22=u,this.a32=f,this.a13=h,this.a23=g,this.a33=p}static quadrilateralToQuadrilateral(r,s,o,l,u,f,h,g,p,w,C,S,T,R,M,k){const z=zn.quadrilateralToSquare(r,s,o,l,u,f,h,g);return zn.squareToQuadrilateral(p,w,C,S,T,R,M,k).times(z)}transformPoints(r){const s=r.length,o=this.a11,l=this.a12,u=this.a13,f=this.a21,h=this.a22,g=this.a23,p=this.a31,w=this.a32,C=this.a33;for(let S=0;S<s;S+=2){const T=r[S],R=r[S+1],M=u*T+g*R+C;r[S]=(o*T+f*R+p)/M,r[S+1]=(l*T+h*R+w)/M}}transformPointsWithValues(r,s){const o=this.a11,l=this.a12,u=this.a13,f=this.a21,h=this.a22,g=this.a23,p=this.a31,w=this.a32,C=this.a33,S=r.length;for(let T=0;T<S;T++){const R=r[T],M=s[T],k=u*R+g*M+C;r[T]=(o*R+f*M+p)/k,s[T]=(l*R+h*M+w)/k}}static squareToQuadrilateral(r,s,o,l,u,f,h,g){const p=r-o+u-h,w=s-l+f-g;if(p===0&&w===0)return new zn(o-r,u-o,r,l-s,f-l,s,0,0,1);{const C=o-u,S=h-u,T=l-f,R=g-f,M=C*R-S*T,k=(p*R-S*w)/M,z=(C*w-p*T)/M;return new zn(o-r+k*o,h-r+z*h,r,l-s+k*l,g-s+z*g,s,k,z,1)}}static quadrilateralToSquare(r,s,o,l,u,f,h,g){return zn.squareToQuadrilateral(r,s,o,l,u,f,h,g).buildAdjoint()}buildAdjoint(){return new zn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new zn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Sd extends Ic{sampleGrid(r,s,o,l,u,f,h,g,p,w,C,S,T,R,M,k,z,K,Z){const X=zn.quadrilateralToQuadrilateral(l,u,f,h,g,p,w,C,S,T,R,M,k,z,K,Z);return this.sampleGridWithTransform(r,s,o,X)}sampleGridWithTransform(r,s,o,l){if(s<=0||o<=0)throw new j;const u=new Be(s,o),f=new Float32Array(2*s);for(let h=0;h<o;h++){const g=f.length,p=h+.5;for(let w=0;w<g;w+=2)f[w]=w/2+.5,f[w+1]=p;l.transformPoints(f),Ic.checkAndNudgePoints(r,f);try{for(let w=0;w<g;w+=2)r.get(Math.floor(f[w]),Math.floor(f[w+1]))&&u.set(w/2,h)}catch{throw new j}}return u}}class kr{static setGridSampler(r){kr.gridSampler=r}static getInstance(){return kr.gridSampler}}kr.gridSampler=new Sd;class qt{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Id{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let l=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new Ad(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new j;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let l=0;for(let f=0;f<4;f++){let h=o[(this.shift+f)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let o=0;r.forEach((l,u,f)=>{let h=(l>>s-2<<1)+(l&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let l=0;l<4;l++)if(b.bitCount(o^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new j}getCorrectedParameterData(r,s){let o,l;s?(o=7,l=2):(o=10,l=4);let u=o-l,f=new Int32Array(o);for(let g=o-1;g>=0;--g)f[g]=r&15,r>>=4;try{new Xs(De.AZTEC_PARAM).decode(f,u)}catch{throw new j}let h=0;for(let g=0;g<l;g++)h=(h<<4)+f[g];return h}getBullsEyeCorners(r){let s=r,o=r,l=r,u=r,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(s,f,1,-1),S=this.getFirstDifferent(o,f,1,1),T=this.getFirstDifferent(l,f,-1,1),R=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(R,C)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(C,S,T,R))break}s=C,o=S,l=T,u=R,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;let h=new ae(s.getX()+.5,s.getY()-.5),g=new ae(o.getX()+.5,o.getY()+.5),p=new ae(l.getX()-.5,l.getY()+.5),w=new ae(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,g,p,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,l;try{let h=new gr(this.image).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{let g=this.image.getWidth()/2,p=this.image.getHeight()/2;r=this.getFirstDifferent(new qt(g+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new qt(g+7,p+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new qt(g-7,p+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new qt(g-7,p-7),!1,-1,-1).toResultPoint()}let u=Re.round((r.getX()+l.getX()+s.getX()+o.getX())/4),f=Re.round((r.getY()+l.getY()+s.getY()+o.getY())/4);try{let h=new gr(this.image,15,u,f).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{r=this.getFirstDifferent(new qt(u+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new qt(u+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new qt(u-7,f+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new qt(u-7,f-7),!1,-1,-1).toResultPoint()}return u=Re.round((r.getX()+l.getX()+s.getX()+o.getX())/4),f=Re.round((r.getY()+l.getY()+s.getY()+o.getY())/4),new qt(u,f)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,l,u){let f=kr.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,p=h/2+this.nbCenterLayers;return f.sampleGrid(r,h,h,g,g,p,g,p,p,g,p,s.getX(),s.getY(),o.getX(),o.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(r,s,o){let l=0,u=this.distanceResultPoint(r,s),f=u/o,h=r.getX(),g=r.getY(),p=f*(s.getX()-r.getX())/u,w=f*(s.getY()-r.getY())/u;for(let C=0;C<o;C++)this.image.get(Re.round(h+C*p),Re.round(g+C*w))&&(l|=1<<o-C-1);return l}isWhiteOrBlackRectangle(r,s,o,l){let u=3;r=new qt(r.getX()-u,r.getY()+u),s=new qt(s.getX()-u,s.getY()-u),o=new qt(o.getX()+u,o.getY()-u),l=new qt(l.getX()+u,l.getY()+u);let f=this.getColor(l,r);if(f===0)return!1;let h=this.getColor(r,s);return h!==f||(h=this.getColor(s,o),h!==f)?!1:(h=this.getColor(o,l),h===f)}getColor(r,s){let o=this.distancePoint(r,s),l=(s.getX()-r.getX())/o,u=(s.getY()-r.getY())/o,f=0,h=r.getX(),g=r.getY(),p=this.image.get(r.getX(),r.getY()),w=Math.ceil(o);for(let S=0;S<w;S++)h+=l,g+=u,this.image.get(Re.round(h),Re.round(g))!==p&&f++;let C=f/o;return C>.1&&C<.9?0:C<=.1===p?1:-1}getFirstDifferent(r,s,o,l){let u=r.getX()+o,f=r.getY()+l;for(;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o,f+=l;for(u-=o,f-=l;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o;for(u-=o;this.isValid(u,f)&&this.image.get(u,f)===s;)f+=l;return f-=l,new qt(u,f)}expandSquare(r,s,o){let l=o/(2*s),u=r[0].getX()-r[2].getX(),f=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,g=(r[0].getY()+r[2].getY())/2,p=new ae(h+l*u,g+l*f),w=new ae(h-l*u,g-l*f);u=r[1].getX()-r[3].getX(),f=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,g=(r[1].getY()+r[3].getY())/2;let C=new ae(h+l*u,g+l*f),S=new ae(h-l*u,g-l*f);return[p,C,w,S]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Re.round(r.getX()),o=Re.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return Re.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Re.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class Ea{decode(r,s=null){let o=null,l=new Id(r.getBlackMatrix()),u=null,f=null;try{let w=l.detectMirror(!1);u=w.getPoints(),this.reportFoundResultPoints(s,u),f=new Ye().decode(w)}catch(w){o=w}if(f==null)try{let w=l.detectMirror(!0);u=w.getPoints(),this.reportFoundResultPoints(s,u),f=new Ye().decode(w)}catch(w){throw o??w}let h=new ot(f.getText(),f.getRawBytes(),f.getNumBits(),u,ce.AZTEC,B.currentTimeMillis()),g=f.getByteSegments();g!=null&&h.putMetadata(Nt.BYTE_SEGMENTS,g);let p=f.getECLevel();return p!=null&&h.putMetadata(Nt.ERROR_CORRECTION_LEVEL,p),h}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(q.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((l,u,f)=>{o.foundPossibleResultPoint(l)})}}reset(){}}class sx extends bn{constructor(r=500){super(new Ea,r)}}class _t{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(q.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),f=this.doDecode(u,s),h=f.getResultMetadata();let g=270;h!==null&&h.get(Nt.ORIENTATION)===!0&&(g=g+h.get(Nt.ORIENTATION)%360),f.putMetadata(Nt.ORIENTATION,g);const p=f.getResultPoints();if(p!==null){const w=u.getHeight();for(let C=0;C<p.length;C++)p[C]=new ae(w-p[C].getY()-1,p[C].getX())}return f}else throw new j}}reset(){}doDecode(r,s){const o=r.getWidth(),l=r.getHeight();let u=new H(o);const f=s&&s.get(q.TRY_HARDER)===!0,h=Math.max(1,l>>(f?8:5));let g;f?g=l:g=15;const p=Math.trunc(l/2);for(let w=0;w<g;w++){const C=Math.trunc((w+1)/2),S=(w&1)===0,T=p+h*(S?C:-C);if(T<0||T>=l)break;try{u=r.getBlackRow(T,u)}catch{continue}for(let R=0;R<2;R++){if(R===1&&(u.reverse(),s&&s.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const M=new Map;s.forEach((k,z)=>M.set(z,k)),M.delete(q.NEED_RESULT_POINT_CALLBACK),s=M}try{const M=this.decodeRow(T,u,s);if(R===1){M.putMetadata(Nt.ORIENTATION,180);const k=M.getResultPoints();k!==null&&(k[0]=new ae(o-k[0].getX()-1,k[0].getY()),k[1]=new ae(o-k[1].getX()-1,k[1].getY()))}return M}catch{}}}throw new j}static recordPattern(r,s,o){const l=o.length;for(let p=0;p<l;p++)o[p]=0;const u=r.getSize();if(s>=u)throw new j;let f=!r.get(s),h=0,g=s;for(;g<u;){if(r.get(g)!==f)o[h]++;else{if(++h===l)break;o[h]=1,f=!f}g++}if(!(h===l||h===l-1&&g===u))throw new j}static recordPatternInReverse(r,s,o){let l=o.length,u=r.get(s);for(;s>0&&l>=0;)r.get(--s)!==u&&(l--,u=!u);if(l>=0)throw new j;_t.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const l=r.length;let u=0,f=0;for(let p=0;p<l;p++)u+=r[p],f+=s[p];if(u<f)return Number.POSITIVE_INFINITY;const h=u/f;o*=h;let g=0;for(let p=0;p<l;p++){const w=r[p],C=s[p]*h,S=w>C?w-C:C-w;if(S>o)return Number.POSITIVE_INFINITY;g+=S}return g/u}}class J extends _t{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),f=o,h=!1;const g=6;for(let p=o;p<s;p++)if(r.get(p)!==h)u[l]++;else{if(l===g-1){let w=J.MAX_AVG_VARIANCE,C=-1;for(let S=J.CODE_START_A;S<=J.CODE_START_C;S++){const T=_t.patternMatchVariance(u,J.CODE_PATTERNS[S],J.MAX_INDIVIDUAL_VARIANCE);T<w&&(w=T,C=S)}if(C>=0&&r.isRange(Math.max(0,f-(p-f)/2),f,!1))return Int32Array.from([f,p,C]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,h=!h}throw new j}static decodeCode(r,s,o){_t.recordPattern(r,o,s);let l=J.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<J.CODE_PATTERNS.length;f++){const h=J.CODE_PATTERNS[f],g=this.patternMatchVariance(s,h,J.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,u=f)}if(u>=0)return u;throw new j}decodeRow(r,s,o){const l=o&&o.get(q.ASSUME_GS1)===!0,u=J.findStartPattern(s),f=u[2];let h=0;const g=new Uint8Array(20);g[h++]=f;let p;switch(f){case J.CODE_START_A:p=J.CODE_CODE_A;break;case J.CODE_START_B:p=J.CODE_CODE_B;break;case J.CODE_START_C:p=J.CODE_CODE_C;break;default:throw new L}let w=!1,C=!1,S="",T=u[0],R=u[1];const M=Int32Array.from([0,0,0,0,0,0]);let k=0,z=0,K=f,Z=0,X=!0,Te=!1,we=!1;for(;!w;){const es=C;switch(C=!1,k=z,z=J.decodeCode(s,M,R),g[h++]=z,z!==J.CODE_STOP&&(X=!0),z!==J.CODE_STOP&&(Z++,K+=Z*z),T=R,R+=M.reduce((kx,Lx)=>kx+Lx,0),z){case J.CODE_START_A:case J.CODE_START_B:case J.CODE_START_C:throw new L}switch(p){case J.CODE_CODE_A:if(z<64)we===Te?S+=String.fromCharCode(32+z):S+=String.fromCharCode(32+z+128),we=!1;else if(z<96)we===Te?S+=String.fromCharCode(z-64):S+=String.fromCharCode(z+64),we=!1;else switch(z!==J.CODE_STOP&&(X=!1),z){case J.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case J.CODE_FNC_2:case J.CODE_FNC_3:break;case J.CODE_FNC_4_A:!Te&&we?(Te=!0,we=!1):Te&&we?(Te=!1,we=!1):we=!0;break;case J.CODE_SHIFT:C=!0,p=J.CODE_CODE_B;break;case J.CODE_CODE_B:p=J.CODE_CODE_B;break;case J.CODE_CODE_C:p=J.CODE_CODE_C;break;case J.CODE_STOP:w=!0;break}break;case J.CODE_CODE_B:if(z<96)we===Te?S+=String.fromCharCode(32+z):S+=String.fromCharCode(32+z+128),we=!1;else switch(z!==J.CODE_STOP&&(X=!1),z){case J.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case J.CODE_FNC_2:case J.CODE_FNC_3:break;case J.CODE_FNC_4_B:!Te&&we?(Te=!0,we=!1):Te&&we?(Te=!1,we=!1):we=!0;break;case J.CODE_SHIFT:C=!0,p=J.CODE_CODE_A;break;case J.CODE_CODE_A:p=J.CODE_CODE_A;break;case J.CODE_CODE_C:p=J.CODE_CODE_C;break;case J.CODE_STOP:w=!0;break}break;case J.CODE_CODE_C:if(z<100)z<10&&(S+="0"),S+=z;else switch(z!==J.CODE_STOP&&(X=!1),z){case J.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case J.CODE_CODE_A:p=J.CODE_CODE_A;break;case J.CODE_CODE_B:p=J.CODE_CODE_B;break;case J.CODE_STOP:w=!0;break}break}es&&(p=p===J.CODE_CODE_A?J.CODE_CODE_B:J.CODE_CODE_A)}const ln=R-T;if(R=s.getNextUnset(R),!s.isRange(R,Math.min(s.getSize(),R+(R-T)/2),!1))throw new j;if(K-=Z*k,K%103!==k)throw new D;const Hn=S.length;if(Hn===0)throw new j;Hn>0&&X&&(p===J.CODE_CODE_C?S=S.substring(0,Hn-2):S=S.substring(0,Hn-1));const cn=(u[1]+u[0])/2,We=T+ln/2,Ut=g.length,wn=new Uint8Array(Ut);for(let es=0;es<Ut;es++)wn[es]=g[es];const Ji=[new ae(cn,r),new ae(We,r)];return new ot(S,wn,0,Ji,ce.CODE_128,new Date().getTime())}}J.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],J.MAX_AVG_VARIANCE=.25,J.MAX_INDIVIDUAL_VARIANCE=.7,J.CODE_SHIFT=98,J.CODE_CODE_C=99,J.CODE_CODE_B=100,J.CODE_CODE_A=101,J.CODE_FNC_1=102,J.CODE_FNC_2=97,J.CODE_FNC_3=96,J.CODE_FNC_4_A=101,J.CODE_FNC_4_B=100,J.CODE_START_A=103,J.CODE_START_B=104,J.CODE_START_C=105,J.CODE_STOP=106;class Et extends _t{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let l=this.counters;l.fill(0),this.decodeRowResult="";let u=Et.findAsteriskPattern(s,l),f=s.getNextSet(u[1]),h=s.getSize(),g,p;do{Et.recordPattern(s,f,l);let M=Et.toNarrowWidePattern(l);if(M<0)throw new j;g=Et.patternToChar(M),this.decodeRowResult+=g,p=f;for(let k of l)f+=k;f=s.getNextSet(f)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let M of l)w+=M;let C=f-p-w;if(f!==h&&C*2<w)throw new j;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,k=0;for(let z=0;z<M;z++)k+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(M)!==Et.ALPHABET_STRING.charAt(k%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new j;let S;this.extendedMode?S=Et.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let T=(u[1]+u[0])/2,R=p+w/2;return new ot(S,null,0,[new ae(T,r),new ae(R,r)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),l=r.getNextSet(0),u=0,f=l,h=!1,g=s.length;for(let p=l;p<o;p++)if(r.get(p)!==h)s[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(s)===Et.ASTERISK_ENCODING&&r.isRange(Math.max(0,f-Math.floor((p-f)/2)),f,!1))return[f,p];f+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new j}static toNarrowWidePattern(r){let s=r.length,o=0,l;do{let u=2147483647;for(let g of r)g<u&&g>o&&(u=g);o=u,l=0;let f=0,h=0;for(let g=0;g<s;g++){let p=r[g];p>o&&(h|=1<<s-1-g,l++,f+=p)}if(l===3){for(let g=0;g<s&&l>0;g++){let p=r[g];if(p>o&&(l--,p*2>=f))return-1}return h}}while(l>3);return-1}static patternToChar(r){for(let s=0;s<Et.CHARACTER_ENCODINGS.length;s++)if(Et.CHARACTER_ENCODINGS[s]===r)return Et.ALPHABET_STRING.charAt(s);if(r===Et.ASTERISK_ENCODING)return"*";throw new j}static decodeExtended(r){let s=r.length,o="";for(let l=0;l<s;l++){let u=r.charAt(l);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=r.charAt(l+1),h="\0";switch(u){case"+":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)+32);else throw new L;break;case"$":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)-64);else throw new L;break;case"%":if(f>="A"&&f<="E")h=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")h=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")h=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")h="\0";else if(f==="V")h="@";else if(f==="W")h="`";else if(f==="X"||f==="Y"||f==="Z")h="";else throw new L;break;case"/":if(f>="A"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")h=":";else throw new L;break}o+=h,l++}else o+=u}return o}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class He extends _t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let l=this.decodeStart(s),u=this.decodeEnd(s),f=new ye;He.decodeMiddle(s,l[1],u[0],f);let h=f.toString(),g=null;o!=null&&(g=o.get(q.ALLOWED_LENGTHS)),g==null&&(g=He.DEFAULT_ALLOWED_LENGTHS);let p=h.length,w=!1,C=0;for(let R of g){if(p===R){w=!0;break}R>C&&(C=R)}if(!w&&p>C&&(w=!0),!w)throw new L;const S=[new ae(l[1],r),new ae(u[0],r)];return new ot(h,null,0,S,ce.ITF,new Date().getTime())}static decodeMiddle(r,s,o,l){let u=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),f.fill(0),h.fill(0);s<o;){_t.recordPattern(r,s,u);for(let p=0;p<5;p++){let w=2*p;f[p]=u[w],h[p]=u[w+1]}let g=He.decodeDigit(f);l.append(g.toString()),g=this.decodeDigit(h),l.append(g.toString()),u.forEach(function(p){s+=p})}}decodeStart(r){let s=He.skipWhiteSpace(r),o=He.findGuardPattern(r,s,He.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let l=s-1;o>0&&l>=0&&!r.get(l);l--)o--;if(o!==0)throw new j}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new j;return o}decodeEnd(r){r.reverse();try{let s=He.skipWhiteSpace(r),o;try{o=He.findGuardPattern(r,s,He.END_PATTERN_REVERSED[0])}catch(u){u instanceof j&&(o=He.findGuardPattern(r,s,He.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let l=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-l,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let l=o.length,u=new Int32Array(l),f=r.getSize(),h=!1,g=0,p=s;u.fill(0);for(let w=s;w<f;w++)if(r.get(w)!==h)u[g]++;else{if(g===l-1){if(_t.patternMatchVariance(u,o,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return[p,w];p+=u[0]+u[1],B.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,h=!h}throw new j}static decodeDigit(r){let s=He.MAX_AVG_VARIANCE,o=-1,l=He.PATTERNS.length;for(let u=0;u<l;u++){let f=He.PATTERNS[u],h=_t.patternMatchVariance(r,f,He.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=u):h===s&&(o=-1)}if(o>=0)return o%10;throw new j}}He.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],He.MAX_AVG_VARIANCE=.38,He.MAX_INDIVIDUAL_VARIANCE=.5,He.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],He.START_PATTERN=Int32Array.from([1,1,1,1]),He.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ht extends _t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,l=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=ht.findGuardPattern(r,l,!1,this.START_END_PATTERN,u);let f=o[0];l=o[1];let h=f-(l-f);h>=0&&(s=r.isRange(h,f,!1))}return o}static checkChecksum(r){return ht.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return ht.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}return(1e3-o)%10}static decodeEnd(r,s){return ht.findGuardPattern(r,s,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,l){return this.findGuardPattern(r,s,o,l,new Int32Array(l.length))}static findGuardPattern(r,s,o,l,u){let f=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let h=0,g=s,p=l.length,w=o;for(let C=s;C<f;C++)if(r.get(C)!==w)u[h]++;else{if(h===p-1){if(_t.patternMatchVariance(u,l,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return Int32Array.from([g,C]);g+=u[0]+u[1];let S=u.slice(2,u.length-1);for(let T=0;T<h-1;T++)u[T]=S[T];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,w=!w}throw new j}static decodeDigit(r,s,o,l){this.recordPattern(r,o,s);let u=this.MAX_AVG_VARIANCE,f=-1,h=l.length;for(let g=0;g<h;g++){let p=l[g],w=_t.patternMatchVariance(s,p,ht.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,f=g)}if(f>=0)return f;throw new j}}ht.MAX_AVG_VARIANCE=.48,ht.MAX_INDIVIDUAL_VARIANCE=.7,ht.START_END_PATTERN=Int32Array.from([1,1,1]),ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),f=l.toString(),h=Qs.parseExtensionString(f),g=[new ae((o[0]+o[1])/2,r),new ae(u,r)],p=new ot(f,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=s[1],h=0;for(let p=0;p<5&&f<u;p++){let w=ht.decodeDigit(r,l,f,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let C of l)f+=C;w>=10&&(h|=1<<4-p),p!==4&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==5)throw new j;let g=this.determineCheckDigit(h);if(Qs.extensionChecksum(o.toString())!==g)throw new j;return f}static extensionChecksum(r){let s=r.length,o=0;for(let l=s-2;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;o*=3;for(let l=s-1;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new j}static parseExtensionString(r){if(r.length!==5)return null;let s=Qs.parseExtension5String(r);return s==null?null:new Map([[Nt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),l=(o/100).toString(),u=o%100,f=u<10?"0"+u:u.toString();return s+l+"."+f}}class vc{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),f=l.toString(),h=vc.parseExtensionString(f),g=[new ae((o[0]+o[1])/2,r),new ae(u,r)],p=new ot(f,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=s[1],h=0;for(let g=0;g<2&&f<u;g++){let p=ht.decodeDigit(r,l,f,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+p%10);for(let w of l)f+=w;p>=10&&(h|=1<<1-g),g!==1&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==2)throw new j;if(parseInt(o.toString())%4!==h)throw new j;return f}static parseExtensionString(r){return r.length!==2?null:new Map([[Nt.ISSUE_NUMBER,parseInt(r)]])}}class vd{static decodeRow(r,s,o){let l=ht.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qs().decodeRow(r,s,l)}catch{return new vc().decodeRow(r,s,l)}}}vd.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ke extends ht{constructor(){super(),this.decodeRowStringBuffer="",ke.L_AND_G_PATTERNS=ke.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=ke.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let l=0;l<s.length;l++)o[l]=s[s.length-l-1];ke.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let l=ke.findStartGuardPattern(s),u=o==null?null:o.get(q.NEED_RESULT_POINT_CALLBACK);if(u!=null){const X=new ae((l[0]+l[1])/2,r);u.foundPossibleResultPoint(X)}let f=this.decodeMiddle(s,l,this.decodeRowStringBuffer),h=f.rowOffset,g=f.resultString;if(u!=null){const X=new ae(h,r);u.foundPossibleResultPoint(X)}let p=this.decodeEnd(s,h);if(u!=null){const X=new ae((p[0]+p[1])/2,r);u.foundPossibleResultPoint(X)}let w=p[1],C=w+(w-p[0]);if(C>=s.getSize()||!s.isRange(w,C,!1))throw new j;let S=g.toString();if(S.length<8)throw new L;if(!ke.checkChecksum(S))throw new D;let T=(l[1]+l[0])/2,R=(p[1]+p[0])/2,M=this.getBarcodeFormat(),k=[new ae(T,r),new ae(R,r)],z=new ot(S,null,0,k,M,new Date().getTime()),K=0;try{let X=vd.decodeRow(r,s,p[1]);z.putMetadata(Nt.UPC_EAN_EXTENSION,X.getText()),z.putAllMetadata(X.getResultMetadata()),z.addResultPoints(X.getResultPoints()),K=X.getText().length}catch{}let Z=o==null?null:o.get(q.ALLOWED_EAN_EXTENSIONS);if(Z!=null){let X=!1;for(let Te in Z)if(K.toString()===Te){X=!0;break}if(!X)throw new j}return z}decodeEnd(r,s){return ke.findGuardPattern(r,s,!1,ke.START_END_PATTERN,new Int32Array(ke.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return ke.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return ke.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new L;o+=u}return(1e3-o)%10}}class mi extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=s[1],h=0;for(let p=0;p<6&&f<u;p++){let w=ke.decodeDigit(r,l,f,ke.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let C of l)f+=C;w>=10&&(h|=1<<5-p)}o=mi.determineFirstDigit(o,h),f=ke.findGuardPattern(r,f,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&f<u;p++){let w=ke.decodeDigit(r,l,f,ke.L_PATTERNS);o+=String.fromCharCode(48+w);for(let C of l)f+=C}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new j}}mi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Td extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f=s[1];for(let g=0;g<4&&f<u;g++){let p=ke.decodeDigit(r,l,f,ke.L_PATTERNS);o+=String.fromCharCode(48+p);for(let w of l)f+=w}f=ke.findGuardPattern(r,f,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&f<u;g++){let p=ke.decodeDigit(r,l,f,ke.L_PATTERNS);o+=String.fromCharCode(48+p);for(let w of l)f+=w}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ce.EAN_8}}class Nd extends ke{constructor(){super(...arguments),this.ean13Reader=new mi}getBarcodeFormat(){return ce.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new ot(s.substring(1),null,null,r.getResultPoints(),ce.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new j}reset(){this.ean13Reader.reset()}}class jn extends ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters.map(p=>p);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=r.getSize();let f=s[1],h=0;for(let p=0;p<6&&f<u;p++){const w=jn.decodeDigit(r,l,f,jn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let C of l)f+=C;w>=10&&(h|=1<<5-p)}let g=jn.determineNumSysAndCheckDigit(o,h);return{rowOffset:f,resultString:g}}decodeEnd(r,s){return jn.findGuardPatternWithoutCounters(r,s,!0,jn.MIDDLE_END_PATTERN)}checkChecksum(r){return ke.checkChecksum(jn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][l]){let u=String.fromCharCode(48+o),f=String.fromCharCode(48+l);return u+r+f}throw j.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new ye;o.append(r.charAt(0));let l=s[5];switch(l){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(l),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(l);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}jn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tc extends _t{constructor(r){super();let s=r==null?null:r.get(q.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new mi),o.push(new Nd),o.push(new Td),o.push(new jn)):(s.indexOf(ce.EAN_13)>-1&&o.push(new mi),s.indexOf(ce.UPC_A)>-1&&o.push(new Nd),s.indexOf(ce.EAN_8)>-1&&o.push(new Td),s.indexOf(ce.UPC_E)>-1&&o.push(new jn)),this.readers=o}decodeRow(r,s,o){for(let l of this.readers)try{const u=l.decodeRow(r,s,o),f=u.getBarcodeFormat()===ce.EAN_13&&u.getText().charAt(0)==="0",h=o==null?null:o.get(q.POSSIBLE_FORMATS),g=h==null||h.includes(ce.UPC_A);if(f&&g){const p=u.getRawBytes(),w=new ot(u.getText().substring(1),p,p?p.length:null,u.getResultPoints(),ce.UPC_A);return w.putAllMetadata(u.getResultMetadata()),w}return u}catch{}throw new j}reset(){for(let r of this.readers)r.reset()}}class Wt extends _t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(_t.patternMatchVariance(r,s[o],Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return o;throw new j}static count(r){return Re.sum(new Int32Array(r))}static increment(r,s){let o=0,l=s[0];for(let u=1;u<r.length;u++)s[u]>l&&(l=s[u],o=u);r[o]++}static decrement(r,s){let o=0,l=s[0];for(let u=1;u<r.length;u++)s[u]<l&&(l=s[u],o=u);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=Wt.MIN_FINDER_PATTERN_RATIO&&l<=Wt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let h of r)h>f&&(f=h),h<u&&(u=h);return f<10*u}return!1}}Wt.MAX_AVG_VARIANCE=.2,Wt.MAX_INDIVIDUAL_VARIANCE=.45,Wt.MIN_FINDER_PATTERN_RATIO=9.5/12,Wt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Yi{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Yi))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Aa{constructor(r,s,o,l,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ae(o,u)),this.resultPoints.push(new ae(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Aa))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class nr{constructor(){}static getRSSvalue(r,s,o){let l=0;for(let g of r)l+=g;let u=0,f=0,h=r.length;for(let g=0;g<h-1;g++){let p;for(p=1,f|=1<<g;p<r[g];p++,f&=~(1<<g)){let w=nr.combins(l-p-1,h-g-2);if(o&&f===0&&l-p-(h-g-1)>=h-g-1&&(w-=nr.combins(l-p-(h-g),h-g-2)),h-g-1>1){let C=0;for(let S=l-p-(h-g-2);S>s;S--)C+=nr.combins(l-p-S-1,h-g-3);w-=C*(h-1-g)}else l-p>s&&w--;u+=w}l-=p}return u}static combins(r,s){let o,l;r-s>s?(l=s,o=r-s):(l=r-s,o=s);let u=1,f=1;for(let h=r;h>o;h--)u*=h,f<=l&&(u/=f,f++);for(;f<=l;)u/=f,f++;return u}}class ox{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,l=new H(o),u=0,h=r[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&l.set(u),u++;for(let g=1;g<r.length;++g){let p=r[g],w=p.getLeftChar().getValue();for(let C=11;C>=0;--C)w&1<<C&&l.set(u),u++;if(p.getRightChar()!=null){let C=p.getRightChar().getValue();for(let S=11;S>=0;--S)C&1<<S&&l.set(u),u++}}return l}}class xi{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Nc{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class sn extends Nc{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===sn.FNC1}}sn.FNC1="$";class yi extends Nc{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Rn extends Nc{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new L;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Rn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Rn.FNC1}isAnyFNC1(){return this.firstDigit===Rn.FNC1||this.secondDigit===Rn.FNC1}}Rn.FNC1=10;class ie{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new j;let s=r.substring(0,2);for(let u of ie.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(2,u[2],r):ie.processFixedAI(2,u[1],r);if(r.length<3)throw new j;let o=r.substring(0,3);for(let u of ie.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(3,u[2],r):ie.processFixedAI(3,u[1],r);for(let u of ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,u[2],r):ie.processFixedAI(4,u[1],r);if(r.length<4)throw new j;let l=r.substring(0,4);for(let u of ie.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,u[2],r):ie.processFixedAI(4,u[1],r);throw new j}static processFixedAI(r,s,o){if(o.length<r)throw new j;let l=o.substring(0,r);if(o.length<r+s)throw new j;let u=o.substring(r,r+s),f=o.substring(r+s),h="("+l+")"+u,g=ie.parseFieldsInGeneralPurpose(f);return g==null?h:h+g}static processVariableAI(r,s,o){let l=o.substring(0,r),u;o.length<r+s?u=o.length:u=r+s;let f=o.substring(r,u),h=o.substring(u),g="("+l+")"+f,p=ie.parseFieldsInGeneralPurpose(h);return p==null?g:g+p}}ie.VARIABLE_LENGTH=[],ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ie.VARIABLE_LENGTH,20],["22",ie.VARIABLE_LENGTH,29],["30",ie.VARIABLE_LENGTH,8],["37",ie.VARIABLE_LENGTH,8],["90",ie.VARIABLE_LENGTH,30],["91",ie.VARIABLE_LENGTH,30],["92",ie.VARIABLE_LENGTH,30],["93",ie.VARIABLE_LENGTH,30],["94",ie.VARIABLE_LENGTH,30],["95",ie.VARIABLE_LENGTH,30],["96",ie.VARIABLE_LENGTH,30],["97",ie.VARIABLE_LENGTH,3],["98",ie.VARIABLE_LENGTH,30],["99",ie.VARIABLE_LENGTH,30]],ie.THREE_DIGIT_DATA_LENGTH=[["240",ie.VARIABLE_LENGTH,30],["241",ie.VARIABLE_LENGTH,30],["242",ie.VARIABLE_LENGTH,6],["250",ie.VARIABLE_LENGTH,30],["251",ie.VARIABLE_LENGTH,30],["253",ie.VARIABLE_LENGTH,17],["254",ie.VARIABLE_LENGTH,20],["400",ie.VARIABLE_LENGTH,30],["401",ie.VARIABLE_LENGTH,30],["402",17],["403",ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ie.VARIABLE_LENGTH,20],["421",ie.VARIABLE_LENGTH,15],["422",3],["423",ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ie.VARIABLE_LENGTH,15],["391",ie.VARIABLE_LENGTH,18],["392",ie.VARIABLE_LENGTH,15],["393",ie.VARIABLE_LENGTH,18],["703",ie.VARIABLE_LENGTH,30]],ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ie.VARIABLE_LENGTH,20],["8003",ie.VARIABLE_LENGTH,30],["8004",ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ie.VARIABLE_LENGTH,30],["8008",ie.VARIABLE_LENGTH,12],["8018",18],["8020",ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ie.VARIABLE_LENGTH,70],["8200",ie.VARIABLE_LENGTH,70]];class Xi{constructor(r){this.buffer=new ye,this.information=r}decodeAllCodes(r,s){let o=s,l=null;do{let u=this.decodeGeneralPurposeField(o,l),f=ie.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&r.append(f),u.isRemaining()?l=""+u.getRemainingValue():l=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Rn(this.information.getSize(),Rn.FNC1,Rn.FNC1):new Rn(this.information.getSize(),u-1,Rn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,l=(s-8)%11;return new Rn(r+7,o,l)}extractNumericValueFromBitArray(r,s){return Xi.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let l=0;for(let u=0;u<o;++u)r.get(s+u)&&(l|=1<<o-u-1);return l}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new yi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new yi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new yi(this.current.getPosition(),this.buffer.toString()):s=new yi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new xi(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new yi(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new yi(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new yi(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xi(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,8);return l>=232&&l<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new sn(r+5,sn.FNC1);if(s>=5&&s<15)return new sn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new sn(r+7,""+(o+1));if(o>=90&&o<116)return new sn(r+7,""+(o+7));let l=this.extractNumericValueFromBitArray(r,8),u;switch(l){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new L}return new sn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new sn(r+5,sn.FNC1);if(s>=5&&s<15)return new sn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new sn(r+6,""+(o+33));let l;switch(o){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new tr("Decoding invalid alphanumeric value: "+o)}return new sn(r+6,l)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class bc{constructor(r){this.information=r,this.generalDecoder=new Xi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class on extends bc{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let l=0;l<4;++l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}on.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let l=0;l<13;l++){let u=r.charAt(l+s).charCodeAt(0)-48;o+=l&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}on.GTIN_SIZE=40;class Qi extends on{constructor(r){super(r)}parseInformation(){let r=new ye;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Qi.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,Qi.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Qi.HEADER_SIZE+44)}}Qi.HEADER_SIZE=4;class Sa extends bc{constructor(r){super(r)}parseInformation(){let r=new ye;return this.getGeneralDecoder().decodeAllCodes(r,Sa.HEADER_SIZE)}}Sa.HEADER_SIZE=5;class Ia extends on{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,l);let u=this.checkWeight(l),f=1e5;for(let h=0;h<5;++h)u/f===0&&r.append("0"),f/=10;r.append(u)}}class rr extends Ia{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=rr.HEADER_SIZE+Ia.GTIN_SIZE+rr.WEIGHT_SIZE)throw new j;let r=new ye;return this.encodeCompressedGtin(r,rr.HEADER_SIZE),this.encodeCompressedWeight(r,rr.HEADER_SIZE+Ia.GTIN_SIZE,rr.WEIGHT_SIZE),r.toString()}}rr.HEADER_SIZE=5,rr.WEIGHT_SIZE=15;class ax extends rr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class lx extends rr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class ir extends on{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<ir.HEADER_SIZE+on.GTIN_SIZE)throw new j;let r=new ye;this.encodeCompressedGtin(r,ir.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(ir.HEADER_SIZE+on.GTIN_SIZE,ir.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(ir.HEADER_SIZE+on.GTIN_SIZE+ir.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}ir.HEADER_SIZE=8,ir.LAST_DIGIT_SIZE=2;class $t extends on{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<$t.HEADER_SIZE+on.GTIN_SIZE)throw new j;let r=new ye;this.encodeCompressedGtin(r,$t.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray($t.HEADER_SIZE+on.GTIN_SIZE,$t.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray($t.HEADER_SIZE+on.GTIN_SIZE+$t.LAST_DIGIT_SIZE,$t.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let l=this.getGeneralDecoder().decodeGeneralPurposeField($t.HEADER_SIZE+on.GTIN_SIZE+$t.LAST_DIGIT_SIZE+$t.FIRST_THREE_DIGITS_SIZE,null);return r.append(l.getNewString()),r.toString()}}$t.HEADER_SIZE=8,$t.LAST_DIGIT_SIZE=2,$t.FIRST_THREE_DIGITS_SIZE=10;class it extends Ia{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=it.HEADER_SIZE+it.GTIN_SIZE+it.WEIGHT_SIZE+it.DATE_SIZE)throw new j;let r=new ye;return this.encodeCompressedGtin(r,it.HEADER_SIZE),this.encodeCompressedWeight(r,it.HEADER_SIZE+it.GTIN_SIZE,it.WEIGHT_SIZE),this.encodeCompressedDate(r,it.HEADER_SIZE+it.GTIN_SIZE+it.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,it.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let l=o%32;o/=32;let u=o%12+1;o/=12;let f=o;f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u),l/10==0&&r.append("0"),r.append(l)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}it.HEADER_SIZE=8,it.WEIGHT_SIZE=20,it.DATE_SIZE=16;function bd(_){try{if(_.get(1))return new Qi(_);if(!_.get(2))return new Sa(_);switch(Xi.extractNumericValueFromBitArray(_,1,4)){case 4:return new ax(_);case 5:return new lx(_)}switch(Xi.extractNumericValueFromBitArray(_,1,5)){case 12:return new ir(_);case 13:return new $t(_)}switch(Xi.extractNumericValueFromBitArray(_,1,7)){case 56:return new it(_,"310","11");case 57:return new it(_,"320","11");case 58:return new it(_,"310","13");case 59:return new it(_,"320","13");case 60:return new it(_,"310","15");case 61:return new it(_,"320","15");case 62:return new it(_,"310","17");case 63:return new it(_,"320","17")}}catch(r){throw console.log(r),new tr("unknown decoder: "+_)}}class Lr{constructor(r,s,o,l){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Lr?Lr.equalsOrNull(r.leftchar,s.leftchar)&&Lr.equalsOrNull(r.rightchar,s.rightchar)&&Lr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Lr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Rc{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Rc?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((l,u)=>{s.forEach(f=>{l.getLeftChar().getValue()===f.getLeftChar().getValue()&&l.getRightChar().getValue()===f.getRightChar().getValue()&&l.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class G extends Wt{constructor(r){super(...arguments),this.pairs=new Array(G.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return G.constructResult(this.decodeRow2pairs(r,s))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,G.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof j){if(!this.pairs.length)throw new j;o=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(r,!1),l){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new j}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let l=this.rows[o];this.pairs.length=0;for(let f of r)this.pairs.push(f.getPairs());if(this.pairs.push(l.getPairs()),!G.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(l);try{return this.checkRows(u,o+1)}catch(f){this.verbose&&console.log(f)}}throw new j}static isValidSequence(r){for(let s of G.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!=s[l]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,l=!1,u=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>r){u=f.isEquivalent(this.pairs);break}l=f.isEquivalent(this.pairs),o++}u||l||G.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Rc(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let l of o.getPairs())for(let u of r)if(Lr.equals(l,u))break}}static isPartialRow(r,s){for(let o of s){let l=!0;for(let u of r){let f=!1;for(let h of o.getPairs())if(u.equals(h)){f=!0;break}if(!f){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ox.buildBitArray(r),l=bd(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),f=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],f[0],f[1]];return new ot(l,null,null,h,ce.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let l=o.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);l+=g.getLeftChar().getChecksumPortion(),u++;let p=g.getRightChar();p!=null&&(l+=p.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let l=s.length%2==0;this.startFromEven&&(l=!l);let u,f=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,o,l),u==null?h=G.getNextSecondBar(r,this.startEnd[0]):f=!1;while(f);let g=this.decodeDataCharacter(r,u,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new j;let p;try{p=this.decodeDataCharacter(r,u,l,!1)}catch(w){p=null,this.verbose&&console.log(w)}return new Lr(g,p,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),f;o>=0?f=o:this.isEmptyPair(s)?f=0:f=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;f<u&&(g=!r.get(f),!!g);)f++;let p=0,w=f;for(let C=f;C<u;C++)if(r.get(C)!=g)l[p]++;else{if(p==3){if(h&&G.reverseCounters(l),G.isFinderPattern(l)){this.startEnd[0]=w,this.startEnd[1]=C;return}h&&G.reverseCounters(l),w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,g=!g}throw new j}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let l=r[o];r[o]=r[s-o-1],r[s-o-1]=l}}parseFoundFinderPattern(r,s,o){let l,u,f;if(o){let p=this.startEnd[0]-1;for(;p>=0&&!r.get(p);)p--;p++,l=this.startEnd[0]-p,u=p,f=this.startEnd[1]}else u=this.startEnd[0],f=r.getNextUnset(this.startEnd[1]+1),l=f-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let g;try{g=this.parseFinderValue(h,G.FINDER_PATTERNS)}catch{return null}return new Aa(g,[u,f],u,f,s)}decodeDataCharacter(r,s,o,l){let u=this.getDataCharacterCounters();for(let We=0;We<u.length;We++)u[We]=0;if(l)G.recordPatternInReverse(r,s.getStartEnd()[0],u);else{G.recordPattern(r,s.getStartEnd()[1],u);for(let We=0,Ut=u.length-1;We<Ut;We++,Ut--){let wn=u[We];u[We]=u[Ut],u[Ut]=wn}}let f=17,h=Re.sum(new Int32Array(u))/f,g=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new j;let p=this.getOddCounts(),w=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let We=0;We<u.length;We++){let Ut=1*u[We]/h,wn=Ut+.5;if(wn<1){if(Ut<.3)throw new j;wn=1}else if(wn>8){if(Ut>8.7)throw new j;wn=8}let Ji=We/2;We&1?(w[Ji]=wn,S[Ji]=Ut-wn):(p[Ji]=wn,C[Ji]=Ut-wn)}this.adjustOddEvenCounts(f);let T=4*s.getValue()+(o?0:2)+(l?0:1)-1,R=0,M=0;for(let We=p.length-1;We>=0;We--){if(G.isNotA1left(s,o,l)){let Ut=G.WEIGHTS[T][2*We];M+=p[We]*Ut}R+=p[We]}let k=0;for(let We=w.length-1;We>=0;We--)if(G.isNotA1left(s,o,l)){let Ut=G.WEIGHTS[T][2*We+1];k+=w[We]*Ut}let z=M+k;if(R&1||R>13||R<4)throw new j;let K=(13-R)/2,Z=G.SYMBOL_WIDEST[K],X=9-Z,Te=nr.getRSSvalue(p,Z,!0),we=nr.getRSSvalue(w,X,!1),ln=G.EVEN_TOTAL_SUBSET[K],Hn=G.GSUM[K],cn=Te*ln+we+Hn;return new Yi(cn,z)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=Re.sum(new Int32Array(this.getOddCounts())),o=Re.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;s>13?u=!0:s<4&&(l=!0);let f=!1,h=!1;o>13?h=!0:o<4&&(f=!0);let g=s+o-r,p=(s&1)==1,w=(o&1)==0;if(g==1)if(p){if(w)throw new j;u=!0}else{if(!w)throw new j;h=!0}else if(g==-1)if(p){if(w)throw new j;l=!0}else{if(!w)throw new j;f=!0}else if(g==0){if(p){if(!w)throw new j;s<o?(l=!0,h=!0):(u=!0,f=!0)}else if(w)throw new j}else throw new j;if(l){if(u)throw new j;G.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&G.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new j;G.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&G.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}G.SYMBOL_WIDEST=[7,5,4,3,1],G.EVEN_TOTAL_SUBSET=[4,20,52,104,204],G.GSUM=[0,348,1388,2948,3988],G.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],G.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],G.FINDER_PAT_A=0,G.FINDER_PAT_B=1,G.FINDER_PAT_C=2,G.FINDER_PAT_D=3,G.FINDER_PAT_E=4,G.FINDER_PAT_F=5,G.FINDER_PATTERN_SEQUENCES=[[G.FINDER_PAT_A,G.FINDER_PAT_A],[G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B],[G.FINDER_PAT_A,G.FINDER_PAT_C,G.FINDER_PAT_B,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_C],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F]],G.MAX_PAIRS=11;class cx extends Yi{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class dt extends Wt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const l=this.decodePair(s,!1,r,o);dt.addOrTally(this.possibleLeftPairs,l),s.reverse();let u=this.decodePair(s,!0,r,o);dt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&dt.checkChecksum(f,h))return dt.constructResult(f,h)}throw new j}static addOrTally(r,s){if(s==null)return;let o=!1;for(let l of r)if(l.getValue()===s.getValue()){l.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),l=new String(o).toString(),u=new ye;for(let p=13-l.length;p>0;p--)u.append("0");u.append(l);let f=0;for(let p=0;p<13;p++){let w=u.charAt(p).charCodeAt(0)-48;f+=p&1?w:3*w}f=10-f%10,f===10&&(f=0),u.append(f.toString());let h=r.getFinderPattern().getResultPoints(),g=s.getFinderPattern().getResultPoints();return new ot(u.toString(),null,0,[h[0],h[1],g[0],g[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,o===l}decodePair(r,s,o,l){try{let u=this.findFinderPattern(r,s),f=this.parseFoundFinderPattern(r,o,s,u),h=l==null?null:l.get(q.NEED_RESULT_POINT_CALLBACK);if(h!=null){let w=(u[0]+u[1])/2;s&&(w=r.getSize()-1-w),h.foundPossibleResultPoint(new ae(w,o))}let g=this.decodeDataCharacter(r,f,!0),p=this.decodeDataCharacter(r,f,!1);return new cx(1597*g.getValue()+p.getValue(),g.getChecksumPortion()+4*p.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(r,s,o){let l=this.getDataCharacterCounters();for(let k=0;k<l.length;k++)l[k]=0;if(o)_t.recordPatternInReverse(r,s.getStartEnd()[0],l);else{_t.recordPattern(r,s.getStartEnd()[1]+1,l);for(let k=0,z=l.length-1;k<z;k++,z--){let K=l[k];l[k]=l[z],l[z]=K}}let u=o?16:15,f=Re.sum(new Int32Array(l))/u,h=this.getOddCounts(),g=this.getEvenCounts(),p=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let k=0;k<l.length;k++){let z=l[k]/f,K=Math.floor(z+.5);K<1?K=1:K>8&&(K=8);let Z=Math.floor(k/2);k&1?(g[Z]=K,w[Z]=z-K):(h[Z]=K,p[Z]=z-K)}this.adjustOddEvenCounts(o,u);let C=0,S=0;for(let k=h.length-1;k>=0;k--)S*=9,S+=h[k],C+=h[k];let T=0,R=0;for(let k=g.length-1;k>=0;k--)T*=9,T+=g[k],R+=g[k];let M=S+3*T;if(o){if(C&1||C>12||C<4)throw new j;let k=(12-C)/2,z=dt.OUTSIDE_ODD_WIDEST[k],K=9-z,Z=nr.getRSSvalue(h,z,!1),X=nr.getRSSvalue(g,K,!0),Te=dt.OUTSIDE_EVEN_TOTAL_SUBSET[k],we=dt.OUTSIDE_GSUM[k];return new Yi(Z*Te+X+we,M)}else{if(R&1||R>10||R<4)throw new j;let k=(10-R)/2,z=dt.INSIDE_ODD_WIDEST[k],K=9-z,Z=nr.getRSSvalue(h,z,!0),X=nr.getRSSvalue(g,K,!1),Te=dt.INSIDE_ODD_TOTAL_SUBSET[k],we=dt.INSIDE_GSUM[k];return new Yi(X*Te+Z+we,M)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=r.getSize(),u=!1,f=0;for(;f<l&&(u=!r.get(f),s!==u);)f++;let h=0,g=f;for(let p=f;p<l;p++)if(r.get(p)!==u)o[h]++;else{if(h===3){if(Wt.isFinderPattern(o))return[g,p];g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,u=!u}throw new j}parseFoundFinderPattern(r,s,o,l){let u=r.get(l[0]),f=l[0]-1;for(;f>=0&&u!==r.get(f);)f--;f++;const h=l[0]-f,g=this.getDecodeFinderCounters(),p=new Int32Array(g.length);B.arraycopy(g,0,p,1,g.length-1),p[0]=h;const w=this.parseFinderValue(p,dt.FINDER_PATTERNS);let C=f,S=l[1];return o&&(C=r.getSize()-1-C,S=r.getSize()-1-S),new Aa(w,[f,l[1]],C,S,s)}adjustOddEvenCounts(r,s){let o=Re.sum(new Int32Array(this.getOddCounts())),l=Re.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,h=!1,g=!1;r?(o>12?f=!0:o<4&&(u=!0),l>12?g=!0:l<4&&(h=!0)):(o>11?f=!0:o<5&&(u=!0),l>10?g=!0:l<4&&(h=!0));let p=o+l-s,w=(o&1)===(r?1:0),C=(l&1)===1;if(p===1)if(w){if(C)throw new j;f=!0}else{if(!C)throw new j;g=!0}else if(p===-1)if(w){if(C)throw new j;u=!0}else{if(!C)throw new j;h=!0}else if(p===0){if(w){if(!C)throw new j;o<l?(u=!0,g=!0):(f=!0,h=!0)}else if(C)throw new j}else throw new j;if(u){if(f)throw new j;Wt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Wt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new j;Wt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Wt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}dt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],dt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],dt.OUTSIDE_GSUM=[0,161,961,2015,2715],dt.INSIDE_GSUM=[0,336,1036,1516],dt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],dt.INSIDE_ODD_WIDEST=[2,4,6,8],dt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ki extends _t{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(q.POSSIBLE_FORMATS):null,l=r&&r.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ce.EAN_13)||o.includes(ce.UPC_A)||o.includes(ce.EAN_8)||o.includes(ce.UPC_E))&&this.readers.push(new Tc(r)),o.includes(ce.CODE_39)&&this.readers.push(new Et(l)),o.includes(ce.CODE_128)&&this.readers.push(new J),o.includes(ce.ITF)&&this.readers.push(new He),o.includes(ce.RSS_14)&&this.readers.push(new dt),o.includes(ce.RSS_EXPANDED)&&this.readers.push(new G(this.verbose))):(this.readers.push(new Tc(r)),this.readers.push(new Et),this.readers.push(new Tc(r)),this.readers.push(new J),this.readers.push(new He),this.readers.push(new dt),this.readers.push(new G(this.verbose)))}decodeRow(r,s,o){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(r,s,o)}catch{}throw new j}reset(){this.readers.forEach(r=>r.reset())}}class ux extends bn{constructor(r=500,s){super(new Ki(s),r,s)}}class Fe{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Le{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ne{constructor(r,s,o,l,u,f){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=f;let h=0;const g=f.getECCodewords(),p=f.getECBlocks();for(let w of p)h+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new L;for(let o of Ne.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Ne(1,10,10,8,8,new Fe(5,new Le(1,3))),new Ne(2,12,12,10,10,new Fe(7,new Le(1,5))),new Ne(3,14,14,12,12,new Fe(10,new Le(1,8))),new Ne(4,16,16,14,14,new Fe(12,new Le(1,12))),new Ne(5,18,18,16,16,new Fe(14,new Le(1,18))),new Ne(6,20,20,18,18,new Fe(18,new Le(1,22))),new Ne(7,22,22,20,20,new Fe(20,new Le(1,30))),new Ne(8,24,24,22,22,new Fe(24,new Le(1,36))),new Ne(9,26,26,24,24,new Fe(28,new Le(1,44))),new Ne(10,32,32,14,14,new Fe(36,new Le(1,62))),new Ne(11,36,36,16,16,new Fe(42,new Le(1,86))),new Ne(12,40,40,18,18,new Fe(48,new Le(1,114))),new Ne(13,44,44,20,20,new Fe(56,new Le(1,144))),new Ne(14,48,48,22,22,new Fe(68,new Le(1,174))),new Ne(15,52,52,24,24,new Fe(42,new Le(2,102))),new Ne(16,64,64,14,14,new Fe(56,new Le(2,140))),new Ne(17,72,72,16,16,new Fe(36,new Le(4,92))),new Ne(18,80,80,18,18,new Fe(48,new Le(4,114))),new Ne(19,88,88,20,20,new Fe(56,new Le(4,144))),new Ne(20,96,96,22,22,new Fe(68,new Le(4,174))),new Ne(21,104,104,24,24,new Fe(56,new Le(6,136))),new Ne(22,120,120,18,18,new Fe(68,new Le(6,175))),new Ne(23,132,132,20,20,new Fe(62,new Le(8,163))),new Ne(24,144,144,22,22,new Fe(62,new Le(8,156),new Le(2,155))),new Ne(25,8,18,6,16,new Fe(7,new Le(1,5))),new Ne(26,8,32,6,14,new Fe(11,new Le(1,10))),new Ne(27,12,26,10,24,new Fe(14,new Le(1,16))),new Ne(28,12,36,10,16,new Fe(18,new Le(1,22))),new Ne(29,16,36,14,16,new Fe(24,new Le(1,32))),new Ne(30,16,48,14,22,new Fe(28,new Le(1,49)))]}}Ne.VERSIONS=Ne.buildVersions();class Mc{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new L;this.version=Mc.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Be(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return Ne.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,l=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,g=!1,p=!1,w=!1;do if(o===u&&l===0&&!h)r[s++]=this.readCorner1(u,f)&255,o-=2,l+=2,h=!0;else if(o===u-2&&l===0&&f&3&&!g)r[s++]=this.readCorner2(u,f)&255,o-=2,l+=2,g=!0;else if(o===u+4&&l===2&&!(f&7)&&!p)r[s++]=this.readCorner3(u,f)&255,o-=2,l+=2,p=!0;else if(o===u-2&&l===0&&(f&7)===4&&!w)r[s++]=this.readCorner4(u,f)&255,o-=2,l+=2,w=!0;else{do o<u&&l>=0&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,u,f)&255),o-=2,l+=2;while(o>=0&&l<f);o+=1,l+=3;do o>=0&&l<f&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,u,f)&255),o+=2,l-=2;while(o<u&&l>=0);o+=3,l+=1}while(o<u||l<f);if(s!==this.version.getTotalCodewords())throw new L;return r}readModule(r,s,o,l){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=l,r+=4-(l+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,l){let u=0;return this.readModule(r-2,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r-2,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s,o,l)&&(u|=1),u<<=1,this.readModule(r,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r,s,o,l)&&(u|=1),u}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=s/l|0,h=o/u|0,g=f*l,p=h*u,w=new Be(p,g);for(let C=0;C<f;++C){const S=C*l;for(let T=0;T<h;++T){const R=T*u;for(let M=0;M<l;++M){const k=C*(l+2)+1+M,z=S+M;for(let K=0;K<u;++K){const Z=T*(u+2)+1+K;if(r.get(Z,k)){const X=R+K;w.set(X,z)}}}}}return w}}class Oc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let l=0;const u=o.getECBlocks();for(let M of u)l+=M.getCount();const f=new Array(l);let h=0;for(let M of u)for(let k=0;k<M.getCount();k++){const z=M.getDataCodewords(),K=o.getECCodewords()+z;f[h++]=new Oc(z,new Uint8Array(K))}const p=f[0].codewords.length-o.getECCodewords(),w=p-1;let C=0;for(let M=0;M<w;M++)for(let k=0;k<h;k++)f[k].codewords[M]=r[C++];const S=s.getVersionNumber()===24,T=S?8:h;for(let M=0;M<T;M++)f[M].codewords[p-1]=r[C++];const R=f[0].codewords.length;for(let M=p;M<R;M++)for(let k=0;k<h;k++){const z=S?(k+8)%h:k,K=S&&z>7?M-1:M;f[z].codewords[K]=r[C++]}if(C!==r.length)throw new E;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Dc{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new E(""+r);let s=0,o=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(o>0){const f=8-o,h=r<f?r:f,g=f-h,p=255>>8-h<<g;s=(u[l]&p)>>g,r-=h,o+=h,o===8&&(o=0,l++)}if(r>0){for(;r>=8;)s=s<<8|u[l]&255,l++,r-=8;if(r>0){const f=8-r,h=255>>f<<f;s=s<<r|(u[l]&h)>>f,o+=r}}return this.bitOffset=o,this.byteOffset=l,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var At;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(At||(At={}));class Pr{static decode(r){const s=new Dc(r),o=new ye,l=new ye,u=new Array;let f=At.ASCII_ENCODE;do if(f===At.ASCII_ENCODE)f=this.decodeAsciiSegment(s,o,l);else{switch(f){case At.C40_ENCODE:this.decodeC40Segment(s,o);break;case At.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case At.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case At.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case At.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new L}f=At.ASCII_ENCODE}while(f!==At.PAD_ENCODE&&s.available()>0);return l.length()>0&&o.append(l.toString()),new Gs(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,o){let l=!1;do{let u=r.readBits(8);if(u===0)throw new L;if(u<=128)return l&&(u+=128),s.append(String.fromCharCode(u-1)),At.ASCII_ENCODE;if(u===129)return At.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&s.append("0"),s.append(""+f)}else switch(u){case 230:return At.C40_ENCODE;case 231:return At.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return At.ANSIX12_ENCODE;case 239:return At.TEXT_ENCODE;case 240:return At.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new L;break}}while(r.available()>0);return At.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const l=[];let u=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),o=!1):s.append(p)}else throw new L;break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),o=!1):s.append(p)}else switch(g){case 27:s.append("");break;case 30:o=!0;break;default:throw new L}u=0;break;case 3:o?(s.append(String.fromCharCode(g+224)),o=!1):s.append(String.fromCharCode(g+96)),u=0;break;default:throw new L}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,l=[],u=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),o=!1):s.append(p)}else throw new L;break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),o=!1):s.append(p)}else switch(g){case 27:s.append("");break;case 30:o=!0;break;default:throw new L}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[g];o?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),o=!1):s.append(p),u=0}else throw new L;break;default:throw new L}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const l=r.readBits(8);if(l===254)return;this.parseTwoBytes(l,r.readBits(8),o);for(let u=0;u<3;u++){const f=o[u];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else if(f<40)s.append(String.fromCharCode(f+51));else throw new L;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let l=(r<<8)+s-1,u=Math.floor(l/1600);o[0]=u,l-=u*1600,u=Math.floor(l/40),o[1]=u,o[2]=l-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let l=r.readBits(6);if(l===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}l&32||(l|=64),s.append(String.fromCharCode(l))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let l=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),l++);let f;if(u===0?f=r.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(r.readBits(8),l++),f<0)throw new L;const h=new Uint8Array(f);for(let g=0;g<f;g++){if(r.available()<8)throw new L;h[g]=this.unrandomize255State(r.readBits(8),l++)}o.push(h);try{s.append(Ee.decode(h,re.ISO88591))}catch(g){throw new tr("Platform does not support required encoding: "+g.message)}}static unrandomize255State(r,s){const o=149*s%255+1,l=r-o;return l>=0?l:l+256}}Pr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Pr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Pr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Pr.TEXT_SHIFT2_SET_CHARS=Pr.C40_SHIFT2_SET_CHARS,Pr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class fx{constructor(){this.rsDecoder=new Xs(De.DATA_MATRIX_FIELD_256)}decode(r){const s=new Mc(r),o=s.getVersion(),l=s.readCodewords(),u=Oc.getDataBlocks(l,o);let f=0;for(let p of u)f+=p.getNumDataCodewords();const h=new Uint8Array(f),g=u.length;for(let p=0;p<g;p++){const w=u[p],C=w.getCodewords(),S=w.getNumDataCodewords();this.correctErrors(C,S);for(let T=0;T<S;T++)h[T*g+p]=C[T]}return Pr.decode(h)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new D}for(let l=0;l<s;l++)r[l]=o[l]}}class yt{constructor(r){this.image=r,this.rectangleDetector=new gr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new j;s=this.shiftToModuleCenter(s);const o=s[0],l=s[1],u=s[2],f=s[3];let h=this.transitionsBetween(o,f)+1,g=this.transitionsBetween(u,f)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let p=yt.sampleGrid(this.image,o,l,u,f,h,g);return new Ca(p,[o,l,u,f])}static shiftPoint(r,s,o){let l=(s.getX()-r.getX())/(o+1),u=(s.getY()-r.getY())/(o+1);return new ae(r.getX()+l,r.getY()+u)}static moveAway(r,s,o){let l=r.getX(),u=r.getY();return l<s?l-=1:l+=1,u<o?u-=1:u+=1,new ae(l,u)}detectSolid1(r){let s=r[0],o=r[1],l=r[3],u=r[2],f=this.transitionsBetween(s,o),h=this.transitionsBetween(o,l),g=this.transitionsBetween(l,u),p=this.transitionsBetween(u,s),w=f,C=[u,s,o,l];return w>h&&(w=h,C[0]=s,C[1]=o,C[2]=l,C[3]=u),w>g&&(w=g,C[0]=o,C[1]=l,C[2]=u,C[3]=s),w>p&&(C[0]=l,C[1]=u,C[2]=s,C[3]=o),C}detectSolid2(r){let s=r[0],o=r[1],l=r[2],u=r[3],f=this.transitionsBetween(s,u),h=yt.shiftPoint(o,l,(f+1)*4),g=yt.shiftPoint(l,o,(f+1)*4),p=this.transitionsBetween(h,s),w=this.transitionsBetween(g,u);return p<w?(r[0]=s,r[1]=o,r[2]=l,r[3]=u):(r[0]=o,r[1]=l,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],l=r[2],u=r[3],f=this.transitionsBetween(s,u),h=this.transitionsBetween(o,u),g=yt.shiftPoint(s,o,(h+1)*4),p=yt.shiftPoint(l,o,(f+1)*4);f=this.transitionsBetween(g,u),h=this.transitionsBetween(p,u);let w=new ae(u.getX()+(l.getX()-o.getX())/(f+1),u.getY()+(l.getY()-o.getY())/(f+1)),C=new ae(u.getX()+(s.getX()-o.getX())/(h+1),u.getY()+(s.getY()-o.getY())/(h+1));if(!this.isValid(w))return this.isValid(C)?C:null;if(!this.isValid(C))return w;let S=this.transitionsBetween(g,w)+this.transitionsBetween(p,w),T=this.transitionsBetween(g,C)+this.transitionsBetween(p,C);return S>T?w:C}shiftToModuleCenter(r){let s=r[0],o=r[1],l=r[2],u=r[3],f=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(l,u)+1,g=yt.shiftPoint(s,o,h*4),p=yt.shiftPoint(l,o,f*4);f=this.transitionsBetween(g,u)+1,h=this.transitionsBetween(p,u)+1,(f&1)===1&&(f+=1),(h&1)===1&&(h+=1);let w=(s.getX()+o.getX()+l.getX()+u.getX())/4,C=(s.getY()+o.getY()+l.getY()+u.getY())/4;s=yt.moveAway(s,w,C),o=yt.moveAway(o,w,C),l=yt.moveAway(l,w,C),u=yt.moveAway(u,w,C);let S,T;return g=yt.shiftPoint(s,o,h*4),g=yt.shiftPoint(g,u,f*4),S=yt.shiftPoint(o,s,h*4),S=yt.shiftPoint(S,l,f*4),p=yt.shiftPoint(l,u,h*4),p=yt.shiftPoint(p,o,f*4),T=yt.shiftPoint(u,l,h*4),T=yt.shiftPoint(T,s,f*4),[g,S,p,T]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,l,u,f,h){return kr.getInstance().sampleGrid(r,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),l.getX(),l.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),l=Math.trunc(r.getY()),u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.abs(f-l)>Math.abs(u-o);if(h){let M=o;o=l,l=M,M=u,u=f,f=M}let g=Math.abs(u-o),p=Math.abs(f-l),w=-g/2,C=l<f?1:-1,S=o<u?1:-1,T=0,R=this.image.get(h?l:o,h?o:l);for(let M=o,k=l;M!==u;M+=S){let z=this.image.get(h?k:M,h?M:k);if(z!==R&&(T++,R=z),w+=p,w>0){if(k===f)break;k+=C,w-=g}}return T}}class Br{constructor(){this.decoder=new fx}decode(r,s=null){let o,l;if(s!=null&&s.has(q.PURE_BARCODE)){const p=Br.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(p),l=Br.NO_POINTS}else{const p=new yt(r.getBlackMatrix()).detect();o=this.decoder.decode(p.getBits()),l=p.getPoints()}const u=o.getRawBytes(),f=new ot(o.getText(),u,8*u.length,l,ce.DATA_MATRIX,B.currentTimeMillis()),h=o.getByteSegments();h!=null&&f.putMetadata(Nt.BYTE_SEGMENTS,h);const g=o.getECLevel();return g!=null&&f.putMetadata(Nt.ERROR_CORRECTION_LEVEL,g),f}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new j;const l=this.moduleSize(s,r);let u=s[1];const f=o[1];let h=s[0];const p=(o[0]-h+1)/l,w=(f-u+1)/l;if(p<=0||w<=0)throw new j;const C=l/2;u+=C,h+=C;const S=new Be(p,w);for(let T=0;T<w;T++){const R=u+T*l;for(let M=0;M<p;M++)r.get(h+M*l,R)&&S.set(M,T)}return S}static moduleSize(r,s){const o=s.getWidth();let l=r[0];const u=r[1];for(;l<o&&s.get(l,u);)l++;if(l===o)throw new j;const f=l-r[0];if(f===0)throw new j;return f}}Br.NO_POINTS=[];class hx extends bn{constructor(r=500){super(new Br,r)}}var Zi;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(Zi||(Zi={}));class Xe{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,Xe.FOR_BITS.set(o,this),Xe.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Xe.L;case"M":return Xe.M;case"Q":return Xe.Q;case"H":return Xe.H;default:throw new A(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Xe))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Xe.FOR_BITS.size)throw new E;return Xe.FOR_BITS.get(r)}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.L=new Xe(Zi.L,"L",1),Xe.M=new Xe(Zi.M,"M",0),Xe.Q=new Xe(Zi.Q,"Q",3),Xe.H=new Xe(Zi.H,"H",2);class Gt{constructor(r){this.errorCorrectionLevel=Xe.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return b.bitCount(r^s)}static decodeFormatInformation(r,s){const o=Gt.doDecodeFormatInformation(r,s);return o!==null?o:Gt.doDecodeFormatInformation(r^Gt.FORMAT_INFO_MASK_QR,s^Gt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,l=0;for(const u of Gt.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===r||f===s)return new Gt(u[1]);let h=Gt.numBitsDiffering(r,f);h<o&&(l=u[1],o=h),r!==s&&(h=Gt.numBitsDiffering(s,f),h<o&&(l=u[1],o=h))}return o<=3?new Gt(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Gt))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Gt.FORMAT_INFO_MASK_QR=21522,Gt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class P{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class v{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ue{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let l=0;const u=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const h of f)l+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new L;try{return this.getVersionForNumber((r-17)/4)}catch{throw new L}}static getVersionForNumber(r){if(r<1||r>40)throw new E;return ue.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<ue.VERSION_DECODE_INFO.length;l++){const u=ue.VERSION_DECODE_INFO[l];if(u===r)return ue.getVersionForNumber(l+7);const f=Gt.numBitsDiffering(r,u);f<s&&(o=l+7,s=f)}return s<=3?ue.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Be(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let l=0;l<o;l++){const u=this.alignmentPatternCenters[l]-2;for(let f=0;f<o;f++)l===0&&(f===0||f===o-1)||l===o-1&&f===0||s.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}ue.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ue.VERSIONS=[new ue(1,new Int32Array(0),new P(7,new v(1,19)),new P(10,new v(1,16)),new P(13,new v(1,13)),new P(17,new v(1,9))),new ue(2,Int32Array.from([6,18]),new P(10,new v(1,34)),new P(16,new v(1,28)),new P(22,new v(1,22)),new P(28,new v(1,16))),new ue(3,Int32Array.from([6,22]),new P(15,new v(1,55)),new P(26,new v(1,44)),new P(18,new v(2,17)),new P(22,new v(2,13))),new ue(4,Int32Array.from([6,26]),new P(20,new v(1,80)),new P(18,new v(2,32)),new P(26,new v(2,24)),new P(16,new v(4,9))),new ue(5,Int32Array.from([6,30]),new P(26,new v(1,108)),new P(24,new v(2,43)),new P(18,new v(2,15),new v(2,16)),new P(22,new v(2,11),new v(2,12))),new ue(6,Int32Array.from([6,34]),new P(18,new v(2,68)),new P(16,new v(4,27)),new P(24,new v(4,19)),new P(28,new v(4,15))),new ue(7,Int32Array.from([6,22,38]),new P(20,new v(2,78)),new P(18,new v(4,31)),new P(18,new v(2,14),new v(4,15)),new P(26,new v(4,13),new v(1,14))),new ue(8,Int32Array.from([6,24,42]),new P(24,new v(2,97)),new P(22,new v(2,38),new v(2,39)),new P(22,new v(4,18),new v(2,19)),new P(26,new v(4,14),new v(2,15))),new ue(9,Int32Array.from([6,26,46]),new P(30,new v(2,116)),new P(22,new v(3,36),new v(2,37)),new P(20,new v(4,16),new v(4,17)),new P(24,new v(4,12),new v(4,13))),new ue(10,Int32Array.from([6,28,50]),new P(18,new v(2,68),new v(2,69)),new P(26,new v(4,43),new v(1,44)),new P(24,new v(6,19),new v(2,20)),new P(28,new v(6,15),new v(2,16))),new ue(11,Int32Array.from([6,30,54]),new P(20,new v(4,81)),new P(30,new v(1,50),new v(4,51)),new P(28,new v(4,22),new v(4,23)),new P(24,new v(3,12),new v(8,13))),new ue(12,Int32Array.from([6,32,58]),new P(24,new v(2,92),new v(2,93)),new P(22,new v(6,36),new v(2,37)),new P(26,new v(4,20),new v(6,21)),new P(28,new v(7,14),new v(4,15))),new ue(13,Int32Array.from([6,34,62]),new P(26,new v(4,107)),new P(22,new v(8,37),new v(1,38)),new P(24,new v(8,20),new v(4,21)),new P(22,new v(12,11),new v(4,12))),new ue(14,Int32Array.from([6,26,46,66]),new P(30,new v(3,115),new v(1,116)),new P(24,new v(4,40),new v(5,41)),new P(20,new v(11,16),new v(5,17)),new P(24,new v(11,12),new v(5,13))),new ue(15,Int32Array.from([6,26,48,70]),new P(22,new v(5,87),new v(1,88)),new P(24,new v(5,41),new v(5,42)),new P(30,new v(5,24),new v(7,25)),new P(24,new v(11,12),new v(7,13))),new ue(16,Int32Array.from([6,26,50,74]),new P(24,new v(5,98),new v(1,99)),new P(28,new v(7,45),new v(3,46)),new P(24,new v(15,19),new v(2,20)),new P(30,new v(3,15),new v(13,16))),new ue(17,Int32Array.from([6,30,54,78]),new P(28,new v(1,107),new v(5,108)),new P(28,new v(10,46),new v(1,47)),new P(28,new v(1,22),new v(15,23)),new P(28,new v(2,14),new v(17,15))),new ue(18,Int32Array.from([6,30,56,82]),new P(30,new v(5,120),new v(1,121)),new P(26,new v(9,43),new v(4,44)),new P(28,new v(17,22),new v(1,23)),new P(28,new v(2,14),new v(19,15))),new ue(19,Int32Array.from([6,30,58,86]),new P(28,new v(3,113),new v(4,114)),new P(26,new v(3,44),new v(11,45)),new P(26,new v(17,21),new v(4,22)),new P(26,new v(9,13),new v(16,14))),new ue(20,Int32Array.from([6,34,62,90]),new P(28,new v(3,107),new v(5,108)),new P(26,new v(3,41),new v(13,42)),new P(30,new v(15,24),new v(5,25)),new P(28,new v(15,15),new v(10,16))),new ue(21,Int32Array.from([6,28,50,72,94]),new P(28,new v(4,116),new v(4,117)),new P(26,new v(17,42)),new P(28,new v(17,22),new v(6,23)),new P(30,new v(19,16),new v(6,17))),new ue(22,Int32Array.from([6,26,50,74,98]),new P(28,new v(2,111),new v(7,112)),new P(28,new v(17,46)),new P(30,new v(7,24),new v(16,25)),new P(24,new v(34,13))),new ue(23,Int32Array.from([6,30,54,78,102]),new P(30,new v(4,121),new v(5,122)),new P(28,new v(4,47),new v(14,48)),new P(30,new v(11,24),new v(14,25)),new P(30,new v(16,15),new v(14,16))),new ue(24,Int32Array.from([6,28,54,80,106]),new P(30,new v(6,117),new v(4,118)),new P(28,new v(6,45),new v(14,46)),new P(30,new v(11,24),new v(16,25)),new P(30,new v(30,16),new v(2,17))),new ue(25,Int32Array.from([6,32,58,84,110]),new P(26,new v(8,106),new v(4,107)),new P(28,new v(8,47),new v(13,48)),new P(30,new v(7,24),new v(22,25)),new P(30,new v(22,15),new v(13,16))),new ue(26,Int32Array.from([6,30,58,86,114]),new P(28,new v(10,114),new v(2,115)),new P(28,new v(19,46),new v(4,47)),new P(28,new v(28,22),new v(6,23)),new P(30,new v(33,16),new v(4,17))),new ue(27,Int32Array.from([6,34,62,90,118]),new P(30,new v(8,122),new v(4,123)),new P(28,new v(22,45),new v(3,46)),new P(30,new v(8,23),new v(26,24)),new P(30,new v(12,15),new v(28,16))),new ue(28,Int32Array.from([6,26,50,74,98,122]),new P(30,new v(3,117),new v(10,118)),new P(28,new v(3,45),new v(23,46)),new P(30,new v(4,24),new v(31,25)),new P(30,new v(11,15),new v(31,16))),new ue(29,Int32Array.from([6,30,54,78,102,126]),new P(30,new v(7,116),new v(7,117)),new P(28,new v(21,45),new v(7,46)),new P(30,new v(1,23),new v(37,24)),new P(30,new v(19,15),new v(26,16))),new ue(30,Int32Array.from([6,26,52,78,104,130]),new P(30,new v(5,115),new v(10,116)),new P(28,new v(19,47),new v(10,48)),new P(30,new v(15,24),new v(25,25)),new P(30,new v(23,15),new v(25,16))),new ue(31,Int32Array.from([6,30,56,82,108,134]),new P(30,new v(13,115),new v(3,116)),new P(28,new v(2,46),new v(29,47)),new P(30,new v(42,24),new v(1,25)),new P(30,new v(23,15),new v(28,16))),new ue(32,Int32Array.from([6,34,60,86,112,138]),new P(30,new v(17,115)),new P(28,new v(10,46),new v(23,47)),new P(30,new v(10,24),new v(35,25)),new P(30,new v(19,15),new v(35,16))),new ue(33,Int32Array.from([6,30,58,86,114,142]),new P(30,new v(17,115),new v(1,116)),new P(28,new v(14,46),new v(21,47)),new P(30,new v(29,24),new v(19,25)),new P(30,new v(11,15),new v(46,16))),new ue(34,Int32Array.from([6,34,62,90,118,146]),new P(30,new v(13,115),new v(6,116)),new P(28,new v(14,46),new v(23,47)),new P(30,new v(44,24),new v(7,25)),new P(30,new v(59,16),new v(1,17))),new ue(35,Int32Array.from([6,30,54,78,102,126,150]),new P(30,new v(12,121),new v(7,122)),new P(28,new v(12,47),new v(26,48)),new P(30,new v(39,24),new v(14,25)),new P(30,new v(22,15),new v(41,16))),new ue(36,Int32Array.from([6,24,50,76,102,128,154]),new P(30,new v(6,121),new v(14,122)),new P(28,new v(6,47),new v(34,48)),new P(30,new v(46,24),new v(10,25)),new P(30,new v(2,15),new v(64,16))),new ue(37,Int32Array.from([6,28,54,80,106,132,158]),new P(30,new v(17,122),new v(4,123)),new P(28,new v(29,46),new v(14,47)),new P(30,new v(49,24),new v(10,25)),new P(30,new v(24,15),new v(46,16))),new ue(38,Int32Array.from([6,32,58,84,110,136,162]),new P(30,new v(4,122),new v(18,123)),new P(28,new v(13,46),new v(32,47)),new P(30,new v(48,24),new v(14,25)),new P(30,new v(42,15),new v(32,16))),new ue(39,Int32Array.from([6,26,54,82,110,138,166]),new P(30,new v(20,117),new v(4,118)),new P(28,new v(40,47),new v(7,48)),new P(30,new v(43,24),new v(22,25)),new P(30,new v(10,15),new v(67,16))),new ue(40,Int32Array.from([6,30,58,86,114,142,170]),new P(30,new v(19,118),new v(6,119)),new P(28,new v(18,47),new v(31,48)),new P(30,new v(34,24),new v(34,25)),new P(30,new v(20,15),new v(61,16)))];var bt;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(bt||(bt={}));class Mn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let l=0;l<s;l++)this.isMasked(o,l)&&r.flip(l,o)}}Mn.values=new Map([[bt.DATA_MASK_000,new Mn(bt.DATA_MASK_000,(_,r)=>(_+r&1)===0)],[bt.DATA_MASK_001,new Mn(bt.DATA_MASK_001,(_,r)=>(_&1)===0)],[bt.DATA_MASK_010,new Mn(bt.DATA_MASK_010,(_,r)=>r%3===0)],[bt.DATA_MASK_011,new Mn(bt.DATA_MASK_011,(_,r)=>(_+r)%3===0)],[bt.DATA_MASK_100,new Mn(bt.DATA_MASK_100,(_,r)=>(Math.floor(_/2)+Math.floor(r/3)&1)===0)],[bt.DATA_MASK_101,new Mn(bt.DATA_MASK_101,(_,r)=>_*r%6===0)],[bt.DATA_MASK_110,new Mn(bt.DATA_MASK_110,(_,r)=>_*r%6<3)],[bt.DATA_MASK_111,new Mn(bt.DATA_MASK_111,(_,r)=>(_+r+_*r%3&1)===0)]]);class dx{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new L;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let o=0;const l=s-7;for(let u=s-1;u>=l;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=Gt.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return ue.getVersionForNumber(s);let o=0;const l=r-11;for(let f=5;f>=0;f--)for(let h=r-9;h>=l;h--)o=this.copyBit(h,f,o);let u=ue.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let f=5;f>=0;f--)for(let h=r-9;h>=l;h--)o=this.copyBit(f,h,o);if(u=ue.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new L}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=Mn.values.get(r.getDataMask()),l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l);const u=s.buildFunctionPattern();let f=!0;const h=new Uint8Array(s.getTotalCodewords());let g=0,p=0,w=0;for(let C=l-1;C>0;C-=2){C===6&&C--;for(let S=0;S<l;S++){const T=f?l-1-S:S;for(let R=0;R<2;R++)u.get(C-R,T)||(w++,p<<=1,this.bitMatrix.get(C-R,T)&&(p|=1),w===8&&(h[g++]=p,w=0,p=0))}f=!f}if(g!==s.getTotalCodewords())throw new L;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Mn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let l=s+1,u=r.getHeight();l<u;l++)r.get(s,l)!==r.get(l,s)&&(r.flip(l,s),r.flip(s,l))}}class kc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new E;const l=s.getECBlocksForLevel(o);let u=0;const f=l.getECBlocks();for(const R of f)u+=R.getCount();const h=new Array(u);let g=0;for(const R of f)for(let M=0;M<R.getCount();M++){const k=R.getDataCodewords(),z=l.getECCodewordsPerBlock()+k;h[g++]=new kc(k,new Uint8Array(z))}const p=h[0].codewords.length;let w=h.length-1;for(;w>=0&&h[w].codewords.length!==p;)w--;w++;const C=p-l.getECCodewordsPerBlock();let S=0;for(let R=0;R<C;R++)for(let M=0;M<g;M++)h[M].codewords[R]=r[S++];for(let R=w;R<g;R++)h[R].codewords[C]=r[S++];const T=h[0].codewords.length;for(let R=C;R<T;R++)for(let M=0;M<g;M++){const k=M<w?R:R+1;h[M].codewords[k]=r[S++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var On;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(On||(On={}));class fe{constructor(r,s,o,l){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=l,fe.FOR_BITS.set(l,this),fe.FOR_VALUE.set(r,this)}static forBits(r){const s=fe.FOR_BITS.get(r);if(s===void 0)throw new E;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof fe))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}fe.FOR_BITS=new Map,fe.FOR_VALUE=new Map,fe.TERMINATOR=new fe(On.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),fe.NUMERIC=new fe(On.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),fe.ALPHANUMERIC=new fe(On.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),fe.STRUCTURED_APPEND=new fe(On.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),fe.BYTE=new fe(On.BYTE,"BYTE",Int32Array.from([8,16,16]),4),fe.ECI=new fe(On.ECI,"ECI",Int32Array.from([0,0,0]),7),fe.KANJI=new fe(On.KANJI,"KANJI",Int32Array.from([8,10,12]),8),fe.FNC1_FIRST_POSITION=new fe(On.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),fe.FNC1_SECOND_POSITION=new fe(On.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),fe.HANZI=new fe(On.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class at{static decode(r,s,o,l){const u=new Dc(r);let f=new ye;const h=new Array;let g=-1,p=-1;try{let w=null,C=!1,S;do{if(u.available()<4)S=fe.TERMINATOR;else{const T=u.readBits(4);S=fe.forBits(T)}switch(S){case fe.TERMINATOR:break;case fe.FNC1_FIRST_POSITION:case fe.FNC1_SECOND_POSITION:C=!0;break;case fe.STRUCTURED_APPEND:if(u.available()<16)throw new L;g=u.readBits(8),p=u.readBits(8);break;case fe.ECI:const T=at.parseECIValue(u);if(w=V.getCharacterSetECIByValue(T),w===null)throw new L;break;case fe.HANZI:const R=u.readBits(4),M=u.readBits(S.getCharacterCountBits(s));R===at.GB2312_SUBSET&&at.decodeHanziSegment(u,f,M);break;default:const k=u.readBits(S.getCharacterCountBits(s));switch(S){case fe.NUMERIC:at.decodeNumericSegment(u,f,k);break;case fe.ALPHANUMERIC:at.decodeAlphanumericSegment(u,f,k,C);break;case fe.BYTE:at.decodeByteSegment(u,f,k,w,h,l);break;case fe.KANJI:at.decodeKanjiSegment(u,f,k);break;default:throw new L}break}}while(S!==fe.TERMINATOR)}catch{throw new L}return new Gs(r,f.toString(),h.length===0?null:h,o===null?null:o.toString(),g,p)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new L;const l=new Uint8Array(2*o);let u=0;for(;o>0;){const f=r.readBits(13);let h=f/96<<8&4294967295|f%96;h<959?h+=41377:h+=42657,l[u]=h>>8&255,l[u+1]=h&255,u+=2,o--}try{s.append(Ee.decode(l,re.GB2312))}catch(f){throw new L(f)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new L;const l=new Uint8Array(2*o);let u=0;for(;o>0;){const f=r.readBits(13);let h=f/192<<8&4294967295|f%192;h<7936?h+=33088:h+=49472,l[u]=h>>8,l[u+1]=h,u+=2,o--}try{s.append(Ee.decode(l,re.SHIFT_JIS))}catch(f){throw new L(f)}}static decodeByteSegment(r,s,o,l,u,f){if(8*o>r.available())throw new L;const h=new Uint8Array(o);for(let p=0;p<o;p++)h[p]=r.readBits(8);let g;l===null?g=re.guessEncoding(h,f):g=l.getName();try{s.append(Ee.decode(h,g))}catch(p){throw new L(p)}u.push(h)}static toAlphaNumericChar(r){if(r>=at.ALPHANUMERIC_CHARS.length)throw new L;return at.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,l){const u=s.length();for(;o>1;){if(r.available()<11)throw new L;const f=r.readBits(11);s.append(at.toAlphaNumericChar(Math.floor(f/45))),s.append(at.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(r.available()<6)throw new L;s.append(at.toAlphaNumericChar(r.readBits(6)))}if(l)for(let f=u;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new L;const l=r.readBits(10);if(l>=1e3)throw new L;s.append(at.toAlphaNumericChar(Math.floor(l/100))),s.append(at.toAlphaNumericChar(Math.floor(l/10)%10)),s.append(at.toAlphaNumericChar(l%10)),o-=3}if(o===2){if(r.available()<7)throw new L;const l=r.readBits(7);if(l>=100)throw new L;s.append(at.toAlphaNumericChar(Math.floor(l/10))),s.append(at.toAlphaNumericChar(l%10))}else if(o===1){if(r.available()<4)throw new L;const l=r.readBits(4);if(l>=10)throw new L;s.append(at.toAlphaNumericChar(l))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new L}}at.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",at.GB2312_SUBSET=1;class Rd{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class gx{constructor(){this.rsDecoder=new Xs(De.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Be.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new dx(r);let l=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){l=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new Rd(!0)),u}catch(u){throw l!==null?l:u}}decodeBitMatrixParser(r,s){const o=r.readVersion(),l=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),f=kc.getDataBlocks(u,o,l);let h=0;for(const w of f)h+=w.getNumDataCodewords();const g=new Uint8Array(h);let p=0;for(const w of f){const C=w.getCodewords(),S=w.getNumDataCodewords();this.correctErrors(C,S);for(let T=0;T<S;T++)g[p++]=C[T]}return at.decode(g,o,l,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new D}for(let l=0;l<s;l++)r[l]=o[l]}}class Lc extends ae{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=(this.getX()+s)/2,u=(this.getY()+r)/2,f=(this.estimatedModuleSize+o)/2;return new Lc(l,u,f)}}class va{constructor(r,s,o,l,u,f,h){this.image=r,this.startX=s,this.startY=o,this.width=l,this.height=u,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,l=r+o,u=this.startY+s/2,f=new Int32Array(3),h=this.image;for(let g=0;g<s;g++){const p=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=r;for(;w<l&&!h.get(w,p);)w++;let C=0;for(;w<l;){if(h.get(w,p))if(C===1)f[1]++;else if(C===2){if(this.foundPatternCross(f)){const S=this.handlePossibleCenter(f,p,w);if(S!==null)return S}f[0]=f[2],f[1]=1,f[2]=0,C=1}else f[++C]++;else C===1&&C++,f[C]++;w++}if(this.foundPatternCross(f)){const S=this.handlePossibleCenter(f,p,l);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let l=0;l<3;l++)if(Math.abs(s-r[l])>=o)return!1;return!0}crossCheckVertical(r,s,o,l){const u=this.image,f=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=r;for(;g>=0&&u.get(s,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&!u.get(s,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&u.get(s,g)&&h[1]<=o;)h[1]++,g++;if(g===f||h[1]>o)return NaN;for(;g<f&&!u.get(s,g)&&h[2]<=o;)h[2]++,g++;if(h[2]>o)return NaN;const p=h[0]+h[1]+h[2];return 5*Math.abs(p-l)>=2*l?NaN:this.foundPatternCross(h)?va.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,o){const l=r[0]+r[1]+r[2],u=va.centerFromEnd(r,o),f=this.crossCheckVertical(s,u,2*r[1],l);if(!isNaN(f)){const h=(r[0]+r[1]+r[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(h,f,u))return p.combineEstimate(f,u,h);const g=new Lc(u,f,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Pc extends ae{constructor(r,s,o,l){super(r,s),this.estimatedModuleSize=o,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=this.count+1,u=(this.count*this.getX()+s)/l,f=(this.count*this.getY()+r)/l,h=(this.count*this.estimatedModuleSize+o)/l;return new Pc(u,f,h,l)}}class px{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Rt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(q.TRY_HARDER)!==void 0,o=r!=null&&r.get(q.PURE_BARCODE)!==void 0,l=this.image,u=l.getHeight(),f=l.getWidth();let h=Math.floor(3*u/(4*Rt.MAX_MODULES));(h<Rt.MIN_SKIP||s)&&(h=Rt.MIN_SKIP);let g=!1;const p=new Int32Array(5);for(let C=h-1;C<u&&!g;C+=h){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let S=0;for(let T=0;T<f;T++)if(l.get(T,C))(S&1)===1&&S++,p[S]++;else if(S&1)p[S]++;else if(S===4)if(Rt.foundPatternCross(p)){if(this.handlePossibleCenter(p,C,T,o)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const M=this.findRowSkip();M>p[2]&&(C+=M-p[2]-h,T=f-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;continue}S=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;else p[++S]++;Rt.foundPatternCross(p)&&this.handlePossibleCenter(p,C,f,o)===!0&&(h=p[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const w=this.selectBestPatterns();return ae.orderBestPatterns(w),new px(w)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const f=r[u];if(f===0)return!1;s+=f}if(s<7)return!1;const o=s/7,l=o/2;return Math.abs(o-r[0])<l&&Math.abs(o-r[1])<l&&Math.abs(3*o-r[2])<3*l&&Math.abs(o-r[3])<l&&Math.abs(o-r[4])<l}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,l){const u=this.getCrossCheckStateCount();let f=0;const h=this.image;for(;r>=f&&s>=f&&h.get(s-f,r-f);)u[2]++,f++;if(r<f||s<f)return!1;for(;r>=f&&s>=f&&!h.get(s-f,r-f)&&u[1]<=o;)u[1]++,f++;if(r<f||s<f||u[1]>o)return!1;for(;r>=f&&s>=f&&h.get(s-f,r-f)&&u[0]<=o;)u[0]++,f++;if(u[0]>o)return!1;const g=h.getHeight(),p=h.getWidth();for(f=1;r+f<g&&s+f<p&&h.get(s+f,r+f);)u[2]++,f++;if(r+f>=g||s+f>=p)return!1;for(;r+f<g&&s+f<p&&!h.get(s+f,r+f)&&u[3]<o;)u[3]++,f++;if(r+f>=g||s+f>=p||u[3]>=o)return!1;for(;r+f<g&&s+f<p&&h.get(s+f,r+f)&&u[4]<o;)u[4]++,f++;if(u[4]>=o)return!1;const w=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(w-l)<2*l&&Rt.foundPatternCross(u)}crossCheckVertical(r,s,o,l){const u=this.image,f=u.getHeight(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(s,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(s,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&u.get(s,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&u.get(s,g);)h[2]++,g++;if(g===f)return NaN;for(;g<f&&!u.get(s,g)&&h[3]<o;)h[3]++,g++;if(g===f||h[3]>=o)return NaN;for(;g<f&&u.get(s,g)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-l)>=2*l?NaN:Rt.foundPatternCross(h)?Rt.centerFromEnd(h,g):NaN}crossCheckHorizontal(r,s,o,l){const u=this.image,f=u.getWidth(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(g,s);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,s)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&u.get(g,s)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&u.get(g,s);)h[2]++,g++;if(g===f)return NaN;for(;g<f&&!u.get(g,s)&&h[3]<o;)h[3]++,g++;if(g===f||h[3]>=o)return NaN;for(;g<f&&u.get(g,s)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-l)>=l?NaN:Rt.foundPatternCross(h)?Rt.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,o,l){const u=r[0]+r[1]+r[2]+r[3]+r[4];let f=Rt.centerFromEnd(r,o),h=this.crossCheckVertical(s,Math.floor(f),r[2],u);if(!isNaN(h)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(h),r[2],u),!isNaN(f)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(f),r[2],u)))){const g=u/7;let p=!1;const w=this.possibleCenters;for(let C=0,S=w.length;C<S;C++){const T=w[C];if(T.aboutEquals(g,h,f)){w[C]=T.combineEstimate(h,f,g),p=!0;break}}if(!p){const C=new Pc(f,h,g);w.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Rt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Rt.CENTER_QUORUM&&(r++,s+=f.getEstimatedModuleSize());if(r<3)return!1;const l=s/o;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-l);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new j;const s=this.possibleCenters;let o;if(r>3){let l=0,u=0;for(const g of this.possibleCenters){const p=g.getEstimatedModuleSize();l+=p,u+=p*p}o=l/r;let f=Math.sqrt(u/r-o*o);s.sort((g,p)=>{const w=Math.abs(p.getEstimatedModuleSize()-o),C=Math.abs(g.getEstimatedModuleSize()-o);return w<C?-1:w>C?1:0});const h=Math.max(.2*o,f);for(let g=0;g<s.length&&s.length>3;g++){const p=s[g];Math.abs(p.getEstimatedModuleSize()-o)>h&&(s.splice(g,1),g--)}}if(s.length>3){let l=0;for(const u of s)l+=u.getEstimatedModuleSize();o=l/s.length,s.sort((u,f)=>{if(f.getCount()===u.getCount()){const h=Math.abs(f.getEstimatedModuleSize()-o),g=Math.abs(u.getEstimatedModuleSize()-o);return h<g?1:h>g?-1:0}else return f.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Rt.CENTER_QUORUM=2,Rt.MIN_SKIP=3,Rt.MAX_MODULES=57;class Ks{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(q.NEED_RESULT_POINT_CALLBACK);const o=new Rt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),l=r.getBottomLeft(),u=this.calculateModuleSize(s,o,l);if(u<1)throw new j("No pattern found in proccess finder.");const f=Ks.computeDimension(s,o,l,u),h=ue.getProvisionalVersionForDimension(f),g=h.getDimensionForVersion()-7;let p=null;if(h.getAlignmentPatternCenters().length>0){const T=o.getX()-s.getX()+l.getX(),R=o.getY()-s.getY()+l.getY(),M=1-3/g,k=Math.floor(s.getX()+M*(T-s.getX())),z=Math.floor(s.getY()+M*(R-s.getY()));for(let K=4;K<=16;K<<=1)try{p=this.findAlignmentInRegion(u,k,z,K);break}catch(Z){if(!(Z instanceof j))throw Z}}const w=Ks.createTransform(s,o,l,p,f),C=Ks.sampleGrid(this.image,w,f);let S;return p===null?S=[l,s,o]:S=[l,s,o,p],new Ca(C,S)}static createTransform(r,s,o,l,u){const f=u-3.5;let h,g,p,w;return l!==null?(h=l.getX(),g=l.getY(),p=f-3,w=p):(h=s.getX()-r.getX()+o.getX(),g=s.getY()-r.getY()+o.getY(),p=f,w=f),zn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,p,w,3.5,f,r.getX(),r.getY(),s.getX(),s.getY(),h,g,o.getX(),o.getY())}static sampleGrid(r,s,o){return kr.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,l){const u=Re.round(ae.distance(r,s)/l),f=Re.round(ae.distance(r,o)/l);let h=Math.floor((u+f)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new j("Dimensions could be not found.")}return h}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?l/7:isNaN(l)?o/7:(o+l)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,l){let u=this.sizeOfBlackWhiteBlackRun(r,s,o,l),f=1,h=r-(o-r);h<0?(f=r/(r-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let g=Math.floor(s-(l-s)*f);return f=1,g<0?(f=s/(s-g),g=0):g>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(g-s),g=this.image.getHeight()-1),h=Math.floor(r+(h-r)*f),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,g),u-1}sizeOfBlackWhiteBlackRun(r,s,o,l){const u=Math.abs(l-s)>Math.abs(o-r);if(u){let T=r;r=s,s=T,T=o,o=l,l=T}const f=Math.abs(o-r),h=Math.abs(l-s);let g=-f/2;const p=r<o?1:-1,w=s<l?1:-1;let C=0;const S=o+p;for(let T=r,R=s;T!==S;T+=p){const M=u?R:T,k=u?T:R;if(C===1===this.image.get(M,k)){if(C===2)return Re.distance(T,R,r,s);C++}if(g+=h,g>0){if(R===l)break;R+=w,g-=f}}return C===2?Re.distance(o+p,l,r,s):NaN}findAlignmentInRegion(r,s,o,l){const u=Math.floor(l*r),f=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-f<r*3)throw new j("Alignment top exceeds estimated module size.");const g=Math.max(0,o-u),p=Math.min(this.image.getHeight()-1,o+u);if(p-g<r*3)throw new j("Alignment bottom exceeds estimated module size.");return new va(this.image,f,g,h-f,p-g,r,this.resultPointCallback).find()}}class Fr{constructor(){this.decoder=new gx}getDecoder(){return this.decoder}decode(r,s){let o,l;if(s!=null&&s.get(q.PURE_BARCODE)!==void 0){const g=Fr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(g,s),l=Fr.NO_POINTS}else{const g=new Ks(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(g.getBits(),s),l=g.getPoints()}o.getOther()instanceof Rd&&o.getOther().applyMirroredCorrection(l);const u=new ot(o.getText(),o.getRawBytes(),void 0,l,ce.QR_CODE,void 0),f=o.getByteSegments();f!==null&&u.putMetadata(Nt.BYTE_SEGMENTS,f);const h=o.getECLevel();return h!==null&&u.putMetadata(Nt.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(u.putMetadata(Nt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Nt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new j;const l=this.moduleSize(s,r);let u=s[1],f=o[1],h=s[0],g=o[0];if(h>=g||u>=f)throw new j;if(f-u!==g-h&&(g=h+(f-u),g>=r.getWidth()))throw new j;const p=Math.round((g-h+1)/l),w=Math.round((f-u+1)/l);if(p<=0||w<=0)throw new j;if(w!==p)throw new j;const C=Math.floor(l/2);u+=C,h+=C;const S=h+Math.floor((p-1)*l)-g;if(S>0){if(S>C)throw new j;h-=S}const T=u+Math.floor((w-1)*l)-f;if(T>0){if(T>C)throw new j;u-=T}const R=new Be(p,w);for(let M=0;M<w;M++){const k=u+Math.floor(M*l);for(let z=0;z<p;z++)r.get(h+Math.floor(z*l),k)&&R.set(z,M)}return R}static moduleSize(r,s){const o=s.getHeight(),l=s.getWidth();let u=r[0],f=r[1],h=!0,g=0;for(;u<l&&f<o;){if(h!==s.get(u,f)){if(++g===5)break;h=!h}u++,f++}if(u===l||f===o)throw new j;return(u-r[0])/7}}Fr.NO_POINTS=new Array;class ge{PDF417Common(){}static getBitCountSum(r){return Re.sum(r)}static toIntArray(r){if(r==null||!r.length)return ge.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const l of r)s[o++]=l;return s}static getCodeword(r){const s=N.binarySearch(ge.SYMBOL_TABLE,r&262143);return s<0?-1:(ge.CODEWORD_TABLE[s]-1)%ge.NUMBER_OF_CODEWORDS}}ge.NUMBER_OF_CODEWORDS=929,ge.MAX_CODEWORDS_IN_BARCODE=ge.NUMBER_OF_CODEWORDS-1,ge.MIN_ROWS_IN_BARCODE=3,ge.MAX_ROWS_IN_BARCODE=90,ge.MODULES_IN_CODEWORD=17,ge.MODULES_IN_STOP_PATTERN=18,ge.BARS_IN_MODULE=8,ge.EMPTY_INT_ARRAY=new Int32Array([]),ge.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ge.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class mx{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class _e{static detectMultiple(r,s,o){let l=r.getBlackMatrix(),u=_e.detect(o,l);return u.length||(l=l.clone(),l.rotate180(),u=_e.detect(o,l)),new mx(l,u)}static detect(r,s){const o=new Array;let l=0,u=0,f=!1;for(;l<s.getHeight();){const h=_e.findVertices(s,l,u);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,u=0;for(const g of o)g[1]!=null&&(l=Math.trunc(Math.max(l,g[1].getY()))),g[3]!=null&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=_e.ROW_STEP;continue}if(f=!0,o.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return o}static findVertices(r,s,o){const l=r.getHeight(),u=r.getWidth(),f=new Array(8);return _e.copyToResult(f,_e.findRowsWithPattern(r,l,u,s,o,_e.START_PATTERN),_e.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),_e.copyToResult(f,_e.findRowsWithPattern(r,l,u,s,o,_e.STOP_PATTERN),_e.INDEXES_STOP_PATTERN),f}static copyToResult(r,s,o){for(let l=0;l<o.length;l++)r[o[l]]=s[l]}static findRowsWithPattern(r,s,o,l,u,f){const h=new Array(4);let g=!1;const p=new Int32Array(f.length);for(;l<s;l+=_e.ROW_STEP){let C=_e.findGuardPattern(r,u,l,o,!1,f,p);if(C!=null){for(;l>0;){const S=_e.findGuardPattern(r,u,--l,o,!1,f,p);if(S!=null)C=S;else{l++;break}}h[0]=new ae(C[0],l),h[1]=new ae(C[1],l),g=!0;break}}let w=l+1;if(g){let C=0,S=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;w<s;w++){const T=_e.findGuardPattern(r,S[0],w,o,!1,f,p);if(T!=null&&Math.abs(S[0]-T[0])<_e.MAX_PATTERN_DRIFT&&Math.abs(S[1]-T[1])<_e.MAX_PATTERN_DRIFT)S=T,C=0;else{if(C>_e.SKIPPED_ROW_COUNT_MAX)break;C++}}w-=C+1,h[2]=new ae(S[0],w),h[3]=new ae(S[1],w)}return w-l<_e.BARCODE_MIN_HEIGHT&&N.fill(h,null),h}static findGuardPattern(r,s,o,l,u,f,h){N.fillWithin(h,0,h.length,0);let g=s,p=0;for(;r.get(g,o)&&g>0&&p++<_e.MAX_PIXEL_DRIFT;)g--;let w=g,C=0,S=f.length;for(let T=u;w<l;w++)if(r.get(w,o)!==T)h[C]++;else{if(C===S-1){if(_e.patternMatchVariance(h,f,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return new Int32Array([g,w]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,T=!T}return C===S-1&&_e.patternMatchVariance(h,f,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE?new Int32Array([g,w-1]):null}static patternMatchVariance(r,s,o){let l=r.length,u=0,f=0;for(let p=0;p<l;p++)u+=r[p],f+=s[p];if(u<f)return 1/0;let h=u/f;o*=h;let g=0;for(let p=0;p<l;p++){let w=r[p],C=s[p]*h,S=w>C?w-C:C-w;if(S>o)return 1/0;g+=S}return g/u}}_e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),_e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),_e.MAX_AVG_VARIANCE=.42,_e.MAX_INDIVIDUAL_VARIANCE=.8,_e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),_e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),_e.MAX_PIXEL_DRIFT=3,_e.MAX_PATTERN_DRIFT=5,_e.SKIPPED_ROW_COUNT_MAX=25,_e.ROW_STEP=5,_e.BARCODE_MIN_HEIGHT=10;class Bt{constructor(r,s){if(s.length===0)throw new E;this.field=r;let o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-l),B.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let s=this.coefficients[0],o=this.coefficients.length;for(let l=1;l<o;l++)s=this.field.add(this.field.multiply(r,s),this.coefficients[l]);return s}add(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let f=s;s=o,o=f}let l=new Int32Array(o.length),u=o.length-s.length;B.arraycopy(o,0,l,0,u);for(let f=u;f<o.length;f++)l[f]=this.field.add(s[f-u],o[f]);return new Bt(this.field,l)}subtract(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Bt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Bt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,l=r.coefficients,u=l.length,f=new Int32Array(o+u-1);for(let h=0;h<o;h++){let g=s[h];for(let p=0;p<u;p++)f[h+p]=this.field.add(f[h+p],this.field.multiply(g,l[p]))}return new Bt(this.field,f)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new Bt(this.field,s)}multiplyScalar(r){if(r===0)return new Bt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.multiply(this.coefficients[l],r);return new Bt(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return new Bt(this.field,new Int32Array([0]));let o=this.coefficients.length,l=new Int32Array(o+r);for(let u=0;u<o;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new Bt(this.field,l)}toString(){let r=new ye;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class xx{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}inverse(r){if(r===0)throw new wa;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Bc extends xx{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let l=0;l<r;l++)this.expTable[l]=o,o=o*s%r;for(let l=0;l<r-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Bt(this,new Int32Array([0])),this.one=new Bt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new Bt(this,o)}}Bc.PDF417_GF=new Bc(ge.NUMBER_OF_CODEWORDS,3);class Md{constructor(){this.field=Bc.PDF417_GF}decode(r,s,o){let l=new Bt(this.field,r),u=new Int32Array(s),f=!1;for(let R=s;R>0;R--){let M=l.evaluateAt(this.field.exp(R));u[s-R]=M,M!==0&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(o!=null)for(const R of o){let M=this.field.exp(r.length-1-R),k=new Bt(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(k)}let g=new Bt(this.field,u),p=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),g,s),w=p[0],C=p[1],S=this.findErrorLocations(w),T=this.findErrorMagnitudes(C,w,S);for(let R=0;R<S.length;R++){let M=r.length-1-this.field.log(S[R]);if(M<0)throw D.getChecksumInstance();r[M]=this.field.subtract(r[M],T[R])}return S.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let S=r;r=s,s=S}let l=r,u=s,f=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let S=l,T=f;if(l=u,f=h,l.isZero())throw D.getChecksumInstance();u=S;let R=this.field.getZero(),M=l.getCoefficient(l.getDegree()),k=this.field.inverse(M);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let z=u.getDegree()-l.getDegree(),K=this.field.multiply(u.getCoefficient(u.getDegree()),k);R=R.add(this.field.buildMonomial(z,K)),u=u.subtract(l.multiplyByMonomial(z,K))}h=R.multiply(f).subtract(T).negative()}let g=h.getCoefficient(0);if(g===0)throw D.getChecksumInstance();let p=this.field.inverse(g),w=h.multiply(p),C=u.multiply(p);return[w,C]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),l=0;for(let u=1;u<this.field.getSize()&&l<s;u++)r.evaluateAt(u)===0&&(o[l]=this.field.inverse(u),l++);if(l!==s)throw D.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let l=s.getDegree(),u=new Int32Array(l);for(let p=1;p<=l;p++)u[l-p]=this.field.multiply(p,s.getCoefficient(p));let f=new Bt(this.field,u),h=o.length,g=new Int32Array(h);for(let p=0;p<h;p++){let w=this.field.inverse(o[p]),C=this.field.subtract(0,r.evaluateAt(w)),S=this.field.inverse(f.evaluateAt(w));g[p]=this.field.multiply(C,S)}return g}}class wi{constructor(r,s,o,l,u){r instanceof wi?this.constructor_2(r):this.constructor_1(r,s,o,l,u)}constructor_1(r,s,o,l,u){const f=s==null||o==null,h=l==null||u==null;if(f&&h)throw new j;f?(s=new ae(0,l.getY()),o=new ae(0,u.getY())):h&&(l=new ae(r.getWidth()-1,s.getY()),u=new ae(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),l.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new wi(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let l=this.topLeft,u=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(r>0){let g=o?this.topLeft:this.topRight,p=Math.trunc(g.getY()-r);p<0&&(p=0);let w=new ae(g.getX(),p);o?l=w:f=w}if(s>0){let g=o?this.bottomLeft:this.bottomRight,p=Math.trunc(g.getY()+s);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let w=new ae(g.getX(),p);o?u=w:h=w}return new wi(this.image,l,u,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class yx{constructor(r,s,o,l){this.columnCount=r,this.errorCorrectionLevel=l,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zs{constructor(){this.buffer=""}static form(r,s){let o=-1;function l(f,h,g,p,w,C){if(f==="%%")return"%";if(s[++o]===void 0)return;f=p?parseInt(p.substr(1)):void 0;let S=w?parseInt(w.substr(1)):void 0,T;switch(C){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(S||16);break;case"d":T=parseFloat(parseInt(s[o],S||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let R=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<R;)T=h!==void 0?T+M:M+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,l)}format(r,...s){this.buffer+=Zs.form(r,s)}toString(){return this.buffer}}class qs{constructor(r){this.boundingBox=new wi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<qs.MAX_NEARBY_DISTANCE;o++){let l=this.imageRowToCodewordIndex(r)-o;if(l>=0&&(s=this.codewords[l],s!=null)||(l=this.imageRowToCodewordIndex(r)+o,l<this.codewords.length&&(s=this.codewords[l],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Zs;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}qs.MAX_NEARBY_DISTANCE=5;class $s{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,l]of this.values.entries()){const u={getKey:()=>o,getValue:()=>l};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return ge.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Od extends qs{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,p=1,w=0;for(let C=f;C<h;C++){if(s[C]==null)continue;let S=s[C],T=S.getRowNumber()-g;if(T===0)w++;else if(T===1)p=Math.max(p,w),w=1,g=S.getRowNumber();else if(T<0||S.getRowNumber()>=r.getRowCount()||T>C)s[C]=null;else{let R;p>2?R=(p-2)*T:R=T;let M=R>=C;for(let k=1;k<=R&&!M;k++)M=s[C-k]!=null;M?s[C]=null:(g=S.getRowNumber(),w=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let l=o.getRowNumber();if(l>=s.length)continue;s[l]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),g=-1;for(let p=u;p<f;p++){if(h[p]==null)continue;let w=h[p];w.setRowNumberAsRowIndicatorColumn();let C=w.getRowNumber()-g;C===0||(C===1?g=w.getRowNumber():w.getRowNumber()>=r.getRowCount()?h[p]=null:g=w.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new $s,o=new $s,l=new $s,u=new $s;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(g*3+1);break;case 1:u.setValue(g/3),l.setValue(g%3);break;case 2:s.setValue(g+1);break}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;let f=new yx(s.getValue()[0],o.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,f),f}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let l=r[o];if(r[o]==null)continue;let u=l.getValue()%30,f=l.getRowNumber();if(f>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Js{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ge.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let l=0;l<o.length;l++)o[l]!=null&&(o[l].hasValidRowNumber()||this.adjustRowNumbers(s,l,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(u=Js.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(u=Js.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let l=o[s],u=this.detectionResultColumns[r-1].getCodewords(),f=u;this.detectionResultColumns[r+1]!=null&&(f=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=f[s],s>0&&(h[0]=o[s-1],h[4]=u[s-1],h[5]=f[s-1]),s>1&&(h[8]=o[s-2],h[10]=u[s-2],h[11]=f[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=u[s+1],h[7]=f[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=u[s+2],h[13]=f[s+2]);for(let g of h)if(Js.adjustRowNumber(l,g))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Zs;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[o];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class eo{constructor(r,s,o,l){this.rowNumber=eo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==eo.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}eo.BARCODE_ROW_UNKNOWN=-1;class an{static initialize(){for(let r=0;r<ge.SYMBOL_TABLE.length;r++){let s=ge.SYMBOL_TABLE[r],o=s&1;for(let l=0;l<ge.BARS_IN_MODULE;l++){let u=0;for(;(s&1)===o;)u+=1,s>>=1;o=s&1,an.RATIOS_TABLE[r]||(an.RATIOS_TABLE[r]=new Array(ge.BARS_IN_MODULE)),an.RATIOS_TABLE[r][ge.BARS_IN_MODULE-l-1]=Math.fround(u/ge.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=an.getDecodedCodewordValue(an.sampleBitCounts(r));return s!==-1?s:an.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Re.sum(r),o=new Int32Array(ge.BARS_IN_MODULE),l=0,u=0;for(let f=0;f<ge.MODULES_IN_CODEWORD;f++){let h=s/(2*ge.MODULES_IN_CODEWORD)+f*s/ge.MODULES_IN_CODEWORD;u+r[l]<=h&&(u+=r[l],l++),o[l]++}return o}static getDecodedCodewordValue(r){let s=an.getBitValue(r);return ge.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let l=0;l<r[o];l++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Re.sum(r),o=new Array(ge.BARS_IN_MODULE);if(s>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(r[f]/s);let l=_a.MAX_VALUE,u=-1;this.bSymbolTableReady||an.initialize();for(let f=0;f<an.RATIOS_TABLE.length;f++){let h=0,g=an.RATIOS_TABLE[f];for(let p=0;p<ge.BARS_IN_MODULE;p++){let w=Math.fround(g[p]-o[p]);if(h+=Math.fround(w*w),h>=l)break}h<l&&(l=h,u=ge.SYMBOL_TABLE[f])}return u}}an.bSymbolTableReady=!1,an.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(_=>new Array(ge.BARS_IN_MODULE));class Dd{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class kd{static parseLong(r,s=void 0){return parseInt(r,s)}}class Ld extends x{}Ld.kind="NullPointerException";class wx{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new Ld;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new te;if(o===0)return;for(let l=0;l<o;l++)this.write(r[s+l])}flush(){}close(){}}class _x extends x{}class Cx extends wx{constructor(r=32){if(super(),this.count=0,r<0)throw new E("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new _x;o=b.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new te;this.ensureCapacity(this.count+o),B.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var je;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(je||(je={}));function Pd(){if(typeof window<"u")return window.BigInt||null;if(typeof ro<"u")return ro.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ta;function Ur(_){if(typeof Ta>"u"&&(Ta=Pd()),Ta===null)throw new Error("BigInt is not supported!");return Ta(_)}function Ex(){let _=[];_[0]=Ur(1);let r=Ur(900);_[1]=r;for(let s=2;s<16;s++)_[s]=_[s-1]*r;return _}class U{static decode(r,s){let o=new ye(""),l=V.ISO8859_1;o.enableDecoding(l);let u=1,f=r[u++],h=new Dd;for(;u<r[0];){switch(f){case U.TEXT_COMPACTION_MODE_LATCH:u=U.textCompaction(r,u,o);break;case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:u=U.byteCompaction(f,r,l,u,o);break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case U.NUMERIC_COMPACTION_MODE_LATCH:u=U.numericCompaction(r,u,o);break;case U.ECI_CHARSET:V.getCharacterSetECIByValue(r[u++]);break;case U.ECI_GENERAL_PURPOSE:u+=2;break;case U.ECI_USER_DEFINED:u++;break;case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=U.decodeMacroBlock(r,u,h);break;case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:throw new L;default:u--,u=U.textCompaction(r,u,o);break}if(u<r.length)f=r[u++];else throw L.getFormatInstance()}if(o.length()===0)throw L.getFormatInstance();let g=new Gs(null,o.toString(),null,s);return g.setOther(h),g}static decodeMacroBlock(r,s,o){if(s+U.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw L.getFormatInstance();let l=new Int32Array(U.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<U.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)l[h]=r[s];o.setSegmentIndex(b.parseInt(U.decodeBase900toBase10(l,U.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ye;s=U.textCompaction(r,s,u),o.setFileId(u.toString());let f=-1;for(r[s]===U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<r[0];)switch(r[s]){case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case U.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ye;s=U.textCompaction(r,s+1,h),o.setFileName(h.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new ye;s=U.textCompaction(r,s+1,g),o.setSender(g.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new ye;s=U.textCompaction(r,s+1,p),o.setAddressee(p.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new ye;s=U.numericCompaction(r,s+1,w),o.setSegmentCount(b.parseInt(w.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new ye;s=U.numericCompaction(r,s+1,C),o.setTimestamp(kd.parseLong(C.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new ye;s=U.numericCompaction(r,s+1,S),o.setChecksum(b.parseInt(S.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new ye;s=U.numericCompaction(r,s+1,T),o.setFileSize(kd.parseLong(T.toString()));break;default:throw L.getFormatInstance()}break;case U.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(f!==-1){let h=s-f;o.isLastSegment()&&h--,o.setOptionalData(N.copyOfRange(r,f,f+h))}return s}static textCompaction(r,s,o){let l=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),f=0,h=!1;for(;s<r[0]&&!h;){let g=r[s++];if(g<U.TEXT_COMPACTION_MODE_LATCH)l[f]=g/30,l[f+1]=g%30,f+=2;else switch(g){case U.TEXT_COMPACTION_MODE_LATCH:l[f++]=U.TEXT_COMPACTION_MODE_LATCH;break;case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[f]=U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=r[s++],u[f]=g,f++;break}}return U.decodeTextCompaction(l,u,f,o),s}static decodeTextCompaction(r,s,o,l){let u=je.ALPHA,f=je.ALPHA,h=0;for(;h<o;){let g=r[h],p="";switch(u){case je.ALPHA:if(g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case U.LL:u=je.LOWER;break;case U.ML:u=je.MIXED;break;case U.PS:f=u,u=je.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break;case je.LOWER:if(g<26)p=String.fromCharCode(97+g);else switch(g){case 26:p=" ";break;case U.AS:f=u,u=je.ALPHA_SHIFT;break;case U.ML:u=je.MIXED;break;case U.PS:f=u,u=je.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break;case je.MIXED:if(g<U.PL)p=U.MIXED_CHARS[g];else switch(g){case U.PL:u=je.PUNCT;break;case 26:p=" ";break;case U.LL:u=je.LOWER;break;case U.AL:u=je.ALPHA;break;case U.PS:f=u,u=je.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break;case je.PUNCT:if(g<U.PAL)p=U.PUNCT_CHARS[g];else switch(g){case U.PAL:u=je.ALPHA;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break;case je.ALPHA_SHIFT:if(u=f,g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break;case je.PUNCT_SHIFT:if(u=f,g<U.PAL)p=U.PUNCT_CHARS[g];else switch(g){case U.PAL:u=je.ALPHA;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case U.TEXT_COMPACTION_MODE_LATCH:u=je.ALPHA;break}break}p!==""&&l.append(p),h++}}static byteCompaction(r,s,o,l,u){let f=new Cx,h=0,g=0,p=!1;switch(r){case U.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),C=s[l++];for(;l<s[0]&&!p;)switch(w[h++]=C,g=900*g+C,C=s[l++],C){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:l--,p=!0;break;default:if(h%5===0&&h>0){for(let S=0;S<6;++S)f.write(Number(Ur(g)>>Ur(8*(5-S))));g=0,h=0}break}l===s[0]&&C<U.TEXT_COMPACTION_MODE_LATCH&&(w[h++]=C);for(let S=0;S<h;S++)f.write(w[S]);break;case U.BYTE_COMPACTION_MODE_LATCH_6:for(;l<s[0]&&!p;){let S=s[l++];if(S<U.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+S;else switch(S){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:l--,p=!0;break}if(h%5===0&&h>0){for(let T=0;T<6;++T)f.write(Number(Ur(g)>>Ur(8*(5-T))));g=0,h=0}}break}return u.append(Ee.decode(f.toByteArray(),o)),l}static numericCompaction(r,s,o){let l=0,u=!1,f=new Int32Array(U.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<U.TEXT_COMPACTION_MODE_LATCH)f[l]=h,l++;else switch(h){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(l%U.MAX_NUMERIC_CODEWORDS===0||h===U.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(o.append(U.decodeBase900toBase10(f,l)),l=0)}return s}static decodeBase900toBase10(r,s){let o=Ur(0);for(let u=0;u<s;u++)o+=U.EXP900[s-u-1]*Ur(r[u]);let l=o.toString();if(l.charAt(0)!=="1")throw new L;return l.substring(1)}}U.TEXT_COMPACTION_MODE_LATCH=900,U.BYTE_COMPACTION_MODE_LATCH=901,U.NUMERIC_COMPACTION_MODE_LATCH=902,U.BYTE_COMPACTION_MODE_LATCH_6=924,U.ECI_USER_DEFINED=925,U.ECI_GENERAL_PURPOSE=926,U.ECI_CHARSET=927,U.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,U.MACRO_PDF417_TERMINATOR=922,U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,U.MAX_NUMERIC_CODEWORDS=15,U.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,U.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,U.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,U.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,U.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,U.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,U.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,U.PL=25,U.LL=27,U.AS=27,U.ML=28,U.AL=28,U.PS=29,U.PAL=29,U.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,U.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",U.EXP900=Pd()?Ex():[],U.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ce{constructor(){}static decode(r,s,o,l,u,f,h){let g=new wi(r,s,o,l,u),p=null,w=null,C;for(let R=!0;;R=!1){if(s!=null&&(p=Ce.getRowIndicatorColumn(r,g,s,!0,f,h)),l!=null&&(w=Ce.getRowIndicatorColumn(r,g,l,!1,f,h)),C=Ce.merge(p,w),C==null)throw j.getNotFoundInstance();let M=C.getBoundingBox();if(R&&M!=null&&(M.getMinY()<g.getMinY()||M.getMaxY()>g.getMaxY()))g=M;else break}C.setBoundingBox(g);let S=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,p),C.setDetectionResultColumn(S,w);let T=p!=null;for(let R=1;R<=S;R++){let M=T?R:S-R;if(C.getDetectionResultColumn(M)!==void 0)continue;let k;M===0||M===S?k=new Od(g,M===0):k=new qs(g),C.setDetectionResultColumn(M,k);let z=-1,K=z;for(let Z=g.getMinY();Z<=g.getMaxY();Z++){if(z=Ce.getStartColumn(C,M,Z,T),z<0||z>g.getMaxX()){if(K===-1)continue;z=K}let X=Ce.detectCodeword(r,g.getMinX(),g.getMaxX(),T,z,Z,f,h);X!=null&&(k.setCodeword(Z,X),K=z,f=Math.min(f,X.getWidth()),h=Math.max(h,X.getWidth()))}}return Ce.createDecoderResult(C)}static merge(r,s){if(r==null&&s==null)return null;let o=Ce.getBarcodeMetadata(r,s);if(o==null)return null;let l=wi.merge(Ce.adjustBoundingBox(r),Ce.adjustBoundingBox(s));return new Js(o,l)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=Ce.getMax(s),l=0;for(let h of s)if(l+=o-h,h>0)break;let u=r.getCodewords();for(let h=0;l>0&&u[h]==null;h++)l--;let f=0;for(let h=s.length-1;h>=0&&(f+=o-s[h],!(s[h]>0));h--);for(let h=u.length-1;f>0&&u[h]==null;h--)f--;return r.getBoundingBox().addMissingRows(l,f,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let l;return s==null||(l=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==l.getColumnCount()&&o.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&o.getRowCount()!==l.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,l,u,f){let h=new Od(s,l);for(let g=0;g<2;g++){let p=g===0?1:-1,w=Math.trunc(Math.trunc(o.getX()));for(let C=Math.trunc(Math.trunc(o.getY()));C<=s.getMaxY()&&C>=s.getMinY();C+=p){let S=Ce.detectCodeword(r,0,r.getWidth(),l,w,C,u,f);S!=null&&(h.setCodeword(C,S),l?w=S.getStartX():w=S.getEndX())}}return h}static adjustCodewordCount(r,s){let o=s[0][1],l=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ce.getNumberOfECCodeWords(r.getBarcodeECLevel());if(l.length===0){if(u<1||u>ge.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();o.setValue(u)}else l[0]!==u&&o.setValue(u)}static createDecoderResult(r){let s=Ce.createBarcodeMatrix(r);Ce.adjustCodewordCount(r,s);let o=new Array,l=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],f=new Array;for(let g=0;g<r.getBarcodeRowCount();g++)for(let p=0;p<r.getBarcodeColumnCount();p++){let w=s[g][p+1].getValue(),C=g*r.getBarcodeColumnCount()+p;w.length===0?o.push(C):w.length===1?l[C]=w[0]:(f.push(C),u.push(w))}let h=new Array(u.length);for(let g=0;g<h.length;g++)h[g]=u[g];return Ce.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),l,ge.toIntArray(o),ge.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(r,s,o,l,u){let f=new Int32Array(l.length),h=100;for(;h-- >0;){for(let g=0;g<f.length;g++)s[l[g]]=u[g][f[g]];try{return Ce.decodeCodewords(s,r,o)}catch(g){if(!(g instanceof D))throw g}if(f.length===0)throw D.getChecksumInstance();for(let g=0;g<f.length;g++)if(f[g]<u[g].length-1){f[g]++;break}else if(f[g]=0,g===f.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let l=0;l<s.length;l++)for(let u=0;u<s[l].length;u++)s[l][u]=new $s;let o=0;for(let l of r.getDetectionResultColumns()){if(l!=null){for(let u of l.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][o].setValue(u.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,l){let u=l?1:-1,f=null;if(Ce.isValidBarcodeColumn(r,s-u)&&(f=r.getDetectionResultColumn(s-u).getCodeword(o)),f!=null)return l?f.getEndX():f.getStartX();if(f=r.getDetectionResultColumn(s).getCodewordNearby(o),f!=null)return l?f.getStartX():f.getEndX();if(Ce.isValidBarcodeColumn(r,s-u)&&(f=r.getDetectionResultColumn(s-u).getCodewordNearby(o)),f!=null)return l?f.getEndX():f.getStartX();let h=0;for(;Ce.isValidBarcodeColumn(r,s-u);){s-=u;for(let g of r.getDetectionResultColumn(s).getCodewords())if(g!=null)return(l?g.getEndX():g.getStartX())+u*h*(g.getEndX()-g.getStartX());h++}return l?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,l,u,f,h,g){u=Ce.adjustCodewordStartColumn(r,s,o,l,u,f);let p=Ce.getModuleBitCount(r,s,o,l,u,f);if(p==null)return null;let w,C=Re.sum(p);if(l)w=u+C;else{for(let R=0;R<p.length/2;R++){let M=p[R];p[R]=p[p.length-1-R],p[p.length-1-R]=M}w=u,u=w-C}if(!Ce.checkCodewordSkew(C,h,g))return null;let S=an.getDecodedValue(p),T=ge.getCodeword(S);return T===-1?null:new eo(u,w,Ce.getCodewordBucketNumber(S),T)}static getModuleBitCount(r,s,o,l,u,f){let h=u,g=new Int32Array(8),p=0,w=l?1:-1,C=l;for(;(l?h<o:h>=s)&&p<g.length;)r.get(h,f)===C?(g[p]++,h+=w):(p++,C=!C);return p===g.length||h===(l?o:s)&&p===g.length-1?g:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,l,u,f){let h=u,g=l?-1:1;for(let p=0;p<2;p++){for(;(l?h>=s:h<o)&&l===r.get(h,f);){if(Math.abs(u-h)>Ce.CODEWORD_SKEW_SIZE)return u;h+=g}g=-g,l=!l}return h}static checkCodewordSkew(r,s,o){return s-Ce.CODEWORD_SKEW_SIZE<=r&&r<=o+Ce.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw L.getFormatInstance();let l=1<<s+1,u=Ce.correctErrors(r,o,l);Ce.verifyCodewordCount(r,l);let f=U.decode(r,""+s);return f.setErrorsCorrected(u),f.setErasures(o.length),f}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+Ce.MAX_ERRORS||o<0||o>Ce.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return Ce.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw L.getFormatInstance();let o=r[0];if(o>r.length)throw L.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw L.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,l=s.length-1;for(;!((r&1)!==o&&(o=r&1,l--,l<0));)s[l]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ce.getCodewordBucketNumber(Ce.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Zs;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let l=0;l<r[o].length;l++){let u=r[o][l];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Ce.CODEWORD_SKEW_SIZE=2,Ce.MAX_ERRORS=3,Ce.MAX_EC_CODEWORDS=512,Ce.errorCorrection=new Md;class Ft{decode(r,s=null){let o=Ft.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw j.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return Ft.decode(r,s,!0)}catch(o){throw o instanceof L||o instanceof D?j.getNotFoundInstance():o}}static decode(r,s,o){const l=new Array,u=_e.detectMultiple(r,s,o);for(const f of u.getPoints()){const h=Ce.decode(u.getBits(),f[4],f[5],f[6],f[7],Ft.getMinCodewordWidth(f),Ft.getMaxCodewordWidth(f)),g=new ot(h.getText(),h.getRawBytes(),void 0,f,ce.PDF_417);g.putMetadata(Nt.ERROR_CORRECTION_LEVEL,h.getECLevel());const p=h.getOther();p!=null&&g.putMetadata(Nt.PDF417_EXTRA_METADATA,p),l.push(g)}return l.map(f=>f)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?b.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Ft.getMaxWidth(r[0],r[4]),Ft.getMaxWidth(r[6],r[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(Ft.getMaxWidth(r[1],r[5]),Ft.getMaxWidth(r[7],r[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Ft.getMinWidth(r[0],r[4]),Ft.getMinWidth(r[6],r[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(Ft.getMinWidth(r[1],r[5]),Ft.getMinWidth(r[7],r[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}reset(){}}class Na extends x{}Na.kind="ReaderException";class Bd{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(q.TRY_HARDER)===!0,o=i(r)?null:r.get(q.POSSIBLE_FORMATS),l=new Array;if(!i(o)){const u=o.some(f=>f===ce.UPC_A||f===ce.UPC_E||f===ce.EAN_13||f===ce.EAN_8||f===ce.CODABAR||f===ce.CODE_39||f===ce.CODE_93||f===ce.CODE_128||f===ce.ITF||f===ce.RSS_14||f===ce.RSS_EXPANDED);u&&!s&&l.push(new Ki(r,this.verbose)),o.includes(ce.QR_CODE)&&l.push(new Fr),o.includes(ce.DATA_MATRIX)&&l.push(new Br),o.includes(ce.AZTEC)&&l.push(new Ea),o.includes(ce.PDF_417)&&l.push(new Ft),u&&s&&l.push(new Ki(r,this.verbose))}l.length===0&&(s||l.push(new Ki(r,this.verbose)),l.push(new Fr),l.push(new Br),l.push(new Ea),l.push(new Ft),s&&l.push(new Ki(r,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Na("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof Na)continue}throw new j("No MultiFormat Readers were able to detect the code.")}}class Ax extends bn{constructor(r=null,s=500){const o=new Bd;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Sx extends bn{constructor(r=500){super(new Ft,r)}}class Ix extends bn{constructor(r=500){super(new Fr,r)}}var Fc;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Fc||(Fc={}));var St=Fc;class Uc{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new rn(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const l=this.field;for(let u=s.length;u<=r;u++){const f=o.multiply(new rn(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));s.push(f),o=f}}return s[r]}encode(r,s){if(s===0)throw new E("No error correction bytes");const o=r.length-s;if(o<=0)throw new E("No data bytes provided");const l=this.buildGenerator(s),u=new Int32Array(o);B.arraycopy(r,0,u,0,o);let f=new rn(this.field,u);f=f.multiplyByMonomial(s,1);const g=f.divide(l)[1].getCoefficients(),p=s-g.length;for(let w=0;w<p;w++)r[o+w]=0;B.arraycopy(g,0,r,o+p,g.length)}}class gt{constructor(){}static applyMaskPenaltyRule1(r){return gt.applyMaskPenaltyRule1Internal(r,!0)+gt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let f=0;f<u-1;f++){const h=o[f];for(let g=0;g<l-1;g++){const p=h[g];p===h[g+1]&&p===o[f+1][g]&&p===o[f+1][g+1]&&s++}}return gt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let f=0;f<u;f++)for(let h=0;h<l;h++){const g=o[f];h+6<l&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(gt.isWhiteHorizontal(g,h-4,h)||gt.isWhiteHorizontal(g,h+7,h+11))&&s++,f+6<u&&o[f][h]===1&&o[f+1][h]===0&&o[f+2][h]===1&&o[f+3][h]===1&&o[f+4][h]===1&&o[f+5][h]===0&&o[f+6][h]===1&&(gt.isWhiteVertical(o,h,f-4,f)||gt.isWhiteVertical(o,h,f+7,f+11))&&s++}return s*gt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let l=s;l<o;l++)if(r[l]===1)return!1;return!0}static isWhiteVertical(r,s,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let u=o;u<l;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let g=0;g<u;g++){const p=o[g];for(let w=0;w<l;w++)p[w]===1&&s++}const f=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*gt.N4}static getDataMaskBit(r,s,o){let l,u;switch(r){case 0:l=o+s&1;break;case 1:l=o&1;break;case 2:l=s%3;break;case 3:l=(o+s)%3;break;case 4:l=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:u=o*s,l=(u&1)+u%3;break;case 6:u=o*s,l=(u&1)+u%3&1;break;case 7:u=o*s,l=u%3+(o+s&1)&1;break;default:throw new E("Invalid mask pattern: "+r)}return l===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const l=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),f=r.getArray();for(let h=0;h<l;h++){let g=0,p=-1;for(let w=0;w<u;w++){const C=s?f[h][w]:f[w][h];C===p?g++:(g>=5&&(o+=gt.N1+(g-5)),g=1,p=C)}g>=5&&(o+=gt.N1+(g-5))}return o}}gt.N1=3,gt.N2=3,gt.N3=40,gt.N4=10;class ba{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let l=0;l!==s;l++)o[l]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)N.fill(s,r)}equals(r){if(!(r instanceof ba))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,l=this.height;o<l;++o){const u=this.bytes[o],f=s.bytes[o];for(let h=0,g=this.width;h<g;++h)if(u[h]!==f[h])return!1}return!0}toString(){const r=new ye;for(let s=0,o=this.height;s<o;++s){const l=this.bytes[s];for(let u=0,f=this.width;u<f;++u)switch(l[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class _i{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ye;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<_i.NUM_MASK_PATTERNS}}_i.NUM_MASK_PATTERNS=8;class Ve extends x{}Ve.kind="WriterException";class he{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,l,u){he.clearMatrix(u),he.embedBasicPatterns(o,u),he.embedTypeInfo(s,l,u),he.maybeEmbedVersionInfo(o,u),he.embedDataBits(r,l,u)}static embedBasicPatterns(r,s){he.embedPositionDetectionPatternsAndSeparators(s),he.embedDarkDotAtLeftBottomCorner(s),he.maybeEmbedPositionAdjustmentPatterns(r,s),he.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const l=new H;he.makeTypeInfoBits(r,s,l);for(let u=0,f=l.getSize();u<f;++u){const h=l.get(l.getSize()-1-u),g=he.TYPE_INFO_COORDINATES[u],p=g[0],w=g[1];if(o.setBoolean(p,w,h),u<8){const C=o.getWidth()-u-1;o.setBoolean(C,8,h)}else{const S=o.getHeight()-7+(u-8);o.setBoolean(8,S,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new H;he.makeVersionInfoBits(r,o);let l=6*3-1;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const h=o.get(l);l--,s.setBoolean(u,s.getHeight()-11+f,h),s.setBoolean(s.getHeight()-11+f,u,h)}}static embedDataBits(r,s,o){let l=0,u=-1,f=o.getWidth()-1,h=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);h>=0&&h<o.getHeight();){for(let g=0;g<2;++g){const p=f-g;if(!he.isEmpty(o.get(p,h)))continue;let w;l<r.getSize()?(w=r.get(l),++l):w=!1,s!==255&&gt.getDataMaskBit(s,p,h)&&(w=!w),o.setBoolean(p,h,w)}h+=u}u=-u,h+=u,f-=2}if(l!==r.getSize())throw new Ve("Not all bits consumed: "+l+"/"+r.getSize())}static findMSBSet(r){return 32-b.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new E("0 polynomial");const o=he.findMSBSet(s);for(r<<=o-1;he.findMSBSet(r)>=o;)r^=s<<he.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!_i.isValidMaskPattern(s))throw new Ve("Invalid mask pattern");const l=r.getBits()<<3|s;o.appendBits(l,5);const u=he.calculateBCHCode(l,he.TYPE_INFO_POLY);o.appendBits(u,10);const f=new H;if(f.appendBits(he.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new Ve("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=he.calculateBCHCode(r.getVersionNumber(),he.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new Ve("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;he.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),he.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Ve;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let l=0;l<8;++l){if(!he.isEmpty(o.get(r+l,s)))throw new Ve;o.setNumber(r+l,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let l=0;l<7;++l){if(!he.isEmpty(o.get(r,s+l)))throw new Ve;o.setNumber(r,s+l,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let l=0;l<5;++l){const u=he.POSITION_ADJUSTMENT_PATTERN[l];for(let f=0;f<5;++f)o.setNumber(r+f,s+l,u[f])}}static embedPositionDetectionPattern(r,s,o){for(let l=0;l<7;++l){const u=he.POSITION_DETECTION_PATTERN[l];for(let f=0;f<7;++f)o.setNumber(r+f,s+l,u[f])}}static embedPositionDetectionPatternsAndSeparators(r){const s=he.POSITION_DETECTION_PATTERN[0].length;he.embedPositionDetectionPattern(0,0,r),he.embedPositionDetectionPattern(r.getWidth()-s,0,r),he.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;he.embedHorizontalSeparationPattern(0,o-1,r),he.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),he.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const l=7;he.embedVerticalSeparationPattern(l,0,r),he.embedVerticalSeparationPattern(r.getHeight()-l-1,0,r),he.embedVerticalSeparationPattern(l,r.getHeight()-l,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,l=he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,f=l.length;u!==f;u++){const h=l[u];if(h>=0)for(let g=0;g!==f;g++){const p=l[g];p>=0&&he.isEmpty(s.get(p,h))&&he.embedPositionAdjustmentPattern(p-2,h-2,s)}}}}he.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),he.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),he.VERSION_INFO_POLY=7973,he.TYPE_INFO_POLY=1335,he.TYPE_INFO_MASK_PATTERN=21522;class vx{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $e{constructor(){}static calculateMaskPenalty(r){return gt.applyMaskPenaltyRule1(r)+gt.applyMaskPenaltyRule2(r)+gt.applyMaskPenaltyRule3(r)+gt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let l=$e.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(St.CHARACTER_SET)!==void 0;u&&(l=o.get(St.CHARACTER_SET).toString());const f=this.chooseMode(r,l),h=new H;if(f===fe.BYTE&&(u||$e.DEFAULT_BYTE_MODE_ENCODING!==l)){const Z=V.getCharacterSetECIByName(l);Z!==void 0&&this.appendECI(Z,h)}this.appendModeInfo(f,h);const g=new H;this.appendBytes(r,f,g,l);let p;if(o!==null&&o.get(St.QR_VERSION)!==void 0){const Z=Number.parseInt(o.get(St.QR_VERSION).toString(),10);p=ue.getVersionForNumber(Z);const X=this.calculateBitsNeeded(f,h,g,p);if(!this.willFit(X,p,s))throw new Ve("Data too big for requested version")}else p=this.recommendVersion(s,f,h,g);const w=new H;w.appendBitArray(h);const C=f===fe.BYTE?g.getSizeInBytes():r.length;this.appendLengthInfo(C,p,f,w),w.appendBitArray(g);const S=p.getECBlocksForLevel(s),T=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(T,w);const R=this.interleaveWithECBytes(w,p.getTotalCodewords(),T,S.getNumBlocks()),M=new _i;M.setECLevel(s),M.setMode(f),M.setVersion(p);const k=p.getDimensionForVersion(),z=new ba(k,k),K=this.chooseMaskPattern(R,s,p,z);return M.setMaskPattern(K),he.buildMatrix(R,s,p,K,z),M.setMatrix(z),M}static recommendVersion(r,s,o,l){const u=this.calculateBitsNeeded(s,o,l,ue.getVersionForNumber(1)),f=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,o,l,f);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,o,l){return s.getSize()+r.getCharacterCountBits(l)+o.getSize()}static getAlphanumericCode(r){return r<$e.ALPHANUMERIC_TABLE.length?$e.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(V.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return fe.KANJI;let o=!1,l=!1;for(let u=0,f=r.length;u<f;++u){const h=r.charAt(u);if($e.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return fe.BYTE}return l?fe.ALPHANUMERIC:o?fe.NUMERIC:fe.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=Ee.encode(r,V.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let l=0;l<o;l+=2){const u=s[l]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,o,l){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<_i.NUM_MASK_PATTERNS;h++){he.buildMatrix(r,s,o,h,l);let g=this.calculateMaskPenalty(l);g<u&&(u=g,f=h)}return f}static chooseVersion(r,s){for(let o=1;o<=40;o++){const l=ue.getVersionForNumber(o);if($e.willFit(r,l,s))return l}throw new Ve("Data too big")}static willFit(r,s,o){const l=s.getTotalCodewords(),f=s.getECBlocksForLevel(o).getTotalECCodewords(),h=l-f,g=(r+7)/8;return h>=g}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new Ve("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let f=0;f<4&&s.getSize()<o;++f)s.appendBit(!1);const l=s.getSize()&7;if(l>0)for(let f=l;f<8;f++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let f=0;f<u;++f)s.appendBits(f&1?17:236,8);if(s.getSize()!==o)throw new Ve("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,l,u,f){if(l>=o)throw new Ve("Block ID too large");const h=r%o,g=o-h,p=Math.floor(r/o),w=p+1,C=Math.floor(s/o),S=C+1,T=p-C,R=w-S;if(T!==R)throw new Ve("EC bytes mismatch");if(o!==g+h)throw new Ve("RS blocks mismatch");if(r!==(C+T)*g+(S+R)*h)throw new Ve("Total bytes mismatch");l<g?(u[0]=C,f[0]=T):(u[0]=S,f[0]=R)}static interleaveWithECBytes(r,s,o,l){if(r.getSizeInBytes()!==o)throw new Ve("Number of bits and data bytes does not match");let u=0,f=0,h=0;const g=new Array;for(let w=0;w<l;++w){const C=new Int32Array(1),S=new Int32Array(1);$e.getNumDataBytesAndNumECBytesForBlockID(s,o,l,w,C,S);const T=C[0],R=new Uint8Array(T);r.toBytes(8*u,R,0,T);const M=$e.generateECBytes(R,S[0]);g.push(new vx(R,M)),f=Math.max(f,T),h=Math.max(h,M.length),u+=C[0]}if(o!==u)throw new Ve("Data bytes does not match offset");const p=new H;for(let w=0;w<f;++w)for(const C of g){const S=C.getDataBytes();w<S.length&&p.appendBits(S[w],8)}for(let w=0;w<h;++w)for(const C of g){const S=C.getErrorCorrectionBytes();w<S.length&&p.appendBits(S[w],8)}if(s!==p.getSizeInBytes())throw new Ve("Interleaving error: "+s+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(r,s){const o=r.length,l=new Int32Array(o+s);for(let f=0;f<o;f++)l[f]=r[f]&255;new Uc(De.QR_CODE_FIELD_256).encode(l,s);const u=new Uint8Array(s);for(let f=0;f<s;f++)u[f]=l[o+f];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,l){const u=o.getCharacterCountBits(s);if(r>=1<<u)throw new Ve(r+" is bigger than "+((1<<u)-1));l.appendBits(r,u)}static appendBytes(r,s,o,l){switch(s){case fe.NUMERIC:$e.appendNumericBytes(r,o);break;case fe.ALPHANUMERIC:$e.appendAlphanumericBytes(r,o);break;case fe.BYTE:$e.append8BitBytes(r,o,l);break;case fe.KANJI:$e.appendKanjiBytes(r,o);break;default:throw new Ve("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=$e.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const u=$e.getDigit(r.charAt(l));if(l+2<o){const f=$e.getDigit(r.charAt(l+1)),h=$e.getDigit(r.charAt(l+2));s.appendBits(u*100+f*10+h,10),l+=3}else if(l+1<o){const f=$e.getDigit(r.charAt(l+1));s.appendBits(u*10+f,7),l+=2}else s.appendBits(u,4),l++}}static appendAlphanumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const u=$e.getAlphanumericCode(r.charCodeAt(l));if(u===-1)throw new Ve;if(l+1<o){const f=$e.getAlphanumericCode(r.charCodeAt(l+1));if(f===-1)throw new Ve;s.appendBits(u*45+f,11),l+=2}else s.appendBits(u,6),l++}}static append8BitBytes(r,s,o){let l;try{l=Ee.encode(r,o)}catch(u){throw new Ve(u)}for(let u=0,f=l.length;u!==f;u++){const h=l[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let o;try{o=Ee.encode(r,V.SJIS)}catch(u){throw new Ve(u)}const l=o.length;for(let u=0;u<l;u+=2){const f=o[u]&255,h=o[u+1]&255,g=f<<8&4294967295|h;let p=-1;if(g>=33088&&g<=40956?p=g-33088:g>=57408&&g<=60351&&(p=g-49472),p===-1)throw new Ve("Invalid byte sequence");const w=(p>>8)*192+(p&255);s.appendBits(w,13)}}static appendECI(r,s){s.appendBits(fe.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}$e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$e.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class Ci{write(r,s,o,l=null){if(r.length===0)throw new E("Found empty contents");if(s<0||o<0)throw new E("Requested dimensions are too small: "+s+"x"+o);let u=Xe.L,f=Ci.QUIET_ZONE_SIZE;l!==null&&(l.get(St.ERROR_CORRECTION)!==void 0&&(u=Xe.fromString(l.get(St.ERROR_CORRECTION).toString())),l.get(St.MARGIN)!==void 0&&(f=Number.parseInt(l.get(St.MARGIN).toString(),10)));const h=$e.encode(r,u,l);return this.renderResult(h,s,o,f)}writeToDom(r,s,o,l,u=null){typeof r=="string"&&(r=document.querySelector(r));const f=this.write(s,o,l,u);r&&r.appendChild(f)}renderResult(r,s,o,l){const u=r.getMatrix();if(u===null)throw new tr;const f=u.getWidth(),h=u.getHeight(),g=f+l*2,p=h+l*2,w=Math.max(s,g),C=Math.max(o,p),S=Math.min(Math.floor(w/g),Math.floor(C/p)),T=Math.floor((w-f*S)/2),R=Math.floor((C-h*S)/2),M=this.createSVGElement(w,C);for(let k=0,z=R;k<h;k++,z+=S)for(let K=0,Z=T;K<f;K++,Z+=S)if(u.get(K,k)===1){const X=this.createSvgRectElement(Z,z,S,S);M.appendChild(X)}return M}createSVGElement(r,s){const o=document.createElementNS(Ci.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,l){const u=document.createElementNS(Ci.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",l.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ci.QUIET_ZONE_SIZE=4,Ci.SVG_NS="http://www.w3.org/2000/svg";class qi{encode(r,s,o,l,u){if(r.length===0)throw new E("Found empty contents");if(s!==ce.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(o<0||l<0)throw new E(`Requested dimensions are too small: ${o}x${l}`);let f=Xe.L,h=qi.QUIET_ZONE_SIZE;u!==null&&(u.get(St.ERROR_CORRECTION)!==void 0&&(f=Xe.fromString(u.get(St.ERROR_CORRECTION).toString())),u.get(St.MARGIN)!==void 0&&(h=Number.parseInt(u.get(St.MARGIN).toString(),10)));const g=$e.encode(r,f,u);return qi.renderResult(g,o,l,h)}static renderResult(r,s,o,l){const u=r.getMatrix();if(u===null)throw new tr;const f=u.getWidth(),h=u.getHeight(),g=f+l*2,p=h+l*2,w=Math.max(s,g),C=Math.max(o,p),S=Math.min(Math.floor(w/g),Math.floor(C/p)),T=Math.floor((w-f*S)/2),R=Math.floor((C-h*S)/2),M=new Be(w,C);for(let k=0,z=R;k<h;k++,z+=S)for(let K=0,Z=T;K<f;K++,Z+=S)u.get(K,k)===1&&M.setRegion(Z,z,S,S);return M}}qi.QUIET_ZONE_SIZE=4;class Tx{encode(r,s,o,l,u){let f;switch(s){case ce.QR_CODE:f=new qi;break;default:throw new E("No encoder available for format "+s)}return f.encode(r,s,o,l,u)}}class sr extends ne{constructor(r,s,o,l,u,f,h,g){if(super(f,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=l,this.top=u,l+f>s||u+h>o)throw new E("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(f,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,l=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.yuvData,u,l,0,o),l;for(let f=0;f<s;f++){const h=f*r;B.arraycopy(this.yuvData,u,l,h,r),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new sr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,l,!1)}renderThumbnail(){const r=this.getWidth()/sr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/sr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),l=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){const h=f*r;for(let g=0;g<r;g++){const p=l[u+g*sr.THUMBNAIL_SCALE_FACTOR]&255;o[h+g]=4278190080|p*65793}u+=this.dataWidth*sr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/sr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/sr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let l=0,u=this.top*this.dataWidth+this.left;l<s;l++,u+=this.dataWidth){const f=u+r/2;for(let h=u,g=u+r-1;h<f;h++,g--){const p=o[h];o[h]=o[g],o[g]=p}}}invert(){return new de(this)}}sr.THUMBNAIL_SCALE_FACTOR=2;class zc extends ne{constructor(r,s,o,l,u,f,h){if(super(s,o),this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=h,r.BYTES_PER_ELEMENT===4){const g=s*o,p=new Uint8ClampedArray(g);for(let w=0;w<g;w++){const C=r[w],S=C>>16&255,T=C>>7&510,R=C&255;p[w]=(S+T+R)/4&255}this.luminances=p}else this.luminances=r;if(l===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,l=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.luminances,u,l,0,o),l;for(let f=0;f<s;f++){const h=f*r;B.arraycopy(this.luminances,u,l,h,r),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new zc(this.luminances,o,l,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new de(this)}}class Fd extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class jc{}jc.ISO_8859_1=V.ISO8859_1;class Ud{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class zd{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Nx{constructor(r){this.previous=r}getPrevious(){return this.previous}}class $i extends Nx{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new $i(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new $i(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+b.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Hc extends $i{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new Hc(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bx(_,r,s){return new Hc(_,r,s)}function to(_,r,s){return new $i(_,r,s)}const Rx=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],zr=0,Ra=1,Dn=2,jd=3,or=4,Mx=new $i(null,0,0),Vc=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ox(_){for(let r of _)N.fill(r,-1);return _[zr][or]=0,_[Ra][or]=0,_[Ra][zr]=28,_[jd][or]=0,_[Dn][or]=0,_[Dn][zr]=15,_}const Hd=Ox(N.createInt32Array(6,6));class ar{constructor(r,s,o,l){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,l=this.token;if(r!==this.mode){let f=Vc[this.mode][r];l=to(l,f&65535,f>>16),o+=f>>16}let u=r===Dn?4:5;return l=to(l,s,u),new ar(l,r,0,o+u)}shiftAndAppend(r,s){let o=this.token,l=this.mode===Dn?4:5;return o=to(o,Hd[this.mode][r],l),o=to(o,s,5),new ar(o,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,l=this.bitCount;if(this.mode===or||this.mode===Dn){let h=Vc[o][zr];s=to(s,h&65535,h>>16),l+=h>>16,o=zr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ar(s,o,this.binaryShiftByteCount+1,l+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(r+1)),f}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=bx(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ar(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Vc[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=ar.calculateBinaryShiftCost(r)-ar.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let l=this.endBinaryShift(r.length).token;l!==null;l=l.getPrevious())s.unshift(l);let o=new H;for(const l of s)l.appendTo(o,r);return o}toString(){return re.format("%s bits=%d bytes=%d",Rx[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ar.INITIAL_STATE=new ar(Mx,zr,0,0);function Dx(_){const r=re.getCharCode(" "),s=re.getCharCode("."),o=re.getCharCode(",");_[zr][r]=1;const l=re.getCharCode("Z"),u=re.getCharCode("A");for(let S=u;S<=l;S++)_[zr][S]=S-u+2;_[Ra][r]=1;const f=re.getCharCode("z"),h=re.getCharCode("a");for(let S=h;S<=f;S++)_[Ra][S]=S-h+2;_[Dn][r]=1;const g=re.getCharCode("9"),p=re.getCharCode("0");for(let S=p;S<=g;S++)_[Dn][S]=S-p+2;_[Dn][o]=12,_[Dn][s]=13;const w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<w.length;S++)_[jd][re.getCharCode(w[S])]=S;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<C.length;S++)re.getCharCode(C[S])>0&&(_[or][re.getCharCode(C[S])]=S);return _}const Wc=Dx(N.createInt32Array(5,256));class no{constructor(r){this.text=r}encode(){const r=re.getCharCode(" "),s=re.getCharCode(`
`);let o=zd.singletonList(ar.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case re.getCharCode("\r"):f=h===s?2:0;break;case re.getCharCode("."):f=h===r?3:0;break;case re.getCharCode(","):f=h===r?4:0;break;case re.getCharCode(":"):f=h===r?5:0;break;default:f=0}f>0?(o=no.updateStateListForPair(o,u,f),u++):o=this.updateStateListForChar(o,u)}return zd.min(o,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let l of r)this.updateStateForChar(l,s,o);return no.simplifyStates(o)}updateStateForChar(r,s,o){let l=this.text[s]&255,u=Wc[r.getMode()][l]>0,f=null;for(let h=0;h<=or;h++){let g=Wc[h][l];if(g>0){if(f==null&&(f=r.endBinaryShift(s)),!u||h===r.getMode()||h===Dn){const p=f.latchAndAppend(h,g);o.push(p)}if(!u&&Hd[r.getMode()][h]>=0){const p=f.shiftAndAppend(h,g);o.push(p)}}}if(r.getBinaryShiftByteCount()>0||Wc[r.getMode()][l]===0){let h=r.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(r,s,o){const l=[];for(let u of r)this.updateStateForPair(u,s,o,l);return this.simplifyStates(l)}static updateStateForPair(r,s,o,l){let u=r.endBinaryShift(s);if(l.push(u.latchAndAppend(or,o)),r.getMode()!==or&&l.push(u.shiftAndAppend(or,o)),o===3||o===4){let f=u.latchAndAppend(Dn,16-o).latchAndAppend(Dn,1);l.push(f)}if(r.getBinaryShiftByteCount()>0){let f=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);l.push(f)}}static simplifyStates(r){let s=[];for(const o of r){let l=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){l=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(f=>f!==u))}l&&s.push(o)}return s}}class Me{constructor(){}static encodeBytes(r){return Me.encode(r,Me.DEFAULT_EC_PERCENT,Me.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let l=new no(r).encode(),u=b.truncDivision(l.getSize()*s,100)+11,f=l.getSize()+u,h,g,p,w,C;if(o!==Me.DEFAULT_AZTEC_LAYERS){if(h=o<0,g=Math.abs(o),g>(h?Me.MAX_NB_BITS_COMPACT:Me.MAX_NB_BITS))throw new E(re.format("Illegal value %s for layers",o));p=Me.totalBitsInLayer(g,h),w=Me.WORD_SIZE[g];let X=p-p%w;if(C=Me.stuffBits(l,w),C.getSize()+u>X)throw new E("Data to large for user specified layer");if(h&&C.getSize()>w*64)throw new E("Data to large for user specified layer")}else{w=0,C=null;for(let X=0;;X++){if(X>Me.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(h=X<=3,g=h?X+1:X,p=Me.totalBitsInLayer(g,h),f>p)continue;(C==null||w!==Me.WORD_SIZE[g])&&(w=Me.WORD_SIZE[g],C=Me.stuffBits(l,w));let Te=p-p%w;if(!(h&&C.getSize()>w*64)&&C.getSize()+u<=Te)break}}let S=Me.generateCheckWords(C,p,w),T=C.getSize()/w,R=Me.generateModeMessage(h,g,T),M=(h?11:14)+g*4,k=new Int32Array(M),z;if(h){z=M;for(let X=0;X<k.length;X++)k[X]=X}else{z=M+1+2*b.truncDivision(b.truncDivision(M,2)-1,15);let X=b.truncDivision(M,2),Te=b.truncDivision(z,2);for(let we=0;we<X;we++){let ln=we+b.truncDivision(we,15);k[X-we-1]=Te-ln-1,k[X+we]=Te+ln+1}}let K=new Be(z);for(let X=0,Te=0;X<g;X++){let we=(g-X)*4+(h?9:12);for(let ln=0;ln<we;ln++){let Hn=ln*2;for(let cn=0;cn<2;cn++)S.get(Te+Hn+cn)&&K.set(k[X*2+cn],k[X*2+ln]),S.get(Te+we*2+Hn+cn)&&K.set(k[X*2+ln],k[M-1-X*2-cn]),S.get(Te+we*4+Hn+cn)&&K.set(k[M-1-X*2-cn],k[M-1-X*2-ln]),S.get(Te+we*6+Hn+cn)&&K.set(k[M-1-X*2-ln],k[X*2+cn])}Te+=we*8}if(Me.drawModeMessage(K,h,z,R),h)Me.drawBullsEye(K,b.truncDivision(z,2),5);else{Me.drawBullsEye(K,b.truncDivision(z,2),7);for(let X=0,Te=0;X<b.truncDivision(M,2)-1;X+=15,Te+=16)for(let we=b.truncDivision(z,2)&1;we<z;we+=2)K.set(b.truncDivision(z,2)-Te,we),K.set(b.truncDivision(z,2)+Te,we),K.set(we,b.truncDivision(z,2)-Te),K.set(we,b.truncDivision(z,2)+Te)}let Z=new Ud;return Z.setCompact(h),Z.setSize(z),Z.setLayers(g),Z.setCodeWords(T),Z.setMatrix(K),Z}static drawBullsEye(r,s,o){for(let l=0;l<o;l+=2)for(let u=s-l;u<=s+l;u++)r.set(u,s-l),r.set(u,s+l),r.set(s-l,u),r.set(s+l,u);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let l=new H;return r?(l.appendBits(s-1,2),l.appendBits(o-1,6),l=Me.generateCheckWords(l,28,4)):(l.appendBits(s-1,5),l.appendBits(o-1,11),l=Me.generateCheckWords(l,40,4)),l}static drawModeMessage(r,s,o,l){let u=b.truncDivision(o,2);if(s)for(let f=0;f<7;f++){let h=u-3+f;l.get(f)&&r.set(h,u-5),l.get(f+7)&&r.set(u+5,h),l.get(20-f)&&r.set(h,u+5),l.get(27-f)&&r.set(u-5,h)}else for(let f=0;f<10;f++){let h=u-5+f+b.truncDivision(f,5);l.get(f)&&r.set(h,u-7),l.get(f+10)&&r.set(u+7,h),l.get(29-f)&&r.set(h,u+7),l.get(39-f)&&r.set(u-7,h)}}static generateCheckWords(r,s,o){let l=r.getSize()/o,u=new Uc(Me.getGF(o)),f=b.truncDivision(s,o),h=Me.bitsToWords(r,o,f);u.encode(h,f-l);let g=s%o,p=new H;p.appendBits(0,g);for(const w of Array.from(h))p.appendBits(w,o);return p}static bitsToWords(r,s,o){let l=new Int32Array(o),u,f;for(u=0,f=r.getSize()/s;u<f;u++){let h=0;for(let g=0;g<s;g++)h|=r.get(u*s+g)?1<<s-g-1:0;l[u]=h}return l}static getGF(r){switch(r){case 4:return De.AZTEC_PARAM;case 6:return De.AZTEC_DATA_6;case 8:return De.AZTEC_DATA_8;case 10:return De.AZTEC_DATA_10;case 12:return De.AZTEC_DATA_12;default:throw new E("Unsupported word size "+r)}}static stuffBits(r,s){let o=new H,l=r.getSize(),u=(1<<s)-2;for(let f=0;f<l;f+=s){let h=0;for(let g=0;g<s;g++)(f+g>=l||r.get(f+g))&&(h|=1<<s-1-g);(h&u)===u?(o.appendBits(h&u,s),f--):h&u?o.appendBits(h,s):(o.appendBits(h|1,s),f--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Me.DEFAULT_EC_PERCENT=33,Me.DEFAULT_AZTEC_LAYERS=0,Me.MAX_NB_BITS=32,Me.MAX_NB_BITS_COMPACT=4,Me.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ma{encode(r,s,o,l){return this.encodeWithHints(r,s,o,l,null)}encodeWithHints(r,s,o,l,u){let f=jc.ISO_8859_1,h=Me.DEFAULT_EC_PERCENT,g=Me.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(St.CHARACTER_SET)&&(f=Fd.forName(u.get(St.CHARACTER_SET).toString())),u.has(St.ERROR_CORRECTION)&&(h=b.parseInt(u.get(St.ERROR_CORRECTION).toString())),u.has(St.AZTEC_LAYERS)&&(g=b.parseInt(u.get(St.AZTEC_LAYERS).toString()))),Ma.encodeLayers(r,s,o,l,f,h,g)}static encodeLayers(r,s,o,l,u,f,h){if(s!==ce.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let g=Me.encode(re.getBytes(r,u),f,h);return Ma.renderResult(g,o,l)}static renderResult(r,s,o){let l=r.getMatrix();if(l==null)throw new tr;let u=l.getWidth(),f=l.getHeight(),h=Math.max(s,u),g=Math.max(o,f),p=Math.min(h/u,g/f),w=(h-u*p)/2,C=(g-f*p)/2,S=new Be(h,g);for(let T=0,R=C;T<f;T++,R+=p)for(let M=0,k=w;M<u;M++,k+=p)l.get(M,T)&&S.setRegion(k,R,p,p);return S}}n.AbstractExpandedDecoder=bc,n.ArgumentException=A,n.ArithmeticException=wa,n.AztecCode=Ud,n.AztecCodeReader=Ea,n.AztecCodeWriter=Ma,n.AztecDecoder=Ye,n.AztecDetector=Id,n.AztecDetectorResult=Ad,n.AztecEncoder=Me,n.AztecHighLevelEncoder=no,n.AztecPoint=qt,n.BarcodeFormat=ce,n.Binarizer=F,n.BinaryBitmap=I,n.BitArray=H,n.BitMatrix=Be,n.BitSource=Dc,n.BrowserAztecCodeReader=sx,n.BrowserBarcodeReader=ux,n.BrowserCodeReader=bn,n.BrowserDatamatrixCodeReader=hx,n.BrowserMultiFormatReader=Ax,n.BrowserPDF417Reader=Sx,n.BrowserQRCodeReader=Ix,n.BrowserQRCodeSvgWriter=Ci,n.CharacterSetECI=V,n.ChecksumException=D,n.Code128Reader=J,n.Code39Reader=Et,n.DataMatrixDecodedBitStreamParser=Pr,n.DataMatrixReader=Br,n.DecodeHintType=q,n.DecoderResult=Gs,n.DefaultGridSampler=Sd,n.DetectorResult=Ca,n.EAN13Reader=mi,n.EncodeHintType=St,n.Exception=x,n.FormatException=L,n.GenericGF=De,n.GenericGFPoly=rn,n.GlobalHistogramBinarizer=ft,n.GridSampler=Ic,n.GridSamplerInstance=kr,n.HTMLCanvasElementLuminanceSource=me,n.HybridBinarizer=xe,n.ITFReader=He,n.IllegalArgumentException=E,n.IllegalStateException=tr,n.InvertedLuminanceSource=de,n.LuminanceSource=ne,n.MathUtils=Re,n.MultiFormatOneDReader=Ki,n.MultiFormatReader=Bd,n.MultiFormatWriter=Tx,n.NotFoundException=j,n.OneDReader=_t,n.PDF417DecodedBitStreamParser=U,n.PDF417DecoderErrorCorrection=Md,n.PDF417Reader=Ft,n.PDF417ResultMetadata=Dd,n.PerspectiveTransform=zn,n.PlanarYUVLuminanceSource=sr,n.QRCodeByteMatrix=ba,n.QRCodeDataMask=Mn,n.QRCodeDecodedBitStreamParser=at,n.QRCodeDecoderErrorCorrectionLevel=Xe,n.QRCodeDecoderFormatInformation=Gt,n.QRCodeEncoder=$e,n.QRCodeEncoderQRCode=_i,n.QRCodeMaskUtil=gt,n.QRCodeMatrixUtil=he,n.QRCodeMode=fe,n.QRCodeReader=Fr,n.QRCodeVersion=ue,n.QRCodeWriter=qi,n.RGBLuminanceSource=zc,n.RSS14Reader=dt,n.RSSExpandedReader=G,n.ReaderException=Na,n.ReedSolomonDecoder=Xs,n.ReedSolomonEncoder=Uc,n.ReedSolomonException=Gi,n.Result=ot,n.ResultMetadataType=Nt,n.ResultPoint=ae,n.StringUtils=re,n.UnsupportedOperationException=le,n.VideoInputDevice=rt,n.WhiteRectangleDetector=gr,n.WriterException=Ve,n.ZXingArrays=N,n.ZXingCharset=Fd,n.ZXingInteger=b,n.ZXingStandardCharsets=jc,n.ZXingStringBuilder=ye,n.ZXingStringEncoding=Ee,n.ZXingSystem=B,n.createAbstractExpandedDecoder=bd,Object.defineProperty(n,"__esModule",{value:!0})})})(Af,Af.exports);var et=Af.exports;const I_=lg(et),v_=Px({__proto__:null,default:I_},[et]);var n0=function(){function t(e,n,i){if(this.formatMap=new Map([[se.QR_CODE,et.BarcodeFormat.QR_CODE],[se.AZTEC,et.BarcodeFormat.AZTEC],[se.CODABAR,et.BarcodeFormat.CODABAR],[se.CODE_39,et.BarcodeFormat.CODE_39],[se.CODE_93,et.BarcodeFormat.CODE_93],[se.CODE_128,et.BarcodeFormat.CODE_128],[se.DATA_MATRIX,et.BarcodeFormat.DATA_MATRIX],[se.MAXICODE,et.BarcodeFormat.MAXICODE],[se.ITF,et.BarcodeFormat.ITF],[se.EAN_13,et.BarcodeFormat.EAN_13],[se.EAN_8,et.BarcodeFormat.EAN_8],[se.PDF_417,et.BarcodeFormat.PDF_417],[se.RSS_14,et.BarcodeFormat.RSS_14],[se.RSS_EXPANDED,et.BarcodeFormat.RSS_EXPANDED],[se.UPC_A,et.BarcodeFormat.UPC_A],[se.UPC_E,et.BarcodeFormat.UPC_E],[se.UPC_EAN_EXTENSION,et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!v_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(e),c=new Map;c.set(et.DecodeHintType.POSSIBLE_FORMATS,a),c.set(et.DecodeHintType.TRY_HARDER,!1),this.hints=c}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,a){try{i(n.decode(e))}catch(c){a(c)}})},t.prototype.decode=function(e){var n=new et.MultiFormatReader(this.verbose,this.hints),i=new et.HTMLCanvasElementLuminanceSource(e),a=new et.BinaryBitmap(new et.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:Sm.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),T_=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},N_=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},r0=function(){function t(e,n,i){if(this.formatMap=new Map([[se.QR_CODE,"qr_code"],[se.AZTEC,"aztec"],[se.CODABAR,"codabar"],[se.CODE_39,"code_39"],[se.CODE_93,"code_93"],[se.CODE_128,"code_128"],[se.DATA_MATRIX,"data_matrix"],[se.ITF,"itf"],[se.EAN_13,"ean_13"],[se.EAN_8,"ean_8"],[se.PDF_417,"pdf417"],[se.UPC_A,"upc_a"],[se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return T_(this,void 0,void 0,function(){var n,i;return N_(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Sm.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,a=0,c=e;a<c.length;a++){var d=c[a],m=d.boundingBox.width*d.boundingBox.height;m>i&&(i=m,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),i0=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},s0=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},b_=function(){function t(e,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&r0.isSupported()?(this.primaryDecoder=new r0(e,i,a),this.secondaryDecoder=new n0(e,i,a)):this.primaryDecoder=new n0(e,i,a)}return t.prototype.decodeAsync=function(e){return i0(this,void 0,void 0,function(){var n;return s0(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return i0(this,void 0,void 0,function(){var n,i;return s0(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];e+=a}var c=e/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Uh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),kl=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},Ll=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Nm=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),R_=function(t){Uh(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Nm),M_=function(t){Uh(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(R_),O_=function(t){Uh(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Nm),D_=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new M_(this.track)},t.prototype.torchFeature=function(){return new O_(this.track)},t}(),k_=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,a){return kl(this,void 0,void 0,function(){var c,d;return Ll(this,function(m){switch(m.label){case 0:return c=new t(e,n,a),i.aspectRatio?(d={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:m.sent(),m.label=2;case 2:return c.setupSurface(),[2,c]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return kl(this,void 0,void 0,function(){return Ll(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var a=e.mediaStream.getVideoTracks(),c=a.length,d=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++d,d>=c&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new D_(this.getFirstTrackOrFail())},t}(),L_=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return kl(this,void 0,void 0,function(){return Ll(this,function(a){return[2,k_.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return kl(this,void 0,void 0,function(){var n,i;return Ll(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),o0=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},a0=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},P_=function(){function t(){}return t.failIfNotSupported=function(){return o0(this,void 0,void 0,function(){return a0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return o0(this,void 0,void 0,function(){return a0(this,function(n){return[2,L_.create(e)]})})},t}(),B_=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},F_=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},U_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=ps.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=ps.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return B_(this,void 0,void 0,function(){var e,n,i,a,c,d,m;return F_(this,function(y){switch(y.label){case 0:return e=function(x){for(var A=x.getVideoTracks(),E=0,I=A;E<I.length;E++){var D=I[E];D.enabled=!1,D.stop(),x.removeTrack(D)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=y.sent(),a=[],c=0,d=i;c<d.length;c++)m=d[c],m.kind==="videoinput"&&a.push({id:m.deviceId,label:m.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(c){for(var d=[],m=0,y=c;m<y.length;m++){var x=y[m];x.kind==="video"&&d.push({id:x.id,label:x.label})}e(d)},a=MediaStreamTrack;a.getSources(i)})},t}(),pt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(pt||(pt={}));var z_=function(){function t(){this.state=pt.NOT_STARTED,this.onGoingTransactionNewState=pt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===pt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=pt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===pt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=pt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==pt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case pt.UNKNOWN:throw"Transition from unknown is not allowed";case pt.NOT_STARTED:this.failIfNewStateIs(e,[pt.PAUSED]);break;case pt.SCANNING:break;case pt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(e===c)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),j_=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===pt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==pt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===pt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===pt.PAUSED},t}(),H_=function(){function t(){}return t.create=function(){return new j_(new z_)},t}(),V_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),_n=function(t){V_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Yn),W_=function(){function t(e,n){this.logger=n,this.fps=_n.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=_n.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Tm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ur(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),l0=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new vm(this.verbose),this.qrcode=new b_(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=H_.create()}return t.prototype.start=function(e,n,i,a){var c=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var m=W_.create(n,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=y,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:_n.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var E=this,I=this.stateManagerProxy.startTransition(pt.SCANNING);return new Promise(function(D,F){var B=x?m.videoConstraints:E.createVideoConstraints(e);if(!B){I.cancel(),F("videoConstraints should be defined");return}var te={};(!x||m.aspectRatio)&&(te.aspectRatio=m.aspectRatio);var O={onRenderSurfaceReady:function(N,b){E.setupUi(N,b,m),E.isScanning=!0,E.foreverScan(m,i,d)}};P_.failIfNotSupported().then(function(N){N.create(B).then(function(b){return b.render(c.element,te,O).then(function(H){E.renderedCamera=H,I.execute(),D(null)}).catch(function(H){I.cancel(),F(H)})}).catch(function(b){I.cancel(),F(ps.errorGettingUserMedia(b))})}).catch(function(N){I.cancel(),F(ps.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(pt.PAUSED),this.showPausedState(),(ur(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(pt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(pt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var c=document.getElementById(_n.SHADED_REGION_ELEMENT_ID);c&&e.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ur(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var m=d.width,y=d.height,x=document.getElementById(i.elementId),A=x.clientWidth?x.clientWidth:_n.DEFAULT_WIDTH,E=Math.max(x.clientHeight?x.clientHeight:y,_n.FILE_SCAN_MIN_HEIGHT),I=i.computeCanvasDrawConfig(m,y,A,E);if(n){var D=i.createCanvasElement(A,E,"qr-canvas-visible");D.style.display="inline-block",x.appendChild(D);var F=D.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=A,F.canvas.height=E,F.drawImage(d,0,0,m,y,I.x,I.y,I.width,I.height)}var B=_n.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(d.width,I.width),O=Math.max(d.height,I.height),N=te+2*B,b=O+2*B,H=i.createCanvasElement(N,b);x.appendChild(H);var ee=H.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=N,ee.canvas.height=b,ee.drawImage(d,0,0,m,y,B,B,te,O);try{i.qrcode.decodeRobustlyAsync(H).then(function(q){a(e0.createFromQrcodeResult(q))}).catch(c)}catch(q){c("QR code parse error, error = ".concat(q))}},d.onerror=c,d.onabort=c,d.onstalled=c,d.onsuspend=c,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return U_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Tm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[se.QR_CODE,se.AZTEC,se.CODABAR,se.CODE_39,se.CODE_93,se.CODE_128,se.DATA_MATRIX,se.MAXICODE,se.ITF,se.EAN_13,se.EAN_8,se.PDF_417,se.RSS_14,se.RSS_EXPANDED,se.UPC_A,se.UPC_E,se.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=e.formatsToSupport;a<c.length;a++){var d=c[a];A_(d)?i.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ur(e))return!0;if(!ur(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ur(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ur(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var d=this.toQrdimensions(e,n,c),m=function(x){if(x<_n.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(_n.MIN_QR_BOX_SIZE,"px.")},y=function(x){return x>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};m(d.width),m(d.height),d.width=y(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var a=ur(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(e,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=i.isShadedBoxEnabled()&&c.height<=n,m={x:0,y:0,width:e,height:n},y=d?this.getShadedRegionBounds(e,n,c):m,x=this.createCanvasElement(y.width,y.height),A={willReadFrequently:!0},E=x.getContext("2d",A);E.canvas.width=y.width,E.canvas.height=y.height,this.element.append(x),d&&this.possiblyInsertShadingElement(this.element,e,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=E,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=ps.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,e0.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=ps.codeParseError(a);return n(c,Im.createFrom(c)),!1})},t.prototype.foreverScan=function(e,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),d=c.videoWidth/c.clientWidth,m=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*d,x=this.qrRegion.height*m,A=this.qrRegion.x*d,E=this.qrRegion.y*m;this.context.drawImage(c,A,E,y,x,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,i)},a.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(D){!D&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){I()})):I()}).catch(function(D){a.logger.logError("Error happend while scanning context",D),I()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",d=function(F){if(F in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(e)[0];if(y!==n&&y!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var x=e.facingMode;if(typeof x=="string"){if(d(x))return{facingMode:x}}else if(typeof x=="object")if(c in x){if(d(x["".concat(c)]))return{facingMode:{exact:x["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var A=typeof x;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(c in E)return{deviceId:{exact:E["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var I=typeof E;throw"Invalid type of 'deviceId' = ".concat(I)}}}var D=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(D)},t.prototype.computeCanvasDrawConfig=function(e,n,i,a){if(e<=i&&n<=a){var c=(i-e)/2,d=(a-n)/2;return{x:c,y:d,width:e,height:n}}else{var m=e,y=n;return e>i&&(n=i/e*n,e=i),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?_n.BORDER_SHADER_MATCH_COLOR:_n.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var a=e,c=n,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(c,"px"),d.style.display="none",d.id=ur(i)?"qr-canvas":i,d},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var d=(n-a.width)/2,m=(i-a.height)/2;if(c.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(_n.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var y=5,x=40;this.insertShaderBorders(c,x,y,-y,null,0,!0),this.insertShaderBorders(c,x,y,-y,null,0,!1),this.insertShaderBorders(c,x,y,null,-y,0,!0),this.insertShaderBorders(c,x,y,null,-y,0,!1),this.insertShaderBorders(c,y,x+y,-y,null,-y,!0),this.insertShaderBorders(c,y,x+y,null,-y,-y,!0),this.insertShaderBorders(c,y,x+y,-y,null,-y,!1),this.insertShaderBorders(c,y,x+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(c)}},t.prototype.insertShaderBorders=function(e,n,i,a,c,d,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=_n.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(i,"px"),a!==null&&(y.style.top="".concat(a,"px")),c!==null&&(y.style.bottom="".concat(c,"px")),m?y.style.left="".concat(d,"px"):y.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),zh="data:image/svg+xml;base64,",G_=zh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Y_=zh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",c0=zh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",X_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",u0=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),Q_=function(){function t(){this.data=u0.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=u0.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),K_=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=t0.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=t0.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),Z_=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=c0,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=X_,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=c0,this.infoIcon.style.opacity="0.6")},t}(),q_=function(){function t(){var e=this;this.infoDiv=new K_,this.infoIcon=new Z_(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),$_=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},J_=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},f0=function(){function t(){}return t.hasPermissions=function(){return $_(this,void 0,void 0,function(){var e,n,i,a;return J_(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=c.sent(),n=0,i=e;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},t}(),Hr=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var i=n[e];if(t.isCameraScanType(i))return!0}return!1},t.isCameraScanType=function(e){return e===li.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===li.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Yn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Yn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=e;i<a.length;i++){var c=a[i];if(!Yn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return e},t}(),An=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),wr=function(){function t(){}return t.createElement=function(e,n){var i=document.createElement(e);return i.id=n,i.classList.add(An.ALL_ELEMENT_CLASS),e==="button"&&i.setAttribute("type","button"),i},t}(),bm=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(A){try{x(i.next(A))}catch(E){d(E)}}function y(A){try{x(i.throw(A))}catch(E){d(E)}}function x(A){A.done?c(A.value):a(A.value).then(m,y)}x((i=i.apply(t,e||[])).next())})},Rm=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(x){return function(A){return y([x,A])}}function y(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(n=0)),n;)try{if(i=1,a&&(c=x[0]&2?a.return:x[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,x[1])).done)return c;switch(a=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){n.label=x[1];break}if(x[0]===6&&n.label<c[1]){n.label=c[1],c=x;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(x);break}c[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(A){x=[6,A],a=0}finally{i=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},h0=function(){function t(e,n,i){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=i}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return bm(this,void 0,void 0,function(){var e,n;return Rm(this,function(i){switch(i.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=i.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Ue.torchOffButton():Ue.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var i=e?Ue.torchOnFailedMessage():Ue.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),eC=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=wr.createElement("button",An.TORCH_BUTTON_ID),this.torchController=new h0(e,this,n)}return t.prototype.render=function(e,n){var i=this;this.torchButton.innerText=Ue.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(c){return bm(i,void 0,void 0,function(){return Rm(this,function(d){switch(d.label){case 0:return[4,a.torchController.flipState()];case 1:return d.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(An.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(An.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(An.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(An.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new h0(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Ue.torchOnButton(),this.torchController.reset()},t.create=function(e,n,i,a){var c=new t(n,a);return c.render(e,i),c},t}(),tC=function(){function t(e,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=wr.createElement("button",An.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=wr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var y=m.target;if(!(y.files&&y.files.length===0)){var x=y.files,A=x[0],E=A.name;c.setImageNameToButton(E),i(A)}}});var d=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(d),this.fileBasedScanRegion.addEventListener("dragenter",function(m){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var y=m.dataTransfer;if(y){var x=y.files;if(!x||x.length===0)return;for(var A=!1,E=0;E<x.length;++E){var I=x.item(E);if(I){var D=/image.*/;if(I.type.match(D)){A=!0;var F=I.name;c.setImageNameToButton(F),i(I),d.innerText=Ue.dragAndDropMessage();break}}}A||(d.innerText=Ue.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Ue.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var i=e.substring(0,8),a=e.length,c=e.substring(a-8,a);e="".concat(i,"....").concat(c)}var d=Ue.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=d},t.prototype.setInitialValueToButton=function(){var e=Ue.fileSelectionChooseImage()+" - "+Ue.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,i){var a=new t(e,n,i);return a},t}(),nC=function(){function t(e){this.selectElement=wr.createElement("select",An.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=Ue.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var c=1,d=0,m=this.cameras;d<m.length;d++){var y=m[d],x=y.id,A=y.label==null?x:y.label;(!A||A==="")&&(A=[Ue.anonymousCameraPrefix(),c++].join(" "));var E=document.createElement("option");E.value=x,E.innerText=A,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var i=new t(n);return i.render(e),i},t}(),rC=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=wr.createElement("input",An.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Ue.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Ue.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,i,a){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var i=new t;return i.render(e,n),i},t}(),Cn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Cn||(Cn={}));function iC(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function sC(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var oC=function(){function t(e,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Hr(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new vm(this.verbose),this.persistedDataManager=new Q_,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,d){if(e)e(c,d);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage(Ue.lastMatch(c),Cn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,d){n&&n(c,d)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new l0(this.getScanRegionId(),sC(this.config,this.verbose))},t.prototype.pause=function(e){(ur(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var i=document.getElementById(e.elementId);i&&(i.innerHTML="",e.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!e.html5Qrcode){i();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(c){if(!e.html5Qrcode){i();return}e.html5Qrcode.clear(),n(),i()}).catch(function(c){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(e.html5Qrcode.clear(),n(),i())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Yn.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Yn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Yn.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Yn.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Yn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Yn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Yn.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Hr.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",e.appendChild(a),this.setupInitialDashboard(a)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var i=new q_;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Ue.cameraPermissionRequesting());var c=function(){i||a.createPermissionButton(e,n)};l0.getCameras().then(function(d){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),d&&d.length>0?(e.removeChild(n),a.renderCameraSelection(d)):(a.setHeaderMessage(Ue.noCameraFound(),Cn.STATUS_WARNING),c())}).catch(function(d){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),a.setHeaderMessage(d,Cn.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var i=this,a=wr.createElement("button",this.getCameraPermissionButtonId());a.innerText=Ue.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(e,n,a)}),n.appendChild(a)},t.prototype.createPermissionsUi=function(e,n){var i=this;if(Hr.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){f0.hasPermissions().then(function(a){a?i.createCameraListUi(e,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Hr.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Hr.isFileScanType(this.currentScanType),i=this,a=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Hr.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Ue.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(d){i.resetHeaderMessage(),i.qrCodeSuccessCallback(d.decodedText,d)}).catch(function(d){i.setHeaderMessage(d,Cn.STATUS_WARNING),i.qrCodeErrorCallback(d,Im.createFrom(d))}))};this.fileSelectionUi=tC.create(e,n,a)},t.prototype.renderCameraSelection=function(e){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=rC.create(a,!1),d=function(B){var te=B.zoomFeature();if(te.isSupported()){c.setOnCameraZoomValueChangeCallback(function(N){te.apply(N)});var O=1;n.config.defaultZoomValueIfSupported&&(O=n.config.defaultZoomValueIfSupported),O=S_(O,te.min(),te.max()),c.setValues(te.min(),te.max(),O,te.step()),c.show()}},m=nC.create(a,e),y=document.createElement("span"),x=wr.createElement("button",An.CAMERA_START_BUTTON_ID);x.innerText=Ue.scanButtonStartScanningText(),y.appendChild(x);var A=wr.createElement("button",An.CAMERA_STOP_BUTTON_ID);A.innerText=Ue.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,y.appendChild(A);var E,I=function(B){if(!B.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(B.torchFeature()):E=eC.create(y,B.torchFeature(),{display:"none",marginLeft:"5px"},function(te){i.setHeaderMessage(te,Cn.STATUS_WARNING)}),E.show()};a.appendChild(y);var D=function(B){B||(x.style.display="none"),x.innerText=Ue.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,B&&(x.style.display="inline-block")};if(x.addEventListener("click",function(B){x.innerText=Ue.scanButtonScanningStarting(),m.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var te=m.getValue();i.persistedDataManager.setLastUsedCameraId(te),i.html5Qrcode.start(te,iC(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(O){A.disabled=!1,A.style.display="inline-block",D(!1);var N=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&I(N),n.config.showZoomSliderIfSupported===!0&&d(N)}).catch(function(O){i.showHideScanTypeSwapLink(!0),m.enable(),D(!0),i.setHeaderMessage(O,Cn.STATUS_WARNING)})}),m.hasSingleItem()&&x.click(),A.addEventListener("click",function(B){if(!i.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,i.html5Qrcode.stop().then(function(te){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),m.enable(),x.disabled=!1,A.style.display="none",x.style.display="inline-block",E&&(E.reset(),E.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(te){A.disabled=!1,i.setHeaderMessage(te,Cn.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var F=i.persistedDataManager.getLastUsedCameraId();m.hasValue(F)?(m.setValue(F),x.click()):i.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=Ue.textIfCameraScanSelected(),i=Ue.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var d=wr.createElement("span",this.getDashboardSectionSwapLinkId());d.style.textDecoration="underline",d.style.cursor="pointer",d.innerText=Hr.isCameraScanType(this.currentScanType)?n:i,d.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Hr.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),d.innerText=i,e.currentScanType=li.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),d.innerText=n,e.currentScanType=li.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),c.appendChild(d),a.appendChild(c)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){f0.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Cn.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=e,i.style.display="block",n){case Cn.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Cn.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Cn.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=G_,this.cameraScanImage.alt=Ue.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Y_,this.fileScanImage.alt=Ue.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return An.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return An.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const aC=({onScan:t,scanResult:e})=>{const n="qr-reader-container";return Ke.useEffect(()=>{const i=new oC(n,{qrbox:{width:250,height:400},fps:5},!1),a=d=>{t(d)},c=d=>{};return i.render(a,c),()=>{i&&i.getState()!==1&&i.clear().catch(d=>{console.error("Failed to clear scanner on unmount.",d)})}},[t]),W.jsxs("div",{className:"bg-gfg-card-bg rounded-lg border border-gfg-border p-6",children:[W.jsxs("h3",{className:"text-gfg-text-light font-bold text-lg mb-4 flex items-center font-heading uppercase tracking-wider",children:[W.jsx(m_,{className:"w-5 h-5 mr-2 text-gfg-gold"}),"Identity Scan"]}),W.jsx("div",{className:"w-full max-w-sm mx-auto p-1 bg-gfg-dark-bg rounded-lg shadow-inner",children:W.jsx("div",{className:"w-full aspect-square rounded overflow-hidden relative",children:W.jsx("div",{id:n})})}),e&&W.jsxs("div",{className:`mt-4 flex items-start space-x-2 p-3 rounded-lg border ${e.type==="success"?"text-green-400 bg-green-500/10 border-green-500/20":e.type==="warning"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gfg-gold bg-gfg-gold/10 border-gfg-gold/20"}`,children:[W.jsx(Fh,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),W.jsx("span",{className:"text-sm font-body",children:e.text})]})]})};var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw js(e)},js=function(t){return new Error("Firebase Database ("+Mm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},lC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=t[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=t[n++],d=t[n++],m=t[n++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const c=t[n++],d=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},jh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const c=t[a],d=a+1<t.length,m=d?t[a+1]:0,y=a+2<t.length,x=y?t[a+2]:0,A=c>>2,E=(c&3)<<4|m>>4;let I=(m&15)<<2|x>>6,D=x&63;y||(D=64,d||(I=64)),i.push(n[A],n[E],n[I],n[D])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Om(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const c=n[t.charAt(a++)],m=a<t.length?n[t.charAt(a)]:0;++a;const x=a<t.length?n[t.charAt(a)]:64;++a;const E=a<t.length?n[t.charAt(a)]:64;if(++a,c==null||m==null||x==null||E==null)throw new cC;const I=c<<2|m>>4;if(i.push(I),x!==64){const D=m<<4&240|x>>2;if(i.push(D),E!==64){const F=x<<6&192|E;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dm=function(t){const e=Om(t);return jh.encodeByteArray(e,!0)},Pl=function(t){return Dm(t).replace(/\./g,"")},Sf=function(t){try{return jh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){return km(void 0,t)}function km(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!fC(n)||(t[n]=km(t[n],e[n]));return t}function fC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=()=>hC().__FIREBASE_DEFAULTS__,gC=()=>{if(typeof process>"u"||typeof d0>"u")return;const t=d0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sf(t[1]);return e&&JSON.parse(e)},Lm=()=>{try{return dC()||gC()||pC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mC=t=>{var e,n;return(n=(e=Lm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xC=t=>{const e=mC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Pm=()=>{var t;return(t=Lm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pl(JSON.stringify(n)),Pl(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wC())}function _C(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CC(){return Mm.NODE_ADMIN===!0}function EC(){try{return typeof indexedDB=="object"}catch{return!1}}function AC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="FirebaseError";class ha extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=SC,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fm.prototype.create)}}class Fm{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?IC(c,i):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new ha(a,m,i)}}function IC(t,e){return t.replace(vC,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const vC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){return JSON.parse(t)}function kt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=function(t){let e={},n={},i={},a="";try{const c=t.split(".");e=$o(Sf(c[0])||""),n=$o(Sf(c[1])||""),a=c[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:a}},TC=function(t){const e=Um(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},NC=function(t){const e=Um(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ks(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function g0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bl(t,e,n){const i={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=e.call(n,t[a],a,t));return i}function If(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=t[a],d=e[a];if(p0(c)&&p0(d)){if(!If(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function p0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)i[E]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let E=0;E<16;E++)i[E]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let E=16;E<80;E++){const I=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(I<<1|I>>>31)&4294967295}let a=this.chain_[0],c=this.chain_[1],d=this.chain_[2],m=this.chain_[3],y=this.chain_[4],x,A;for(let E=0;E<80;E++){E<40?E<20?(x=m^c&(d^m),A=1518500249):(x=c^d^m,A=1859775393):E<60?(x=c&d|m&(c|d),A=2400959708):(x=c^d^m,A=3395469782);const I=(a<<5|a>>>27)+x+y+A+i[E]&4294967295;y=m,m=d,d=(c<<30|c>>>2)&4294967295,c=a,a=I}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let a=0;const c=this.buf_;let d=this.inbuf_;for(;a<n;){if(d===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<n;)if(c[d]=e.charCodeAt(a),++d,++a,d===this.blockSize){this.compress_(c),d=0;break}}else for(;a<n;)if(c[d]=e[a],++d,++a,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[a]>>c&255,++i;return e}}function Hh(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);if(a>=55296&&a<=56319){const c=a-55296;i++,$(i<t.length,"Surrogate pair missing trail surrogate.");const d=t.charCodeAt(i)-56320;a=65536+(c<<10)+d}a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):a<65536?(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},mc=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){return t&&t._delegate?t._delegate:t}class Jo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new pc;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kC(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DC(t){return t===Si?void 0:t}function kC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const PC={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},BC=Qe.INFO,FC={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},UC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=FC[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=BC,this._logHandler=UC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const zC=(t,e)=>e.some(n=>t instanceof n);let m0,x0;function jC(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HC(){return x0||(x0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jm=new WeakMap,vf=new WeakMap,Hm=new WeakMap,xu=new WeakMap,Vh=new WeakMap;function VC(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(ri(t.result)),a()},d=()=>{i(t.error),a()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&jm.set(n,t)}).catch(()=>{}),Vh.set(e,t),e}function WC(t){if(vf.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});vf.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GC(t){Tf=t(Tf)}function YC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(yu(this),e,...n);return Hm.set(i,e.sort?e.sort():[e]),ri(i)}:HC().includes(t)?function(...e){return t.apply(yu(this),e),ri(jm.get(this))}:function(...e){return ri(t.apply(yu(this),e))}}function XC(t){return typeof t=="function"?YC(t):(t instanceof IDBTransaction&&WC(t),zC(t,jC())?new Proxy(t,Tf):t)}function ri(t){if(t instanceof IDBRequest)return VC(t);if(xu.has(t))return xu.get(t);const e=XC(t);return e!==t&&(xu.set(t,e),Vh.set(e,t)),e}const yu=t=>Vh.get(t);function QC(t,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(t,e),m=ri(d);return i&&d.addEventListener("upgradeneeded",y=>{i(ri(d.result),y.oldVersion,y.newVersion,ri(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),m}const KC=["get","getKey","getAll","getAllKeys","count"],ZC=["put","add","delete","clear"],wu=new Map;function y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wu.get(e))return wu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=ZC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||KC.includes(n)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let x=y.store;return i&&(x=x.index(m.shift())),(await Promise.all([x[n](...m),a&&y.done]))[0]};return wu.set(e,c),c}GC(t=>({...t,get:(e,n,i)=>y0(e,n)||t.get(e,n,i),has:(e,n)=>!!y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($C(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $C(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nf="@firebase/app",w0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new zm("@firebase/app"),JC="@firebase/app-compat",eE="@firebase/analytics-compat",tE="@firebase/analytics",nE="@firebase/app-check-compat",rE="@firebase/app-check",iE="@firebase/auth",sE="@firebase/auth-compat",oE="@firebase/database",aE="@firebase/data-connect",lE="@firebase/database-compat",cE="@firebase/functions",uE="@firebase/functions-compat",fE="@firebase/installations",hE="@firebase/installations-compat",dE="@firebase/messaging",gE="@firebase/messaging-compat",pE="@firebase/performance",mE="@firebase/performance-compat",xE="@firebase/remote-config",yE="@firebase/remote-config-compat",wE="@firebase/storage",_E="@firebase/storage-compat",CE="@firebase/firestore",EE="@firebase/vertexai-preview",AE="@firebase/firestore-compat",SE="firebase",IE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",vE={[Nf]:"fire-core",[JC]:"fire-core-compat",[tE]:"fire-analytics",[eE]:"fire-analytics-compat",[rE]:"fire-app-check",[nE]:"fire-app-check-compat",[iE]:"fire-auth",[sE]:"fire-auth-compat",[oE]:"fire-rtdb",[aE]:"fire-data-connect",[lE]:"fire-rtdb-compat",[cE]:"fire-fn",[uE]:"fire-fn-compat",[fE]:"fire-iid",[hE]:"fire-iid-compat",[dE]:"fire-fcm",[gE]:"fire-fcm-compat",[pE]:"fire-perf",[mE]:"fire-perf-compat",[xE]:"fire-rc",[yE]:"fire-rc-compat",[wE]:"fire-gcs",[_E]:"fire-gcs-compat",[CE]:"fire-fst",[AE]:"fire-fst-compat",[EE]:"fire-vertex","fire-js":"fire-js",[SE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,TE=new Map,Rf=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ul(t){const e=t.name;if(Rf.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;Rf.set(e,t);for(const n of Fl.values())_0(n,t);for(const n of TE.values())_0(n,t);return!0}function NE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new Fm("app","Firebase",bE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=IE;function Vm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bf,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ii.create("bad-app-name",{appName:String(a)});if(n||(n=Pm()),!n)throw ii.create("no-options");const c=Fl.get(a);if(c){if(If(n,c.options)&&If(i,c.config))return c;throw ii.create("duplicate-app",{appName:a})}const d=new LC(a);for(const y of Rf.values())d.addComponent(y);const m=new RE(n,i,d);return Fl.set(a,m),m}function OE(t=bf){const e=Fl.get(t);if(!e&&t===bf&&Pm())return Vm();if(!e)throw ii.create("no-app",{appName:t});return e}function As(t,e,n){var i;let a=(i=vE[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(m.join(" "));return}Ul(new Jo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebase-heartbeat-database",kE=1,ea="firebase-heartbeat-store";let _u=null;function Wm(){return _u||(_u=QC(DE,kE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),_u}async function LE(t){try{const n=(await Wm()).transaction(ea),i=await n.objectStore(ea).get(Gm(t));return await n.done,i}catch(e){if(e instanceof ha)Tr.warn(e.message);else{const n=ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function C0(t,e){try{const i=(await Wm()).transaction(ea,"readwrite");await i.objectStore(ea).put(e,Gm(t)),await i.done}catch(n){if(n instanceof ha)Tr.warn(n.message);else{const i=ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(i.message)}}}function Gm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=1024,BE=30*24*60*60*1e3;class FE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zE(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=E0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=BE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Tr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=E0(),{heartbeatsToSend:i,unsentEntries:a}=UE(this._heartbeatsCache.heartbeats),c=Pl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Tr.warn(n),""}}}function E0(){return new Date().toISOString().substring(0,10)}function UE(t,e=PE){const n=[];let i=t.slice();for(const a of t){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),A0(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),A0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EC()?AC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return C0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return C0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function A0(t){return Pl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){Ul(new Jo("platform-logger",e=>new qC(e),"PRIVATE")),Ul(new Jo("heartbeat",e=>new FE(e),"PRIVATE")),As(Nf,w0,t),As(Nf,w0,"esm2017"),As("fire-js","")}jE("");var HE="firebase",VE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(HE,VE,"app");var S0={};const I0="@firebase/database",v0="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym="";function WE(t){Ym=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),kt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:$o(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Or(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new GE(e)}}catch{}return new YE},bi=Xm("localStorage"),XE=Xm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new zm("@firebase/database"),QE=function(){let t=1;return function(){return t++}}(),Qm=function(t){const e=MC(t),n=new RC;n.update(e);const i=n.digest();return jh.encodeByteArray(i)},ga=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ga.apply(null,i):typeof i=="object"?e+=kt(i):e+=i,e+=" "}return e};let Ro=null,T0=!0;const KE=function(t,e){$(!0,"Can't turn on custom loggers persistently."),Ss.logLevel=Qe.VERBOSE,Ro=Ss.log.bind(Ss)},Kt=function(...t){if(T0===!0&&(T0=!1,Ro===null&&XE.get("logging_enabled")===!0&&KE()),Ro){const e=ga.apply(null,t);Ro(e)}},pa=function(t){return function(...e){Kt(t,...e)}},Mf=function(...t){const e="FIREBASE INTERNAL ERROR: "+ga(...t);Ss.error(e)},Nr=function(...t){const e=`FIREBASE FATAL ERROR: ${ga(...t)}`;throw Ss.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+ga(...t);Ss.warn(e)},ZE=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Km=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},qE=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ls="[MIN_NAME]",Fi="[MAX_NAME]",Hs=function(t,e){if(t===e)return 0;if(t===Ls||e===Fi)return-1;if(e===Ls||t===Fi)return 1;{const n=N0(t),i=N0(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},$E=function(t,e){return t===e?0:t<e?-1:1},ho=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+kt(e))},Wh=function(t){if(typeof t!="object"||t===null)return kt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=kt(e[i]),n+=":",n+=Wh(t[e[i]]);return n+="}",n},Zm=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let a=0;a<n;a+=e)a+e>n?i.push(t.substring(a,n)):i.push(t.substring(a,a+e));return i};function yn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qm=function(t){$(!Km(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let a,c,d,m,y;t===0?(c=0,d=0,a=1/t===-1/0?1:0):(a=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(m=Math.min(Math.floor(Math.log(t)/Math.LN2),i),c=m+i,d=Math.round(t*Math.pow(2,n-m)-Math.pow(2,n))):(c=0,d=Math.round(t/Math.pow(2,1-i-n))));const x=[];for(y=n;y;y-=1)x.push(d%2?1:0),d=Math.floor(d/2);for(y=e;y;y-=1)x.push(c%2?1:0),c=Math.floor(c/2);x.push(a?1:0),x.reverse();const A=x.join("");let E="";for(y=0;y<64;y+=8){let I=parseInt(A.substr(y,8),2).toString(16);I.length===1&&(I="0"+I),E=E+I}return E.toLowerCase()},JE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},e3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function t3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const n3=new RegExp("^-?(0*)\\d{1,10}$"),r3=-2147483648,i3=2147483647,N0=function(t){if(n3.test(t)){const e=Number(t);if(e>=r3&&e<=i3)return e}return null},Vs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},s3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class cl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}cl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="5",$m="v",Jm="s",e2="r",t2="f",n2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,r2="ls",i2="p",Of="ac",s2="websocket",o2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i,a,c=!1,d="",m=!1,y=!1){this.secure=n,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function l3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function l2(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let i;if(e===s2)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===o2)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);l3(t)&&(n.ns=t.namespace);const a=[];return yn(n,(c,d)=>{a.push(c+"="+d)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.counters_={}}incrementCounter(e,n=1){Or(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return uC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={},Eu={};function Yh(t){const e=t.toString();return Cu[e]||(Cu[e]=new c3),Cu[e]}function u3(t,e){const n=t.toString();return Eu[n]||(Eu[n]=e()),Eu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Vs(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="start",h3="close",d3="pLPCommand",g3="pRTLPCB",c2="id",u2="pw",f2="ser",p3="cb",m3="seg",x3="ts",y3="d",w3="dframe",h2=1870,d2=30,_3=h2-d2,C3=25e3,E3=3e4;class ms{constructor(e,n,i,a,c,d,m){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pa(e),this.stats_=Yh(n),this.urlFn=y=>(this.appCheckToken&&(y[Of]=this.appCheckToken),l2(n,o2,y))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new f3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(E3)),qE(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xh((...c)=>{const[d,m,y,x,A]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===b0)this.id=m,this.password=y;else if(d===h3)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const i={};i[b0]="t",i[f2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[p3]=this.scriptTagHolder.uniqueCallbackIdentifier),i[$m]=Gh,this.transportSessionId&&(i[Jm]=this.transportSessionId),this.lastSessionId&&(i[r2]=this.lastSessionId),this.applicationId&&(i[i2]=this.applicationId),this.appCheckToken&&(i[Of]=this.appCheckToken),typeof location<"u"&&location.hostname&&n2.test(location.hostname)&&(i[e2]=t2);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ms.forceAllow_=!0}static forceDisallow(){ms.forceDisallow_=!0}static isAvailable(){return ms.forceAllow_?!0:!ms.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!JE()&&!e3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Dm(n),a=Zm(i,_3);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[w3]="t",i[c2]=e,i[u2]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=kt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Xh{constructor(e,n,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QE(),window[d3+this.uniqueCallbackIdentifier]=e,window[g3+this.uniqueCallbackIdentifier]=n,this.myIFrame=Xh.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){Kt("frame writing exception"),m.stack&&Kt(m.stack),Kt(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Kt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[c2]=this.myID,e[u2]=this.myPW,e[f2]=this.currentSerial;let n=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+d2+i.length<=h2;){const d=this.pendingSegs.shift();i=i+"&"+m3+a+"="+d.seg+"&"+x3+a+"="+d.ts+"&"+y3+a+"="+d.d,a++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},a=setTimeout(i,Math.floor(C3)),c=()=>{clearTimeout(a),i()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=16384,S3=45e3;let zl=null;typeof MozWebSocket<"u"?zl=MozWebSocket:typeof WebSocket<"u"&&(zl=WebSocket);class Qn{constructor(e,n,i,a,c,d,m){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pa(this.connId),this.stats_=Yh(n),this.connURL=Qn.connectionURL_(n,d,m,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,a,c){const d={};return d[$m]=Gh,typeof location<"u"&&location.hostname&&n2.test(location.hostname)&&(d[e2]=t2),n&&(d[Jm]=n),i&&(d[r2]=i),a&&(d[Of]=a),c&&(d[i2]=c),l2(e,s2,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bi.set("previous_websocket_failure",!0);try{let i;CC(),this.mySock=new zl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Qn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&zl!==null&&!Qn.forceDisallow_}static previouslyFailed(){return bi.isInMemoryStorage||bi.get("previous_websocket_failure")===!0}markConnectionHealthy(){bi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=$o(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Zm(n,A3);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qn.responsesRequiredToBeHealthy=2;Qn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ms,Qn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Qn&&Qn.isAvailable();let i=n&&!Qn.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Qn];else{const a=this.transports_=[];for(const c of ta.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);ta.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ta.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=6e4,v3=5e3,T3=10*1024,N3=100*1024,Au="t",R0="d",b3="s",M0="r",R3="e",O0="o",D0="a",k0="n",L0="p",M3="h";class O3{constructor(e,n,i,a,c,d,m,y,x,A){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=y,this.onKill_=x,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pa("c:"+this.id+":"),this.transportManager_=new ta(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Mo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>N3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>T3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Au in e){const n=e[Au];n===D0?this.upgradeIfSecondaryHealthy_():n===M0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===O0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ho("t",e),i=ho("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:L0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:k0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ho("t",e),i=ho("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ho(Au,e);if(R0 in e){const i=e[R0];if(n===M3){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(n===k0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===b3?this.onConnectionShutdown_(i):n===M0?this.onReset_(i):n===R3?Mf("Server Error: "+i):n===O0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gh!==i&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Mo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(I3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(v3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:L0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{put(e,n,i,a){}merge(e,n,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const a=this.getInitialEvent(e);a&&n.apply(i,a)}off(e,n,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let c=0;c<a.length;c++)if(a[c].callback===n&&(!i||i===a[c].context)){a.splice(c,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends p2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Bm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jl}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=32,B0=768;class Ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new Ge("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ci(t){return t.pieces_.length-t.pieceNum_}function Ze(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ge(t.pieces_,e)}function m2(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function D3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function x2(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function y2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ge(e,0)}function vt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Ge)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&n.push(i[a])}return new Ge(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function hn(t,e){const n=Ae(t),i=Ae(e);if(n===null)return e;if(n===i)return hn(Ze(t),Ze(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Qh(t,e){if(ci(t)!==ci(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Kn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(ci(t)>ci(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class k3{constructor(e,n){this.errorPrefix_=n,this.parts_=x2(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=mc(this.parts_[i]);w2(this)}}function L3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=mc(e),w2(t)}function P3(t){const e=t.parts_.pop();t.byteLength_-=mc(e),t.parts_.length>0&&(t.byteLength_-=1)}function w2(t){if(t.byteLength_>B0)throw new Error(t.errorPrefix_+"has a key path longer than "+B0+" bytes ("+t.byteLength_+").");if(t.parts_.length>P0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+P0+") or object contains a cycle "+Ii(t))}function Ii(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends p2{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Kh}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=1e3,B3=60*5*1e3,F0=30*1e3,F3=1.3,U3=3e4,z3="server_kill",U0=3;class Er extends g2{constructor(e,n,i,a,c,d,m,y){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=Er.nextPersistentConnectionId_++,this.log_=pa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=go,this.maxReconnectDelay_=B3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&jl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const a=++this.requestNumber_,c={r:a,a:e,b:n};this.log_(kt(c)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const n=new pc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?n.resolve(m):n.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,i,a){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:n,query:e,tag:i};this.listens.get(d).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),a=n._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i},d="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,m=>{const y=m.d,x=m.s;Er.warnOnListenWarnings_(y,n),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",m),x!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(x,y))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Or(e,"w")){const i=ks(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||NC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=F0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=TC(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,a=>{const c=a.s,d=a.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,n)}sendUnlisten_(e,n,i,a){this.log_("Unlisten on "+e+" for "+n);const c={p:e},d="n";a&&(c.q=i,c.t=a),this.sendRequest(d,c)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,a){const c={p:n,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(e,n,i,a){this.putInternal("p",e,n,i,a)}merge(e,n,i,a){this.putInternal("m",e,n,i,a)}putInternal(e,n,i,a,c){this.initConnection_();const d={p:n,d:i};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:a}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+kt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Mf("Unrecognized action received from server: "+kt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>U3&&(this.reconnectDelay_=go),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*F3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Er.nextConnectionId_++,c=this.lastSessionId;let d=!1,m=null;const y=function(){m?m.close():(d=!0,i())},x=function(E){$(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(E)};this.realtime_={close:y,sendRequest:x};const A=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,I]=await Promise.all([this.authTokenProvider_.getToken(A),this.appCheckTokenProvider_.getToken(A)]);d?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=I&&I.token,m=new O3(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,D=>{xn(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(z3)},c))}catch(E){this.log_("Failed to get token: "+E),d||(this.repoInfo_.nodeAdmin&&xn(E),y())}}}interrupt(e){Kt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Kt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],g0(this.interruptReasons_)&&(this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(c=>Wh(c)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,n){const i=new Ge(e).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(n),c.delete(n),c.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,n){Kt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=U0&&(this.reconnectDelay_=F0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Kt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=U0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ym.replace(/\./g,"-")]=1,Bm()?e["framework.cordova"]=1:_C()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=jl.getInstance().currentlyOnline();return g0(this.interruptReasons_)&&e}}Er.nextPersistentConnectionId_=0;Er.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Se(Ls,e),a=new Se(Ls,n);return this.compare(i,a)!==0}minPost(){return Se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka;class _2 extends xc{static get __EMPTY_NODE(){return Ka}static set __EMPTY_NODE(e){Ka=e}compare(e,n){return Hs(e.name,n.name)}isDefinedOn(e){throw js("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Se.MIN}maxPost(){return new Se(Fi,Ka)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Se(e,Ka)}toString(){return".key"}}const Is=new _2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,i,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?i(e.key,n):1,a&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Dt.RED,this.left=a??dn.EMPTY_NODE,this.right=c??dn.EMPTY_NODE}copy(e,n,i,a,c){return new Dt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return c<0?a=a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a=a.copy(null,n,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return dn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,a;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0;Dt.BLACK=!1;class j3{copy(e,n,i,a,c){return this}insert(e,n,i){return new Dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class dn{constructor(e,n=dn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new dn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new dn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,a=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Za(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Za(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Za(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Za(this.root_,null,this.comparator_,!0,e)}}dn.EMPTY_NODE=new j3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e){return Hs(t.name,e.name)}function Zh(t,e){return Hs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df;function V3(t){Df=t}const C2=function(t){return typeof t=="number"?"number:"+qm(t):"string:"+t},E2=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Or(e,".sv"),"Priority must be a string or number.")}else $(t===Df||t.isEmpty(),"priority of unexpected type.");$(t===Df||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z0;class Mt{constructor(e,n=Mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),E2(this.priorityNode_)}static set __childrenNodeConstructor(e){z0=e}static get __childrenNodeConstructor(){return z0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ie(e)?this:Ae(e)===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ae(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:($(i!==".priority"||ci(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ze(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+C2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qm(this.value_):e+=this.value_,this.lazyHash_=Qm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,a=Mt.VALUE_TYPE_ORDER.indexOf(n),c=Mt.VALUE_TYPE_ORDER.indexOf(i);return $(a>=0,"Unknown leaf type: "+n),$(c>=0,"Unknown leaf type: "+i),a===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A2,S2;function W3(t){A2=t}function G3(t){S2=t}class Y3 extends xc{compare(e,n){const i=e.node.getPriority(),a=n.node.getPriority(),c=i.compareTo(a);return c===0?Hs(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Se.MIN}maxPost(){return new Se(Fi,new Mt("[PRIORITY-POST]",S2))}makePost(e,n){const i=A2(e);return new Se(n,new Mt("[PRIORITY-POST]",i))}toString(){return".priority"}}const xt=new Y3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=Math.log(2);class Q3{constructor(e){const n=c=>parseInt(Math.log(c)/X3,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hl=function(t,e,n,i){t.sort(e);const a=function(y,x){const A=x-y;let E,I;if(A===0)return null;if(A===1)return E=t[y],I=n?n(E):E,new Dt(I,E.node,Dt.BLACK,null,null);{const D=parseInt(A/2,10)+y,F=a(y,D),B=a(D+1,x);return E=t[D],I=n?n(E):E,new Dt(I,E.node,Dt.BLACK,F,B)}},c=function(y){let x=null,A=null,E=t.length;const I=function(F,B){const te=E-F,O=E;E-=F;const N=a(te+1,O),b=t[te],H=n?n(b):b;D(new Dt(H,b.node,B,null,N))},D=function(F){x?(x.left=F,x=F):(A=F,x=F)};for(let F=0;F<y.count;++F){const B=y.nextBitIsOne(),te=Math.pow(2,y.count-(F+1));B?I(te,Dt.BLACK):(I(te,Dt.BLACK),I(te,Dt.RED))}return A},d=new Q3(t.length),m=c(d);return new dn(i||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;const ns={};class _r{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(ns&&xt,"ChildrenNode.ts has not been loaded"),Su=Su||new _r({".priority":ns},{".priority":xt}),Su}get(e){const n=ks(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof dn?n:null}hasIndex(e){return Or(this.indexSet_,e.toString())}addIndex(e,n){$(e!==Is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const c=n.getIterator(Se.Wrap);let d=c.getNext();for(;d;)a=a||e.isDefinedOn(d.node),i.push(d),d=c.getNext();let m;a?m=Hl(i,e.getCompare()):m=ns;const y=e.toString(),x=Object.assign({},this.indexSet_);x[y]=e;const A=Object.assign({},this.indexes_);return A[y]=m,new _r(A,x)}addToIndexes(e,n){const i=Bl(this.indexes_,(a,c)=>{const d=ks(this.indexSet_,c);if($(d,"Missing index implementation for "+c),a===ns)if(d.isDefinedOn(e.node)){const m=[],y=n.getIterator(Se.Wrap);let x=y.getNext();for(;x;)x.name!==e.name&&m.push(x),x=y.getNext();return m.push(e),Hl(m,d.getCompare())}else return ns;else{const m=n.get(e.name);let y=a;return m&&(y=y.remove(new Se(e.name,m))),y.insert(e,e.node)}});return new _r(i,this.indexSet_)}removeFromIndexes(e,n){const i=Bl(this.indexes_,a=>{if(a===ns)return a;{const c=n.get(e.name);return c?a.remove(new Se(e.name,c)):a}});return new _r(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po;class pe{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&E2(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return po||(po=new pe(new dn(Zh),null,_r.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||po}updatePriority(e){return this.children_.isEmpty()?this:new pe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?po:n}}getChild(e){const n=Ae(e);return n===null?this:this.getImmediateChild(n).getChild(Ze(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Se(e,n);let a,c;n.isEmpty()?(a=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?po:this.priorityNode_;return new pe(a,d,c)}}updateChild(e,n){const i=Ae(e);if(i===null)return n;{$(Ae(e)!==".priority"||ci(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Ze(e),n);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,a=0,c=!0;if(this.forEachChild(xt,(d,m)=>{n[d]=m.val(e),i++,c&&pe.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):c=!1}),!e&&c&&a<2*i){const d=[];for(const m in n)d[m]=n[m];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+C2(this.getPriority().val())+":"),this.forEachChild(xt,(n,i)=>{const a=i.hash();a!==""&&(e+=":"+n+":"+a)}),this.lazyHash_=e===""?"":Qm(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Se(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Se(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>n(a.name,a.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Se.Wrap);let c=a.peek();for(;c!=null&&n.compare(c,e)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Se.Wrap);let c=a.peek();for(;c!=null&&n.compare(c,e)>0;)a.getNext(),c=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ma?-1:0}withIndex(e){if(e===Is||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new pe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Is||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(xt),a=n.getIterator(xt);let c=i.getNext(),d=a.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=a.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Is?null:this.indexMap_.get(e.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class K3 extends pe{constructor(){super(new dn(Zh),pe.EMPTY_NODE,_r.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}}const ma=new K3;Object.defineProperties(Se,{MIN:{value:new Se(Ls,pe.EMPTY_NODE)},MAX:{value:new Se(Fi,ma)}});_2.__EMPTY_NODE=pe.EMPTY_NODE;Mt.__childrenNodeConstructor=pe;V3(ma);G3(ma);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=!0;function jt(t,e=null){if(t===null)return pe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Mt(n,jt(e))}if(!(t instanceof Array)&&Z3){const n=[];let i=!1;if(yn(t,(d,m)=>{if(d.substring(0,1)!=="."){const y=jt(m);y.isEmpty()||(i=i||!y.getPriority().isEmpty(),n.push(new Se(d,y)))}}),n.length===0)return pe.EMPTY_NODE;const c=Hl(n,H3,d=>d.name,Zh);if(i){const d=Hl(n,xt.getCompare());return new pe(c,jt(e),new _r({".priority":d},{".priority":xt}))}else return new pe(c,jt(e),_r.Default)}else{let n=pe.EMPTY_NODE;return yn(t,(i,a)=>{if(Or(t,i)&&i.substring(0,1)!=="."){const c=jt(a);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(i,c))}}),n.updatePriority(jt(e))}}W3(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3 extends xc{constructor(e){super(),this.indexPath_=e,$(!Ie(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),a=this.extractChild(n.node),c=i.compareTo(a);return c===0?Hs(e.name,n.name):c}makePost(e,n){const i=jt(e),a=pe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Se(n,a)}maxPost(){const e=pe.EMPTY_NODE.updateChild(this.indexPath_,ma);return new Se(Fi,e)}toString(){return x2(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3 extends xc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Hs(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Se.MIN}maxPost(){return Se.MAX}makePost(e,n){const i=jt(e);return new Se(n,i)}toString(){return".value"}}const J3=new $3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return{type:"value",snapshotNode:t}}function Ps(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function na(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ra(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function eA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.index_=e}updateChild(e,n,i,a,c,d){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(n);return m.getChild(a).equals(i.getChild(a))&&m.isEmpty()===i.isEmpty()||(d!=null&&(i.isEmpty()?e.hasChild(n)?d.trackChildChange(na(n,m)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Ps(n,i)):d.trackChildChange(ra(n,i,m))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(xt,(a,c)=>{n.hasChild(a)||i.trackChildChange(na(a,c))}),n.isLeafNode()||n.forEachChild(xt,(a,c)=>{if(e.hasChild(a)){const d=e.getImmediateChild(a);d.equals(c)||i.trackChildChange(ra(a,c,d))}else i.trackChildChange(Ps(a,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?pe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.indexedFilter_=new qh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ia.getStartPost_(e),this.endPost_=ia.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,a,c,d){return this.matches(new Se(n,i))||(i=pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,a,c,d)}updateFullNode(e,n,i){n.isLeafNode()&&(n=pe.EMPTY_NODE);let a=n.withIndex(this.index_);a=a.updatePriority(pe.EMPTY_NODE);const c=this;return n.forEachChild(xt,(d,m)=>{c.matches(new Se(d,m))||(a=a.updateImmediateChild(d,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ia(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,a,c,d){return this.rangedFilter_.matches(new Se(n,i))||(i=pe.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,a,c,d):this.fullLimitUpdateChild_(e,n,i,c,d)}updateFullNode(e,n,i){let a;if(n.isLeafNode()||n.isEmpty())a=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){a=pe.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const m=c.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))a=a.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{a=n.withIndex(this.index_),a=a.updatePriority(pe.EMPTY_NODE);let c;this.reverse_?c=a.getReverseIterator(this.index_):c=a.getIterator(this.index_);let d=0;for(;c.hasNext();){const m=c.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:a=a.updateImmediateChild(m.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,a,c){let d;if(this.reverse_){const E=this.index_.getCompare();d=(I,D)=>E(D,I)}else d=this.index_.getCompare();const m=e;$(m.numChildren()===this.limit_,"");const y=new Se(n,i),x=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),A=this.rangedFilter_.matches(y);if(m.hasChild(n)){const E=m.getImmediateChild(n);let I=a.getChildAfterChild(this.index_,x,this.reverse_);for(;I!=null&&(I.name===n||m.hasChild(I.name));)I=a.getChildAfterChild(this.index_,I,this.reverse_);const D=I==null?1:d(I,y);if(A&&!i.isEmpty()&&D>=0)return c!=null&&c.trackChildChange(ra(n,i,E)),m.updateImmediateChild(n,i);{c!=null&&c.trackChildChange(na(n,E));const B=m.updateImmediateChild(n,pe.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(c!=null&&c.trackChildChange(Ps(I.name,I.node)),B.updateImmediateChild(I.name,I.node)):B}}else return i.isEmpty()?e:A&&d(x,y)>=0?(c!=null&&(c.trackChildChange(na(x.name,x.node)),c.trackChildChange(Ps(n,i))),m.updateImmediateChild(n,i).updateImmediateChild(x.name,pe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ls}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xt}copy(){const e=new $h;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nA(t){return t.loadsAllData()?new qh(t.getIndex()):t.hasLimit()?new tA(t):new ia(t)}function j0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xt?n="$priority":t.index_===J3?n="$value":t.index_===Is?n="$key":($(t.index_ instanceof q3,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=kt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=kt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+kt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=kt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+kt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function H0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends g2{constructor(e,n,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=pa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,a){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Vl.getListenId_(e,i),m={};this.listens_[d]=m;const y=j0(e._queryParams);this.restRequest_(c+".json",y,(x,A)=>{let E=A;if(x===404&&(E=null,x=null),x===null&&this.onDataUpdate_(c,E,!1,i),ks(this.listens_,d)===m){let I;x?x===401?I="permission_denied":I="rest_error:"+x:I="ok",a(I,null)}})}unlisten(e,n){const i=Vl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=j0(e._queryParams),i=e._path.toString(),a=new pc;return this.restRequest_(i+".json",n,(c,d)=>{let m=d;c===404&&(m=null,c=null),c===null?(this.onDataUpdate_(i,m,!1,null),a.resolve(m)):a.reject(new Error(m))}),a.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(n.auth=a.accessToken),c&&c.token&&(n.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bC(n);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(i&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=$o(m.responseText)}catch{xn("Failed to parse JSON response for "+d+": "+m.responseText)}i(null,y)}else m.status!==401&&m.status!==404&&xn("Got unsuccessful REST response for "+d+" Status: "+m.status),i(m.status);i=null}},m.open("GET",d,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){return{value:null,children:new Map}}function v2(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ae(e);t.children.has(i)||t.children.set(i,Wl());const a=t.children.get(i);e=Ze(e),v2(a,e,n)}}function kf(t,e,n){t.value!==null?n(e,t.value):iA(t,(i,a)=>{const c=new Ge(e.toString()+"/"+i);kf(a,c,n)})}function iA(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yn(this.last_,(i,a)=>{n[i]=n[i]-a}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=10*1e3,oA=30*1e3,aA=5*60*1e3;class lA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new sA(e);const i=V0+(oA-V0)*Math.random();Mo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;yn(e,(a,c)=>{c>0&&Or(this.statsToReport_,a)&&(n[a]=c,i=!0)}),i&&this.server_.reportStats(n),Mo(this.reportStats_.bind(this),Math.floor(Math.random()*2*aA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zn||(Zn={}));function T2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ed(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Zn.ACK_USER_WRITE,this.source=T2()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ge(e));return new Gl(Pe(),n,this.revert)}}else return $(Ae(this.path)===e,"operationForChild called for unrelated child."),new Gl(Ze(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.source=e,this.path=n,this.type=Zn.LISTEN_COMPLETE}operationForChild(e){return Ie(this.path)?new sa(this.source,Pe()):new sa(this.source,Ze(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Zn.OVERWRITE}operationForChild(e){return Ie(this.path)?new Ui(this.source,Pe(),this.snap.getImmediateChild(e)):new Ui(this.source,Ze(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Zn.MERGE}operationForChild(e){if(Ie(this.path)){const n=this.children.subtree(new Ge(e));return n.isEmpty()?null:n.value?new Ui(this.source,Pe(),n.value):new oa(this.source,Pe(),n)}else return $(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new oa(this.source,Ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uA(t,e,n,i){const a=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&t.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(eA(d.childName,d.snapshotNode))}),mo(t,a,"child_removed",e,i,n),mo(t,a,"child_added",e,i,n),mo(t,a,"child_moved",c,i,n),mo(t,a,"child_changed",e,i,n),mo(t,a,"value",e,i,n),a}function mo(t,e,n,i,a,c){const d=i.filter(m=>m.type===n);d.sort((m,y)=>hA(t,m,y)),d.forEach(m=>{const y=fA(t,m,c);a.forEach(x=>{x.respondsTo(m.type)&&e.push(x.createEvent(y,t.query_))})})}function fA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hA(t,e,n){if(e.childName==null||n.childName==null)throw js("Should only compare child_ events.");const i=new Se(e.childName,e.snapshotNode),a=new Se(n.childName,n.snapshotNode);return t.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t,e){return{eventCache:t,serverCache:e}}function Oo(t,e,n,i){return yc(new zi(e,n,i),t.serverCache)}function N2(t,e,n,i){return yc(t.eventCache,new zi(e,n,i))}function Lf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ji(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu;const dA=()=>(Iu||(Iu=new dn($E)),Iu);class tt{constructor(e,n=dA()){this.value=e,this.children=n}static fromObject(e){let n=new tt(null);return yn(e,(i,a)=>{n=n.set(new Ge(i),a)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(Ie(e))return null;{const i=Ae(e),a=this.children.get(i);if(a!==null){const c=a.findRootMostMatchingPathAndValue(Ze(e),n);return c!=null?{path:vt(new Ge(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{const n=Ae(e),i=this.children.get(n);return i!==null?i.subtree(Ze(e)):new tt(null)}}set(e,n){if(Ie(e))return new tt(n,this.children);{const i=Ae(e),c=(this.children.get(i)||new tt(null)).set(Ze(e),n),d=this.children.insert(i,c);return new tt(this.value,d)}}remove(e){if(Ie(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const n=Ae(e),i=this.children.get(n);if(i){const a=i.remove(Ze(e));let c;return a.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,a),this.value===null&&c.isEmpty()?new tt(null):new tt(this.value,c)}else return this}}get(e){if(Ie(e))return this.value;{const n=Ae(e),i=this.children.get(n);return i?i.get(Ze(e)):null}}setTree(e,n){if(Ie(e))return n;{const i=Ae(e),c=(this.children.get(i)||new tt(null)).setTree(Ze(e),n);let d;return c.isEmpty()?d=this.children.remove(i):d=this.children.insert(i,c),new tt(this.value,d)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((a,c)=>{i[a]=c.fold_(vt(e,a),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,i){const a=this.value?i(n,this.value):!1;if(a)return a;if(Ie(e))return null;{const c=Ae(e),d=this.children.get(c);return d?d.findOnPath_(Ze(e),vt(n,c),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,i){if(Ie(e))return this;{this.value&&i(n,this.value);const a=Ae(e),c=this.children.get(a);return c?c.foreachOnPath_(Ze(e),vt(n,a),i):new tt(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((i,a)=>{a.foreach_(vt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.writeTree_=e}static empty(){return new Jn(new tt(null))}}function Do(t,e,n){if(Ie(e))return new Jn(new tt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let c=i.value;const d=hn(a,e);return c=c.updateChild(d,n),new Jn(t.writeTree_.set(a,c))}else{const a=new tt(n),c=t.writeTree_.setTree(e,a);return new Jn(c)}}}function W0(t,e,n){let i=t;return yn(n,(a,c)=>{i=Do(i,vt(e,a),c)}),i}function G0(t,e){if(Ie(e))return Jn.empty();{const n=t.writeTree_.setTree(e,new tt(null));return new Jn(n)}}function Pf(t,e){return Wi(t,e)!=null}function Wi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(hn(n.path,e)):null}function Y0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xt,(i,a)=>{e.push(new Se(i,a))}):t.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Se(i,a.value))}),e}function si(t,e){if(Ie(e))return t;{const n=Wi(t,e);return n!=null?new Jn(new tt(n)):new Jn(t.writeTree_.subtree(e))}}function Bf(t){return t.writeTree_.isEmpty()}function Bs(t,e){return b2(Pe(),t.writeTree_,e)}function b2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((a,c)=>{a===".priority"?($(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):n=b2(vt(t,a),c,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(vt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e){return D2(e,t)}function gA(t,e,n,i,a){$(i>t.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:a}),a&&(t.visibleWrites=Do(t.visibleWrites,e,n)),t.lastWriteId=i}function pA(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function mA(t,e){const n=t.allWrites.findIndex(m=>m.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let a=i.visible,c=!1,d=t.allWrites.length-1;for(;a&&d>=0;){const m=t.allWrites[d];m.visible&&(d>=n&&xA(m,i.path)?a=!1:Kn(i.path,m.path)&&(c=!0)),d--}if(a){if(c)return yA(t),!0;if(i.snap)t.visibleWrites=G0(t.visibleWrites,i.path);else{const m=i.children;yn(m,y=>{t.visibleWrites=G0(t.visibleWrites,vt(i.path,y))})}return!0}else return!1}function xA(t,e){if(t.snap)return Kn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Kn(vt(t.path,n),e))return!0;return!1}function yA(t){t.visibleWrites=R2(t.allWrites,wA,Pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function wA(t){return t.visible}function R2(t,e,n){let i=Jn.empty();for(let a=0;a<t.length;++a){const c=t[a];if(e(c)){const d=c.path;let m;if(c.snap)Kn(n,d)?(m=hn(n,d),i=Do(i,m,c.snap)):Kn(d,n)&&(m=hn(d,n),i=Do(i,Pe(),c.snap.getChild(m)));else if(c.children){if(Kn(n,d))m=hn(n,d),i=W0(i,m,c.children);else if(Kn(d,n))if(m=hn(d,n),Ie(m))i=W0(i,Pe(),c.children);else{const y=ks(c.children,Ae(m));if(y){const x=y.getChild(Ze(m));i=Do(i,Pe(),x)}}}else throw js("WriteRecord should have .snap or .children")}}return i}function M2(t,e,n,i,a){if(!i&&!a){const c=Wi(t.visibleWrites,e);if(c!=null)return c;{const d=si(t.visibleWrites,e);if(Bf(d))return n;if(n==null&&!Pf(d,Pe()))return null;{const m=n||pe.EMPTY_NODE;return Bs(d,m)}}}else{const c=si(t.visibleWrites,e);if(!a&&Bf(c))return n;if(!a&&n==null&&!Pf(c,Pe()))return null;{const d=function(x){return(x.visible||a)&&(!i||!~i.indexOf(x.writeId))&&(Kn(x.path,e)||Kn(e,x.path))},m=R2(t.allWrites,d,e),y=n||pe.EMPTY_NODE;return Bs(m,y)}}}function _A(t,e,n){let i=pe.EMPTY_NODE;const a=Wi(t.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(xt,(c,d)=>{i=i.updateImmediateChild(c,d)}),i;if(n){const c=si(t.visibleWrites,e);return n.forEachChild(xt,(d,m)=>{const y=Bs(si(c,new Ge(d)),m);i=i.updateImmediateChild(d,y)}),Y0(c).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}else{const c=si(t.visibleWrites,e);return Y0(c).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}}function CA(t,e,n,i,a){$(i||a,"Either existingEventSnap or existingServerSnap must exist");const c=vt(e,n);if(Pf(t.visibleWrites,c))return null;{const d=si(t.visibleWrites,c);return Bf(d)?a.getChild(n):Bs(d,a.getChild(n))}}function EA(t,e,n,i){const a=vt(e,n),c=Wi(t.visibleWrites,a);if(c!=null)return c;if(i.isCompleteForChild(n)){const d=si(t.visibleWrites,a);return Bs(d,i.getNode().getImmediateChild(n))}else return null}function AA(t,e){return Wi(t.visibleWrites,e)}function SA(t,e,n,i,a,c,d){let m;const y=si(t.visibleWrites,e),x=Wi(y,Pe());if(x!=null)m=x;else if(n!=null)m=Bs(y,n);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const A=[],E=d.getCompare(),I=c?m.getReverseIteratorFrom(i,d):m.getIteratorFrom(i,d);let D=I.getNext();for(;D&&A.length<a;)E(D,i)!==0&&A.push(D),D=I.getNext();return A}else return[]}function IA(){return{visibleWrites:Jn.empty(),allWrites:[],lastWriteId:-1}}function Yl(t,e,n,i){return M2(t.writeTree,t.treePath,e,n,i)}function nd(t,e){return _A(t.writeTree,t.treePath,e)}function X0(t,e,n,i){return CA(t.writeTree,t.treePath,e,n,i)}function Xl(t,e){return AA(t.writeTree,vt(t.treePath,e))}function vA(t,e,n,i,a,c){return SA(t.writeTree,t.treePath,e,n,i,a,c)}function rd(t,e,n){return EA(t.writeTree,t.treePath,e,n)}function O2(t,e){return D2(vt(t.treePath,e),t.writeTree)}function D2(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const c=a.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(i,ra(i,e.snapshotNode,a.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(i,na(i,a.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(i,Ps(i,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(i,ra(i,e.snapshotNode,a.oldSnap));else throw js("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const k2=new NA;class id{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new zi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rd(this.writes_,e,i)}}getChildAfterChild(e,n,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ji(this.viewCache_),c=vA(this.writes_,a,n,1,i,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return{filter:t}}function RA(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MA(t,e,n,i,a){const c=new TA;let d,m;if(n.type===Zn.OVERWRITE){const x=n;x.source.fromUser?d=Ff(t,e,x.path,x.snap,i,a,c):($(x.source.fromServer,"Unknown source."),m=x.source.tagged||e.serverCache.isFiltered()&&!Ie(x.path),d=Ql(t,e,x.path,x.snap,i,a,m,c))}else if(n.type===Zn.MERGE){const x=n;x.source.fromUser?d=DA(t,e,x.path,x.children,i,a,c):($(x.source.fromServer,"Unknown source."),m=x.source.tagged||e.serverCache.isFiltered(),d=Uf(t,e,x.path,x.children,i,a,m,c))}else if(n.type===Zn.ACK_USER_WRITE){const x=n;x.revert?d=PA(t,e,x.path,i,a,c):d=kA(t,e,x.path,x.affectedTree,i,a,c)}else if(n.type===Zn.LISTEN_COMPLETE)d=LA(t,e,n.path,i,c);else throw js("Unknown operation type: "+n.type);const y=c.getChanges();return OA(e,d,y),{viewCache:d,changes:y}}function OA(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=Lf(t);(n.length>0||!t.eventCache.isFullyInitialized()||a&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&n.push(I2(Lf(e)))}}function L2(t,e,n,i,a,c){const d=e.eventCache;if(Xl(i,n)!=null)return e;{let m,y;if(Ie(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const x=ji(e),A=x instanceof pe?x:pe.EMPTY_NODE,E=nd(i,A);m=t.filter.updateFullNode(e.eventCache.getNode(),E,c)}else{const x=Yl(i,ji(e));m=t.filter.updateFullNode(e.eventCache.getNode(),x,c)}else{const x=Ae(n);if(x===".priority"){$(ci(n)===1,"Can't have a priority with additional path components");const A=d.getNode();y=e.serverCache.getNode();const E=X0(i,n,A,y);E!=null?m=t.filter.updatePriority(A,E):m=d.getNode()}else{const A=Ze(n);let E;if(d.isCompleteForChild(x)){y=e.serverCache.getNode();const I=X0(i,n,d.getNode(),y);I!=null?E=d.getNode().getImmediateChild(x).updateChild(A,I):E=d.getNode().getImmediateChild(x)}else E=rd(i,x,e.serverCache);E!=null?m=t.filter.updateChild(d.getNode(),x,E,A,a,c):m=d.getNode()}}return Oo(e,m,d.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function Ql(t,e,n,i,a,c,d,m){const y=e.serverCache;let x;const A=d?t.filter:t.filter.getIndexedFilter();if(Ie(n))x=A.updateFullNode(y.getNode(),i,null);else if(A.filtersNodes()&&!y.isFiltered()){const D=y.getNode().updateChild(n,i);x=A.updateFullNode(y.getNode(),D,null)}else{const D=Ae(n);if(!y.isCompleteForPath(n)&&ci(n)>1)return e;const F=Ze(n),te=y.getNode().getImmediateChild(D).updateChild(F,i);D===".priority"?x=A.updatePriority(y.getNode(),te):x=A.updateChild(y.getNode(),D,te,F,k2,null)}const E=N2(e,x,y.isFullyInitialized()||Ie(n),A.filtersNodes()),I=new id(a,E,c);return L2(t,E,n,a,I,m)}function Ff(t,e,n,i,a,c,d){const m=e.eventCache;let y,x;const A=new id(a,e,c);if(Ie(n))x=t.filter.updateFullNode(e.eventCache.getNode(),i,d),y=Oo(e,x,!0,t.filter.filtersNodes());else{const E=Ae(n);if(E===".priority")x=t.filter.updatePriority(e.eventCache.getNode(),i),y=Oo(e,x,m.isFullyInitialized(),m.isFiltered());else{const I=Ze(n),D=m.getNode().getImmediateChild(E);let F;if(Ie(I))F=i;else{const B=A.getCompleteChild(E);B!=null?m2(I)===".priority"&&B.getChild(y2(I)).isEmpty()?F=B:F=B.updateChild(I,i):F=pe.EMPTY_NODE}if(D.equals(F))y=e;else{const B=t.filter.updateChild(m.getNode(),E,F,I,A,d);y=Oo(e,B,m.isFullyInitialized(),t.filter.filtersNodes())}}}return y}function Q0(t,e){return t.eventCache.isCompleteForChild(e)}function DA(t,e,n,i,a,c,d){let m=e;return i.foreach((y,x)=>{const A=vt(n,y);Q0(e,Ae(A))&&(m=Ff(t,m,A,x,a,c,d))}),i.foreach((y,x)=>{const A=vt(n,y);Q0(e,Ae(A))||(m=Ff(t,m,A,x,a,c,d))}),m}function K0(t,e,n){return n.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Uf(t,e,n,i,a,c,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,x;Ie(n)?x=i:x=new tt(null).setTree(n,i);const A=e.serverCache.getNode();return x.children.inorderTraversal((E,I)=>{if(A.hasChild(E)){const D=e.serverCache.getNode().getImmediateChild(E),F=K0(t,D,I);y=Ql(t,y,new Ge(E),F,a,c,d,m)}}),x.children.inorderTraversal((E,I)=>{const D=!e.serverCache.isCompleteForChild(E)&&I.value===null;if(!A.hasChild(E)&&!D){const F=e.serverCache.getNode().getImmediateChild(E),B=K0(t,F,I);y=Ql(t,y,new Ge(E),B,a,c,d,m)}}),y}function kA(t,e,n,i,a,c,d){if(Xl(a,n)!=null)return e;const m=e.serverCache.isFiltered(),y=e.serverCache;if(i.value!=null){if(Ie(n)&&y.isFullyInitialized()||y.isCompleteForPath(n))return Ql(t,e,n,y.getNode().getChild(n),a,c,m,d);if(Ie(n)){let x=new tt(null);return y.getNode().forEachChild(Is,(A,E)=>{x=x.set(new Ge(A),E)}),Uf(t,e,n,x,a,c,m,d)}else return e}else{let x=new tt(null);return i.foreach((A,E)=>{const I=vt(n,A);y.isCompleteForPath(I)&&(x=x.set(A,y.getNode().getChild(I)))}),Uf(t,e,n,x,a,c,m,d)}}function LA(t,e,n,i,a){const c=e.serverCache,d=N2(e,c.getNode(),c.isFullyInitialized()||Ie(n),c.isFiltered());return L2(t,d,n,i,k2,a)}function PA(t,e,n,i,a,c){let d;if(Xl(i,n)!=null)return e;{const m=new id(i,e,a),y=e.eventCache.getNode();let x;if(Ie(n)||Ae(n)===".priority"){let A;if(e.serverCache.isFullyInitialized())A=Yl(i,ji(e));else{const E=e.serverCache.getNode();$(E instanceof pe,"serverChildren would be complete if leaf node"),A=nd(i,E)}A=A,x=t.filter.updateFullNode(y,A,c)}else{const A=Ae(n);let E=rd(i,A,e.serverCache);E==null&&e.serverCache.isCompleteForChild(A)&&(E=y.getImmediateChild(A)),E!=null?x=t.filter.updateChild(y,A,E,Ze(n),m,c):e.eventCache.getNode().hasChild(A)?x=t.filter.updateChild(y,A,pe.EMPTY_NODE,Ze(n),m,c):x=y,x.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Yl(i,ji(e)),d.isLeafNode()&&(x=t.filter.updateFullNode(x,d,c)))}return d=e.serverCache.isFullyInitialized()||Xl(i,Pe())!=null,Oo(e,x,d,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new qh(i.getIndex()),c=nA(i);this.processor_=bA(c);const d=n.serverCache,m=n.eventCache,y=a.updateFullNode(pe.EMPTY_NODE,d.getNode(),null),x=c.updateFullNode(pe.EMPTY_NODE,m.getNode(),null),A=new zi(y,d.isFullyInitialized(),a.filtersNodes()),E=new zi(x,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=yc(E,A),this.eventGenerator_=new cA(this.query_)}get query(){return this.query_}}function FA(t){return t.viewCache_.serverCache.getNode()}function UA(t,e){const n=ji(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function Z0(t){return t.eventRegistrations_.length===0}function zA(t,e){t.eventRegistrations_.push(e)}function q0(t,e,n){const i=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const a=t.query._path;t.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(n,a);d&&i.push(d)})}if(e){let a=[];for(let c=0;c<t.eventRegistrations_.length;++c){const d=t.eventRegistrations_[c];if(!d.matches(e))a.push(d);else if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(c+1));break}}t.eventRegistrations_=a}else t.eventRegistrations_=[];return i}function $0(t,e,n,i){e.type===Zn.MERGE&&e.source.queryId!==null&&($(ji(t.viewCache_),"We should always have a full cache before handling merges"),$(Lf(t.viewCache_),"Missing event cache, even though we have a server cache"));const a=t.viewCache_,c=MA(t.processor_,a,e,n,i);return RA(t.processor_,c.viewCache),$(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=c.viewCache,P2(t,c.changes,c.viewCache.eventCache.getNode(),null)}function jA(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xt,(c,d)=>{i.push(Ps(c,d))}),n.isFullyInitialized()&&i.push(I2(n.getNode())),P2(t,i,n.getNode(),e)}function P2(t,e,n,i){const a=i?[i]:t.eventRegistrations_;return uA(t.eventGenerator_,e,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;class HA{constructor(){this.views=new Map}}function VA(t){$(!Kl,"__referenceConstructor has already been defined"),Kl=t}function WA(){return $(Kl,"Reference.ts has not been loaded"),Kl}function GA(t){return t.views.size===0}function sd(t,e,n,i){const a=e.source.queryId;if(a!==null){const c=t.views.get(a);return $(c!=null,"SyncTree gave us an op for an invalid query."),$0(c,e,n,i)}else{let c=[];for(const d of t.views.values())c=c.concat($0(d,e,n,i));return c}}function YA(t,e,n,i,a){const c=e._queryIdentifier,d=t.views.get(c);if(!d){let m=Yl(n,a?i:null),y=!1;m?y=!0:i instanceof pe?(m=nd(n,i),y=!1):(m=pe.EMPTY_NODE,y=!1);const x=yc(new zi(m,y,!1),new zi(i,a,!1));return new BA(e,x)}return d}function XA(t,e,n,i,a,c){const d=YA(t,e,i,a,c);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,d),zA(d,n),jA(d,n)}function QA(t,e,n,i){const a=e._queryIdentifier,c=[];let d=[];const m=ui(t);if(a==="default")for(const[y,x]of t.views.entries())d=d.concat(q0(x,n,i)),Z0(x)&&(t.views.delete(y),x.query._queryParams.loadsAllData()||c.push(x.query));else{const y=t.views.get(a);y&&(d=d.concat(q0(y,n,i)),Z0(y)&&(t.views.delete(a),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!ui(t)&&c.push(new(WA())(e._repo,e._path)),{removed:c,events:d}}function B2(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function vs(t,e){let n=null;for(const i of t.views.values())n=n||UA(i,e);return n}function F2(t,e){if(e._queryParams.loadsAllData())return wc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function U2(t,e){return F2(t,e)!=null}function ui(t){return wc(t)!=null}function wc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl;function KA(t){$(!Zl,"__referenceConstructor has already been defined"),Zl=t}function ZA(){return $(Zl,"Reference.ts has not been loaded"),Zl}let qA=1;class J0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=IA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function z2(t,e,n,i,a){return gA(t.pendingWriteTree_,e,n,i,a),a?xa(t,new Ui(T2(),e,n)):[]}function Ri(t,e,n=!1){const i=pA(t.pendingWriteTree_,e);if(mA(t.pendingWriteTree_,e)){let c=new tt(null);return i.snap!=null?c=c.set(Pe(),!0):yn(i.children,d=>{c=c.set(new Ge(d),!0)}),xa(t,new Gl(i.path,c,n))}else return[]}function _c(t,e,n){return xa(t,new Ui(Jh(),e,n))}function $A(t,e,n){const i=tt.fromObject(n);return xa(t,new oa(Jh(),e,i))}function JA(t,e){return xa(t,new sa(Jh(),e))}function eS(t,e,n){const i=ad(t,n);if(i){const a=ld(i),c=a.path,d=a.queryId,m=hn(c,e),y=new sa(ed(d),m);return cd(t,c,y)}else return[]}function zf(t,e,n,i,a=!1){const c=e._path,d=t.syncPointTree_.get(c);let m=[];if(d&&(e._queryIdentifier==="default"||U2(d,e))){const y=QA(d,e,n,i);GA(d)&&(t.syncPointTree_=t.syncPointTree_.remove(c));const x=y.removed;if(m=y.events,!a){const A=x.findIndex(I=>I._queryParams.loadsAllData())!==-1,E=t.syncPointTree_.findOnPath(c,(I,D)=>ui(D));if(A&&!E){const I=t.syncPointTree_.subtree(c);if(!I.isEmpty()){const D=rS(I);for(let F=0;F<D.length;++F){const B=D[F],te=B.query,O=V2(t,B);t.listenProvider_.startListening(ko(te),ql(t,te),O.hashFn,O.onComplete)}}}!E&&x.length>0&&!i&&(A?t.listenProvider_.stopListening(ko(e),null):x.forEach(I=>{const D=t.queryToTagMap.get(Cc(I));t.listenProvider_.stopListening(ko(I),D)}))}iS(t,x)}return m}function tS(t,e,n,i){const a=ad(t,i);if(a!=null){const c=ld(a),d=c.path,m=c.queryId,y=hn(d,e),x=new Ui(ed(m),y,n);return cd(t,d,x)}else return[]}function nS(t,e,n,i){const a=ad(t,i);if(a){const c=ld(a),d=c.path,m=c.queryId,y=hn(d,e),x=tt.fromObject(n),A=new oa(ed(m),y,x);return cd(t,d,A)}else return[]}function eg(t,e,n,i=!1){const a=e._path;let c=null,d=!1;t.syncPointTree_.foreachOnPath(a,(I,D)=>{const F=hn(I,a);c=c||vs(D,F),d=d||ui(D)});let m=t.syncPointTree_.get(a);m?(d=d||ui(m),c=c||vs(m,Pe())):(m=new HA,t.syncPointTree_=t.syncPointTree_.set(a,m));let y;c!=null?y=!0:(y=!1,c=pe.EMPTY_NODE,t.syncPointTree_.subtree(a).foreachChild((D,F)=>{const B=vs(F,Pe());B&&(c=c.updateImmediateChild(D,B))}));const x=U2(m,e);if(!x&&!e._queryParams.loadsAllData()){const I=Cc(e);$(!t.queryToTagMap.has(I),"View does not exist, but we have a tag");const D=sS();t.queryToTagMap.set(I,D),t.tagToQueryMap.set(D,I)}const A=td(t.pendingWriteTree_,a);let E=XA(m,e,n,A,c,y);if(!x&&!d&&!i){const I=F2(m,e);E=E.concat(oS(t,e,I))}return E}function od(t,e,n){const a=t.pendingWriteTree_,c=t.syncPointTree_.findOnPath(e,(d,m)=>{const y=hn(d,e),x=vs(m,y);if(x)return x});return M2(a,e,c,n,!0)}function xa(t,e){return j2(e,t.syncPointTree_,null,td(t.pendingWriteTree_,Pe()))}function j2(t,e,n,i){if(Ie(t.path))return H2(t,e,n,i);{const a=e.get(Pe());n==null&&a!=null&&(n=vs(a,Pe()));let c=[];const d=Ae(t.path),m=t.operationForChild(d),y=e.children.get(d);if(y&&m){const x=n?n.getImmediateChild(d):null,A=O2(i,d);c=c.concat(j2(m,y,x,A))}return a&&(c=c.concat(sd(a,t,i,n))),c}}function H2(t,e,n,i){const a=e.get(Pe());n==null&&a!=null&&(n=vs(a,Pe()));let c=[];return e.children.inorderTraversal((d,m)=>{const y=n?n.getImmediateChild(d):null,x=O2(i,d),A=t.operationForChild(d);A&&(c=c.concat(H2(A,m,y,x)))}),a&&(c=c.concat(sd(a,t,i,n))),c}function V2(t,e){const n=e.query,i=ql(t,n);return{hashFn:()=>(FA(e)||pe.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?eS(t,n._path,i):JA(t,n._path);{const c=t3(a,n);return zf(t,n,null,c)}}}}function ql(t,e){const n=Cc(e);return t.queryToTagMap.get(n)}function Cc(t){return t._path.toString()+"$"+t._queryIdentifier}function ad(t,e){return t.tagToQueryMap.get(e)}function ld(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ge(t.substr(0,e))}}function cd(t,e,n){const i=t.syncPointTree_.get(e);$(i,"Missing sync point for query tag that we're tracking");const a=td(t.pendingWriteTree_,e);return sd(i,n,a,null)}function rS(t){return t.fold((e,n,i)=>{if(n&&ui(n))return[wc(n)];{let a=[];return n&&(a=B2(n)),yn(i,(c,d)=>{a=a.concat(d)}),a}})}function ko(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ZA())(t._repo,t._path):t}function iS(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const a=Cc(i),c=t.queryToTagMap.get(a);t.queryToTagMap.delete(a),t.tagToQueryMap.delete(c)}}}function sS(){return qA++}function oS(t,e,n){const i=e._path,a=ql(t,e),c=V2(t,n),d=t.listenProvider_.startListening(ko(e),a,c.hashFn,c.onComplete),m=t.syncPointTree_.subtree(i);if(a)$(!ui(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((x,A,E)=>{if(!Ie(x)&&A&&ui(A))return[wc(A).query];{let I=[];return A&&(I=I.concat(B2(A).map(D=>D.query))),yn(E,(D,F)=>{I=I.concat(F)}),I}});for(let x=0;x<y.length;++x){const A=y[x];t.listenProvider_.stopListening(ko(A),ql(t,A))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ud(n)}node(){return this.node_}}class fd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=vt(this.path_,e);return new fd(this.syncTree_,n)}node(){return od(this.syncTree_,this.path_)}}const aS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tg=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return lS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cS(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},lS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},cS=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&$(!1,"Unexpected increment value: "+i);const a=e.node();if($(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const d=a.getValue();return typeof d!="number"?i:d+i},uS=function(t,e,n,i){return hd(e,new fd(n,t),i)},W2=function(t,e,n){return hd(t,new ud(e),n)};function hd(t,e,n){const i=t.getPriority().val(),a=tg(i,e.getImmediateChild(".priority"),n);let c;if(t.isLeafNode()){const d=t,m=tg(d.getValue(),e,n);return m!==d.getValue()||a!==d.getPriority().val()?new Mt(m,jt(a)):t}else{const d=t;return c=d,a!==d.getPriority().val()&&(c=c.updatePriority(new Mt(a))),d.forEachChild(xt,(m,y)=>{const x=hd(y,e.getImmediateChild(m),n);x!==y&&(c=c.updateImmediateChild(m,x))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function gd(t,e){let n=e instanceof Ge?e:new Ge(e),i=t,a=Ae(n);for(;a!==null;){const c=ks(i.node.children,a)||{children:{},childCount:0};i=new dd(a,i,c),n=Ze(n),a=Ae(n)}return i}function Ws(t){return t.node.value}function G2(t,e){t.node.value=e,jf(t)}function Y2(t){return t.node.childCount>0}function fS(t){return Ws(t)===void 0&&!Y2(t)}function Ec(t,e){yn(t.node.children,(n,i)=>{e(new dd(n,t,i))})}function X2(t,e,n,i){n&&e(t),Ec(t,a=>{X2(a,e,!0)})}function hS(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ya(t){return new Ge(t.parent===null?t.name:ya(t.parent)+"/"+t.name)}function jf(t){t.parent!==null&&dS(t.parent,t.name,t)}function dS(t,e,n){const i=fS(n),a=Or(t.node.children,e);i&&a?(delete t.node.children[e],t.node.childCount--,jf(t)):!i&&!a&&(t.node.children[e]=n.node,t.node.childCount++,jf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=/[\[\].#$\/\u0000-\u001F\u007F]/,pS=/[\[\].#$\u0000-\u001F\u007F]/,vu=10*1024*1024,Q2=function(t){return typeof t=="string"&&t.length!==0&&!gS.test(t)},K2=function(t){return typeof t=="string"&&t.length!==0&&!pS.test(t)},mS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),K2(t)},xS=function(t,e,n,i){pd(Hh(t,"value"),e,n)},pd=function(t,e,n){const i=n instanceof Ge?new k3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ii(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ii(i)+" with contents = "+e.toString());if(Km(e))throw new Error(t+"contains "+e.toString()+" "+Ii(i));if(typeof e=="string"&&e.length>vu/3&&mc(e)>vu)throw new Error(t+"contains a string greater than "+vu+" utf8 bytes "+Ii(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,c=!1;if(yn(e,(d,m)=>{if(d===".value")a=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!Q2(d)))throw new Error(t+" contains an invalid key ("+d+") "+Ii(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);L3(i,d),pd(t,m,i),P3(i)}),a&&c)throw new Error(t+' contains ".value" child '+Ii(i)+" in addition to actual children.")}},Z2=function(t,e,n,i){if(!K2(n))throw new Error(Hh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yS=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Z2(t,e,n)},wS=function(t,e){if(Ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_S=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Q2(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mS(n))throw new Error(Hh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function md(t,e){let n=null;for(let i=0;i<e.length;i++){const a=e[i],c=a.getPath();n!==null&&!Qh(c,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(a)}n&&t.eventLists_.push(n)}function q2(t,e,n){md(t,n),$2(t,i=>Qh(i,e))}function br(t,e,n){md(t,n),$2(t,i=>Kn(i,e)||Kn(e,i))}function $2(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const a=t.eventLists_[i];if(a){const c=a.path;e(c)?(ES(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ES(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ro&&Kt("event: "+n.toString()),Vs(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="repo_interrupt",SS=25;class IS{constructor(e,n,i,a){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wl(),this.transactionQueueTree_=new dd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vS(t,e,n){if(t.stats_=Yh(t.repoInfo_),t.forceRestClient_||s3())t.server_=new Vl(t.repoInfo_,(i,a,c,d)=>{ng(t,i,a,c,d)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>rg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{kt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Er(t.repoInfo_,e,(i,a,c,d)=>{ng(t,i,a,c,d)},i=>{rg(t,i)},i=>{NS(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=u3(t.repoInfo_,()=>new lA(t.stats_,t.server_)),t.infoData_=new rA,t.infoSyncTree_=new J0({startListening:(i,a,c,d)=>{let m=[];const y=t.infoData_.getNode(i._path);return y.isEmpty()||(m=_c(t.infoSyncTree_,i._path,y),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),yd(t,"connected",!1),t.serverSyncTree_=new J0({startListening:(i,a,c,d)=>(t.server_.listen(i,c,a,(m,y)=>{const x=d(m,y);br(t.eventQueue_,i._path,x)}),[]),stopListening:(i,a)=>{t.server_.unlisten(i,a)}})}function TS(t){const n=t.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xd(t){return aS({timestamp:TS(t)})}function ng(t,e,n,i,a){t.dataUpdateCount++;const c=new Ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let d=[];if(a)if(i){const y=Bl(n,x=>jt(x));d=nS(t.serverSyncTree_,c,y,a)}else{const y=jt(n);d=tS(t.serverSyncTree_,c,y,a)}else if(i){const y=Bl(n,x=>jt(x));d=$A(t.serverSyncTree_,c,y)}else{const y=jt(n);d=_c(t.serverSyncTree_,c,y)}let m=c;d.length>0&&(m=Ac(t,c)),br(t.eventQueue_,m,d)}function rg(t,e){yd(t,"connected",e),e===!1&&RS(t)}function NS(t,e){yn(e,(n,i)=>{yd(t,n,i)})}function yd(t,e,n){const i=new Ge("/.info/"+e),a=jt(n);t.infoData_.updateSnapshot(i,a);const c=_c(t.infoSyncTree_,i,a);br(t.eventQueue_,i,c)}function J2(t){return t.nextWriteId_++}function bS(t,e,n,i,a){wd(t,"set",{path:e.toString(),value:n,priority:i});const c=xd(t),d=jt(n,i),m=od(t.serverSyncTree_,e),y=W2(d,m,c),x=J2(t),A=z2(t.serverSyncTree_,e,y,x,!0);md(t.eventQueue_,A),t.server_.put(e.toString(),d.val(!0),(I,D)=>{const F=I==="ok";F||xn("set at "+e+" failed: "+I);const B=Ri(t.serverSyncTree_,x,!F);br(t.eventQueue_,e,B),kS(t,a,I,D)});const E=ix(t,e);Ac(t,E),br(t.eventQueue_,E,[])}function RS(t){wd(t,"onDisconnectEvents");const e=xd(t),n=Wl();kf(t.onDisconnect_,Pe(),(a,c)=>{const d=uS(a,c,t.serverSyncTree_,e);v2(n,a,d)});let i=[];kf(n,Pe(),(a,c)=>{i=i.concat(_c(t.serverSyncTree_,a,c));const d=ix(t,a);Ac(t,d)}),t.onDisconnect_=Wl(),br(t.eventQueue_,Pe(),i)}function MS(t,e,n){let i;Ae(e._path)===".info"?i=eg(t.infoSyncTree_,e,n):i=eg(t.serverSyncTree_,e,n),q2(t.eventQueue_,e._path,i)}function OS(t,e,n){let i;Ae(e._path)===".info"?i=zf(t.infoSyncTree_,e,n):i=zf(t.serverSyncTree_,e,n),q2(t.eventQueue_,e._path,i)}function DS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(AS)}function wd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Kt(n,...e)}function kS(t,e,n,i){e&&Vs(()=>{if(n==="ok")e(null);else{const a=(n||"error").toUpperCase();let c=a;i&&(c+=": "+i);const d=new Error(c);d.code=a,e(d)}})}function ex(t,e,n){return od(t.serverSyncTree_,e,n)||pe.EMPTY_NODE}function _d(t,e=t.transactionQueueTree_){if(e||Sc(t,e),Ws(e)){const n=nx(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(a=>a.status===0)&&LS(t,ya(e),n)}else Y2(e)&&Ec(e,n=>{_d(t,n)})}function LS(t,e,n){const i=n.map(x=>x.currentWriteId),a=ex(t,e,i);let c=a;const d=a.hash();for(let x=0;x<n.length;x++){const A=n[x];$(A.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const E=hn(e,A.path);c=c.updateChild(E,A.currentOutputSnapshotRaw)}const m=c.val(!0),y=e;t.server_.put(y.toString(),m,x=>{wd(t,"transaction put response",{path:y.toString(),status:x});let A=[];if(x==="ok"){const E=[];for(let I=0;I<n.length;I++)n[I].status=2,A=A.concat(Ri(t.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&E.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();Sc(t,gd(t.transactionQueueTree_,e)),_d(t,t.transactionQueueTree_),br(t.eventQueue_,e,A);for(let I=0;I<E.length;I++)Vs(E[I])}else{if(x==="datastale")for(let E=0;E<n.length;E++)n[E].status===3?n[E].status=4:n[E].status=0;else{xn("transaction at "+y.toString()+" failed: "+x);for(let E=0;E<n.length;E++)n[E].status=4,n[E].abortReason=x}Ac(t,e)}},d)}function Ac(t,e){const n=tx(t,e),i=ya(n),a=nx(t,n);return PS(t,a,i),i}function PS(t,e,n){if(e.length===0)return;const i=[];let a=[];const d=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const y=e[m],x=hn(n,y.path);let A=!1,E;if($(x!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)A=!0,E=y.abortReason,a=a.concat(Ri(t.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=SS)A=!0,E="maxretry",a=a.concat(Ri(t.serverSyncTree_,y.currentWriteId,!0));else{const I=ex(t,y.path,d);y.currentInputSnapshot=I;const D=e[m].update(I.val());if(D!==void 0){pd("transaction failed: Data returned ",D,y.path);let F=jt(D);typeof D=="object"&&D!=null&&Or(D,".priority")||(F=F.updatePriority(I.getPriority()));const te=y.currentWriteId,O=xd(t),N=W2(F,I,O);y.currentOutputSnapshotRaw=F,y.currentOutputSnapshotResolved=N,y.currentWriteId=J2(t),d.splice(d.indexOf(te),1),a=a.concat(z2(t.serverSyncTree_,y.path,N,y.currentWriteId,y.applyLocally)),a=a.concat(Ri(t.serverSyncTree_,te,!0))}else A=!0,E="nodata",a=a.concat(Ri(t.serverSyncTree_,y.currentWriteId,!0))}br(t.eventQueue_,n,a),a=[],A&&(e[m].status=2,function(I){setTimeout(I,Math.floor(0))}(e[m].unwatcher),e[m].onComplete&&(E==="nodata"?i.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):i.push(()=>e[m].onComplete(new Error(E),!1,null))))}Sc(t,t.transactionQueueTree_);for(let m=0;m<i.length;m++)Vs(i[m]);_d(t,t.transactionQueueTree_)}function tx(t,e){let n,i=t.transactionQueueTree_;for(n=Ae(e);n!==null&&Ws(i)===void 0;)i=gd(i,n),e=Ze(e),n=Ae(e);return i}function nx(t,e){const n=[];return rx(t,e,n),n.sort((i,a)=>i.order-a.order),n}function rx(t,e,n){const i=Ws(e);if(i)for(let a=0;a<i.length;a++)n.push(i[a]);Ec(e,a=>{rx(t,a,n)})}function Sc(t,e){const n=Ws(e);if(n){let i=0;for(let a=0;a<n.length;a++)n[a].status!==2&&(n[i]=n[a],i++);n.length=i,G2(e,n.length>0?n:void 0)}Ec(e,i=>{Sc(t,i)})}function ix(t,e){const n=ya(tx(t,e)),i=gd(t.transactionQueueTree_,e);return hS(i,a=>{Tu(t,a)}),Tu(t,i),X2(i,a=>{Tu(t,a)}),n}function Tu(t,e){const n=Ws(e);if(n){const i=[];let a=[],c=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?($(c===d-1,"All SENT items should be at beginning of queue."),c=d,n[d].status=3,n[d].abortReason="set"):($(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),a=a.concat(Ri(t.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&i.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?G2(e,void 0):n.length=c+1,br(t.eventQueue_,ya(e),a);for(let d=0;d<i.length;d++)Vs(i[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let a=n[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function FS(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const ig=function(t,e){const n=US(t),i=n.namespace;n.domain==="firebase.com"&&Nr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Nr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZE();const a=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new a2(n.host,n.secure,i,a,e,"",i!==n.subdomain),path:new Ge(n.pathString)}},US=function(t){let e="",n="",i="",a="",c="",d=!0,m="https",y=443;if(typeof t=="string"){let x=t.indexOf("//");x>=0&&(m=t.substring(0,x-1),t=t.substring(x+2));let A=t.indexOf("/");A===-1&&(A=t.length);let E=t.indexOf("?");E===-1&&(E=t.length),e=t.substring(0,Math.min(A,E)),A<E&&(a=BS(t.substring(A,E)));const I=FS(t.substring(Math.min(t.length,E)));x=e.indexOf(":"),x>=0?(d=m==="https"||m==="wss",y=parseInt(e.substring(x+1),10)):x=e.length;const D=e.slice(0,x);if(D.toLowerCase()==="localhost")n="localhost";else if(D.split(".").length<=2)n=D;else{const F=e.indexOf(".");i=e.substring(0,F).toLowerCase(),n=e.substring(F+1),c=i}"ns"in I&&(c=I.ns)}return{host:e,port:y,domain:n,subdomain:i,secure:d,scheme:m,pathString:a,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,i,a){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+kt(this.snapshot.exportVal())}}class jS{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,i,a){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=a}get key(){return Ie(this._path)?null:m2(this._path)}get ref(){return new gi(this._repo,this._path)}get _queryIdentifier(){const e=H0(this._queryParams),n=Wh(e);return n==="{}"?"default":n}get _queryObject(){return H0(this._queryParams)}isEqual(e){if(e=da(e),!(e instanceof Cd))return!1;const n=this._repo===e._repo,i=Qh(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return n&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+D3(this._path)}}class gi extends Cd{constructor(e,n){super(e,n,new $h,!1)}get parent(){const e=y2(this._path);return e===null?null:new gi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class $l{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ge(e),i=Hf(this.ref,e);return new $l(this._node.getChild(n),i,xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new $l(a,Hf(this.ref,i),xt)))}hasChild(e){const n=new Ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sg(t,e){return t=da(t),t._checkNotDeleted("ref"),e!==void 0?Hf(t._root,e):t._root}function Hf(t,e){return t=da(t),Ae(t._path)===null?yS("child","path",e):Z2("child","path",e),new gi(t._repo,vt(t._path,e))}function og(t,e){t=da(t),wS("set",t._path),xS("set",e,t._path);const n=new pc;return bS(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Ed{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new zS("value",this,new $l(e.snapshotNode,new gi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new jS(this,e,n):null}matches(e){return e instanceof Ed?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function VS(t,e,n,i,a){const c=new HS(n,void 0),d=new Ed(c);return MS(t._repo,t,d),()=>OS(t._repo,t,d)}function WS(t,e,n,i){return VS(t,"value",e)}VA(gi);KA(gi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FIREBASE_DATABASE_EMULATOR_HOST",Vf={};let YS=!1;function XS(t,e,n,i){t.repoInfo_=new a2(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function QS(t,e,n,i,a){let c=i||t.options.databaseURL;c===void 0&&(t.options.projectId||Nr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",t.options.projectId),c=`${t.options.projectId}-default-rtdb.firebaseio.com`);let d=ig(c,a),m=d.repoInfo,y;typeof process<"u"&&S0&&(y=S0[GS]),y?(c=`http://${y}?ns=${m.namespace}`,d=ig(c,a),m=d.repoInfo):d.repoInfo.secure;const x=new a3(t.name,t.options,e);_S("Invalid Firebase Database URL",d),Ie(d.path)||Nr("Database URL must point to the root of a Firebase Database (not including a child path).");const A=ZS(m,t,x,new o3(t.name,n));return new qS(A,t)}function KS(t,e){const n=Vf[e];(!n||n[t.key]!==t)&&Nr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DS(t),delete n[t.key]}function ZS(t,e,n,i){let a=Vf[e.name];a||(a={},Vf[e.name]=a);let c=a[t.toURLString()];return c&&Nr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new IS(t,YS,n,i),a[t.toURLString()]=c,c}class qS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gi(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(KS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Nr("Cannot call "+e+" on a deleted database.")}}function $S(t=OE(),e){const n=NE(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=xC("database");i&&JS(n,...i)}return n}function JS(t,e,n,i={}){t=da(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Nr("Cannot call useEmulator() after instance has already been initialized.");const a=t._repoInternal;let c;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Nr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new cl(cl.OWNER);else if(i.mockUserToken){const d=typeof i.mockUserToken=="string"?i.mockUserToken:yC(i.mockUserToken,t.app.options.projectId);c=new cl(d)}XS(a,e,n,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){WE(ME),Ul(new Jo("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return QS(i,a,c,n)},"PUBLIC").setMultipleInstances(!0)),As(I0,v0,t),As(I0,v0,"esm2017")}Er.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Er.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eI();const tI={apiKey:"AIzaSyC7EPnxkdnIP6G_2LLVthlUdiPhYGBpitg",authDomain:"hack-heist-70c4a.firebaseapp.com",projectId:"hack-heist-70c4a",storageBucket:"hack-heist-70c4a.firebasestorage.app",messagingSenderId:"714368783289",appId:"1:714368783289:web:c7364e396e7ba4c3d29c68",measurementId:"G-N3YBHVTN0P"},nI=Vm(tI),ag=$S(nI),rI=t=>{const e=t.trim().split(`
`);if(e.length<2)return[];const n=e[0].split(",").map(m=>m.trim().toLowerCase()),i=n.indexOf("regno"),a=n.indexOf("name"),c=n.indexOf("email"),d=n.indexOf("team");return i===-1?(console.error("CSV Parse Error: 'RegNo' header not found."),[]):e.slice(1).map(m=>{const y=m.split(",").map(x=>x.trim());return{regNo:y[i]||"",name:y[a]||"",email:y[c]||"",team:y[d]||""}}).filter(m=>m.regNo)},iI=({user:t,onLogout:e})=>{const[n,i]=Ke.useState([]),[a]=Ke.useState([]),[c,d]=Ke.useState(""),[m,y]=Ke.useState(1),[x,A]=Ke.useState(null),[E,I]=Ke.useState(null),[D,F]=Ke.useState(!1),[B,te]=Ke.useState(1),[O,N]=Ke.useState("scan");Ke.useEffect(()=>{const L=sg(ag,"attendance"),Y=WS(L,le=>{const Ee=le.val();Ee?i(Object.values(Ee)):V()}),V=async()=>{try{const le=await fetch("/HACK_HEIST/Participants.csv");if(!le.ok)return;const Ee=await le.text(),re=rI(Ee);if(re.length>0){const ye=re.map(Be=>({...Be,userId:Be.regNo,session1:!1,session2:!1,session3:!1,lastUpdated:new Date().toISOString()}));await og(L,ye)}}catch(le){console.error("Error loading from CSV:",le)}};return()=>Y()},[]);const b=L=>{if(!D){F(!0),I(null);try{const Y=L.trim();if(!Y)throw new Error("Scanned code is empty.");const V=n.find(Ee=>Ee.regNo===Y);if(!V)throw new Error(`Participant with ID "${Y}" not found.`);const le=`session${m}`;V[le]===!0?I({type:"warning",text:`${V.name} is already marked as PRESENT.`}):(H(V.userId,m,!0),I({type:"success",text:`Success! ${V.name} marked PRESENT.`}))}catch(Y){I({type:"error",text:Y.message||"An unknown error occurred during scan."})}setTimeout(()=>{F(!1),I(null)},3e3)}},H=async(L,Y,V)=>{try{let le=-1;const Ee=n.find((re,ye)=>re.userId===L?(le=ye,!0):!1);if(le!==-1&&Ee){const re={...Ee};switch(Y){case 1:re.session1=V,re.session1_markedBy=V?t.email:void 0;break;case 2:re.session2=V,re.session2_markedBy=V?t.email:void 0;break;case 3:re.session3=V,re.session3_markedBy=V?t.email:void 0;break}re.lastUpdated=new Date().toISOString();const ye=sg(ag,`attendance/${le}`);await og(ye,re)}}catch(le){console.error("Error updating attendance record:",le)}},ee=()=>{if(A(null),!c.trim()){A({type:"error",text:"Registration No. cannot be empty."});return}const L=n.find(Y=>Y.regNo.toLowerCase()===c.trim().toLowerCase());if(L){const Y=`session${m}`;if(L[Y]===!0){A({type:"error",text:`${L.name} is already marked as PRESENT.`});return}H(L.userId,m,!0),A({type:"success",text:`Success! ${L.name} marked PRESENT.`}),d("")}else A({type:"error",text:`Participant with ID "${c}" not found.`})},q=()=>{const L=`session${B}`,Y=`session${B}_markedBy`,V=["Registration_No","Name","Email","Team",`Session${B}_Status`,"Marked_By","Last_Updated"],le=n.filter(j=>j[L]===!0);if(le.length===0){alert(`No participants have been marked PRESENT for Session ${B} yet.`);return}const Ee=[V.join(","),...le.map(j=>[j.regNo,`"${j.name}"`,j.email,`"${j.team}"`,"Present",j[Y]||"N/A",new Date(j.lastUpdated).toLocaleString()].join(","))].join(`
`),re=new Blob([Ee],{type:"text/csv;charset=utf-8;"}),ye=window.URL.createObjectURL(re),Be=document.createElement("a");Be.href=ye,Be.download=`hack-heist-session${B}-attendance-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Be),Be.click(),window.URL.revokeObjectURL(ye),document.body.removeChild(Be)};return W.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gfg-gradient-start to-gfg-gradient-end font-body",children:[W.jsx("div",{className:"bg-gfg-card-bg border-b border-gfg-border sticky top-0 z-10",children:W.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-10 h-10 bg-gfg-red rounded-full flex items-center justify-center",children:W.jsx(Am,{className:"w-6 h-6 text-gfg-text-light"})}),W.jsxs("div",{children:[W.jsx("h1",{className:"text-xl font-bold text-gfg-text-light font-heading tracking-wider",children:"HACK HEIST"}),W.jsx("p",{className:"text-gfg-gold text-sm font-body tracking-wide",children:"ORGANIZER CONTROL"})]})]}),W.jsxs("div",{className:"flex items-center space-x-4",children:[W.jsxs("div",{className:"text-right text-sm",children:[W.jsx("div",{className:"text-gfg-text-dark",children:"Logged in as"}),W.jsx("div",{className:"text-gfg-text-light",children:t.name||t.email.split("@")[0]})]}),W.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gfg-text-dark hover:text-gfg-gold transition-colors uppercase font-body",children:[W.jsx(p_,{className:"w-4 h-4"})," ",W.jsx("span",{children:"Logout"})]})]})]})})}),W.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[W.jsxs("div",{className:"mb-6 p-4 bg-gfg-card-bg rounded-lg border border-gfg-border flex flex-col sm:flex-row items-center gap-4",children:[W.jsxs("div",{className:"flex items-center text-lg font-semibold text-gfg-text-light font-heading",children:[W.jsx(Em,{className:"w-5 h-5 mr-3 text-gfg-gold"}),W.jsx("span",{className:"tracking-wider",children:"Select Session:"})]}),W.jsxs("select",{id:"session",value:m,onChange:L=>y(Number(L.target.value)),className:"w-full sm:w-auto px-4 py-2 bg-gfg-dark-bg border border-gfg-border rounded-lg text-gfg-text-light focus:border-gfg-gold focus:ring-1 focus:ring-gfg-gold outline-none",children:[W.jsx("option",{value:1,children:"Session 1"}),W.jsx("option",{value:2,children:"Session 2"}),W.jsx("option",{value:3,children:"Session 3"})]})]}),W.jsx("div",{className:"border-b border-gfg-border mb-6",children:W.jsxs("nav",{className:"-mb-px flex space-x-6 font-heading","aria-label":"Tabs",children:[W.jsx("button",{onClick:()=>N("scan"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm uppercase tracking-wider ${O==="scan"?"border-gfg-gold text-gfg-gold":"border-transparent text-gfg-text-dark hover:text-gfg-text-light"}`,children:"QR Scanner"}),W.jsx("button",{onClick:()=>N("manual"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm uppercase tracking-wider ${O==="manual"?"border-gfg-gold text-gfg-gold":"border-transparent text-gfg-text-dark hover:text-gfg-text-light"}`,children:"Manual Entry"}),W.jsx("button",{onClick:()=>N("table"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm uppercase tracking-wider ${O==="table"?"border-gfg-gold text-gfg-gold":"border-transparent text-gfg-text-dark hover:text-gfg-text-light"}`,children:"Attendance Table"})]})}),O==="scan"&&W.jsx("div",{className:"-mt-6",children:W.jsx(aC,{onScan:b,scanResult:E},m)}),O==="manual"&&W.jsx("div",{children:W.jsxs("div",{className:"max-w-md bg-gfg-card-bg rounded-lg border border-gfg-border p-6 h-fit",children:[W.jsxs("h3",{className:"text-gfg-text-light font-bold text-lg mb-4 flex items-center font-heading uppercase tracking-wider",children:[W.jsx(g_,{className:"w-5 h-5 mr-2 text-gfg-gold"}),"Manual Attendance"]}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"regNo",className:"block text-sm font-body font-medium text-gfg-text-dark mb-2",children:"Registration No."}),W.jsx("input",{type:"text",id:"regNo",value:c,onChange:L=>d(L.target.value),onKeyPress:L=>L.key==="Enter"&&ee(),className:"w-full px-3 py-2 bg-gfg-dark-bg border border-gfg-border rounded-lg text-gfg-text-light",placeholder:"Enter Registration No."})]}),W.jsxs("button",{onClick:ee,className:"w-full bg-gfg-gold hover:bg-gfg-gold-hover text-gfg-card-bg py-3 px-4 rounded-lg font-bold font-heading flex items-center justify-center uppercase tracking-wider",children:[W.jsx(y_,{className:"w-5 h-5 mr-2"})," Mark Present"]}),x&&W.jsxs("div",{className:`flex items-start space-x-2 p-3 rounded-lg border ${x.type==="success"?"text-green-400 bg-green-500/10 border-green-500/20":"text-gfg-gold bg-gfg-gold/10 border-gfg-gold/20"}`,children:[W.jsx(Fh,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),W.jsx("span",{className:"text-sm font-body",children:x.text})]})]})]})}),O==="table"&&W.jsxs("div",{children:[W.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[W.jsx("h2",{className:"text-2xl font-bold text-gfg-text-light font-heading tracking-wider",children:"Attendance Records"}),W.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[W.jsxs("select",{value:B,onChange:L=>te(Number(L.target.value)),className:"px-3 py-2 bg-gfg-card-bg border border-gfg-border rounded-lg text-gfg-text-light focus:border-gfg-gold focus:ring-1 focus:ring-gfg-gold outline-none font-body",children:[W.jsx("option",{value:1,children:"Export Session 1"}),W.jsx("option",{value:2,children:"Export Session 2"}),W.jsx("option",{value:3,children:"Export Session 3"})]}),W.jsxs("button",{onClick:q,className:"flex flex-grow items-center justify-center space-x-2 bg-gfg-gold hover:bg-gfg-gold-hover text-gfg-card-bg px-4 py-2 rounded-lg transition-colors uppercase font-heading",children:[W.jsx(d_,{className:"w-4 h-4"}),W.jsx("span",{children:"Export"})]})]})]}),n.length===0?W.jsx("div",{className:"text-center py-10 bg-gfg-card-bg rounded-lg",children:W.jsx("p",{className:"text-gfg-text-dark font-body",children:"Loading attendance data..."})}):W.jsx(E_,{records:n})]})]})]})};function sI(){const[t,e]=Ke.useState(null),n=a=>{a.role==="organizer"&&e(a)},i=()=>{e(null)};return t?W.jsx("div",{className:"min-h-screen bg-gray-900",children:W.jsx(iI,{user:t,onLogout:i})}):W.jsx(C_,{onLogin:n})}Nu.createRoot(document.getElementById("root")).render(W.jsx($x.StrictMode,{children:W.jsx(sI,{})}));
